{"version":3,"file":"../app/home/page.js","mappings":"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","sources":["webpack://unreal/external commonjs \"next/dist/server/app-render/after-task-async-storage.external.js\"","webpack://unreal/external commonjs2 \"module\"","webpack://unreal/external commonjs \"next/dist/compiled/next-server/app-page.runtime.prod.js\"","webpack://unreal/external commonjs2 \"punycode\"","webpack://unreal/external commonjs2 \"assert\"","webpack://unreal/?2a57","webpack://unreal/external commonjs \"next/dist/server/app-render/action-async-storage.external.js\"","webpack://unreal/external commonjs2 \"process\"","webpack://unreal/external commonjs2 \"os\"","webpack://unreal/external commonjs2 \"stream\"","webpack://unreal/external commonjs2 \"util\"","webpack://unreal/external commonjs2 \"fs\"","webpack://unreal/external commonjs \"next/dist/server/app-render/work-async-storage.external.js\"","webpack://unreal/external node-commonjs \"node:child_process\"","webpack://unreal/sentry-wrapper-module","webpack://unreal/external commonjs2 \"path\"","webpack://unreal/external commonjs2 \"diagnostics_channel\"","webpack://unreal/external node-commonjs \"node:http\"","webpack://unreal/external node-commonjs \"node:zlib\"","webpack://unreal/./src/queries/post/getPosts.ts","webpack://unreal/external commonjs2 \"string_decoder\"","webpack://unreal/./src/queries/user/getFollowerStat.ts","webpack://unreal/./src/hooks/useFollowStats.tsx","webpack://unreal/external node-commonjs \"node:tls\"","webpack://unreal/./src/app/home/components/InfiniteScroll.tsx","webpack://unreal/./src/app/home/components/tabBtn.tsx","webpack://unreal/./src/app/home/components/search/searchTab.tsx","webpack://unreal/./src/queries/post/searchPostsPaginated.ts","webpack://unreal/./src/hooks/useSearchPostsInfinite.tsx","webpack://unreal/./src/app/home/components/search/searchPhotoGallary.tsx","webpack://unreal/./src/queries/post/searchUsersPaginated.ts","webpack://unreal/./src/hooks/useSearchUsersInfinite.tsx","webpack://unreal/./src/app/home/components/search/userSearch.tsx","webpack://unreal/./node_modules/.pnpm/use-debounce@10.0.4_react@19.0.0/node_modules/use-debounce/dist/index.module.js","webpack://unreal/./src/app/home/components/search/index.tsx","webpack://unreal/src/app/home/loading.tsx","webpack://unreal/./src/app/home/components/PostsProvider.tsx","webpack://unreal/./src/app/home/page.tsx","webpack://unreal/external node-commonjs \"node:https\"","webpack://unreal/./src/stores/galleryStore.ts","webpack://unreal/../../src/HydrationBoundary.tsx","webpack://unreal/external node-commonjs \"node:os\"","webpack://unreal/?5b2b","webpack://unreal/external node-commonjs \"node:diagnostics_channel\"","webpack://unreal/external commonjs2 \"crypto\"","webpack://unreal/external commonjs2 \"https\"","webpack://unreal/./src/app/home/components/photoOverlay.tsx","webpack://unreal/external commonjs2 \"tls\"","webpack://unreal/external node-commonjs \"node:stream\"","webpack://unreal/external node-commonjs \"node:util\"","webpack://unreal/./node_modules/.pnpm/react-photo-album@3.0.2_@types+react@19.0.12_react@19.0.0/node_modules/react-photo-album/dist/client/hooks.js","webpack://unreal/./node_modules/.pnpm/react-photo-album@3.0.2_@types+react@19.0.12_react@19.0.0/node_modules/react-photo-album/dist/utils/index.js","webpack://unreal/./node_modules/.pnpm/react-photo-album@3.0.2_@types+react@19.0.12_react@19.0.0/node_modules/react-photo-album/dist/static/index.js","webpack://unreal/./node_modules/.pnpm/react-photo-album@3.0.2_@types+react@19.0.12_react@19.0.0/node_modules/react-photo-album/dist/client/masonryProps.js","webpack://unreal/./node_modules/.pnpm/react-photo-album@3.0.2_@types+react@19.0.12_react@19.0.0/node_modules/react-photo-album/dist/layouts/masonry.js","webpack://unreal/./node_modules/.pnpm/react-photo-album@3.0.2_@types+react@19.0.12_react@19.0.0/node_modules/react-photo-album/dist/client/masonry.js","webpack://unreal/external commonjs \"next/dist/server/app-render/work-unit-async-storage.external.js\"","webpack://unreal/./node_modules/.pnpm/react-photo-album@3.0.2_@types+react@19.0.12_react@19.0.0/node_modules/react-photo-album/dist/styles/masonry.css","webpack://unreal/./node_modules/.pnpm/@tanstack+query-core@5.69.0/node_modules/@tanstack/query-core/build/modern/hydration.js?3b67","webpack://unreal/external node-commonjs \"node:fs\"","webpack://unreal/external commonjs2 \"worker_threads\"","webpack://unreal/external commonjs2 \"zlib\"","webpack://unreal/external commonjs2 \"perf_hooks\"","webpack://unreal/external node-commonjs \"node:worker_threads\"","webpack://unreal/external node-commonjs \"node:path\"","webpack://unreal/external node-commonjs \"node:net\"","webpack://unreal/external node-commonjs \"node:crypto\"","webpack://unreal/?de80","webpack://unreal/external commonjs2 \"buffer\"","webpack://unreal/external commonjs2 \"url\"","webpack://unreal/external commonjs2 \"child_process\"","webpack://unreal/external node-commonjs \"node:readline\"","webpack://unreal/external commonjs2 \"http\"","webpack://unreal/./src/queries/user/getLikeStat.ts","webpack://unreal/./src/hooks/useLikeStat.tsx","webpack://unreal/external commonjs2 \"tty\"","webpack://unreal/external commonjs2 \"async_hooks\"","webpack://unreal/external node-commonjs \"node:inspector\"","webpack://unreal/external commonjs2 \"net\"","webpack://unreal/./src/app/home/profile/components/profileInfo.tsx","webpack://unreal/external commonjs2 \"events\""],"sourcesContent":["module.exports = require(\"next/dist/server/app-render/after-task-async-storage.external.js\");","module.exports = require(\"module\");","module.exports = require(\"next/dist/compiled/next-server/app-page.runtime.prod.js\");","module.exports = require(\"punycode\");","module.exports = require(\"assert\");","import(/* webpackMode: \"eager\" */ \"/Users/a0000/projects/unreal/src/app/home/page.tsx\");\n","module.exports = require(\"next/dist/server/app-render/action-async-storage.external.js\");","module.exports = require(\"process\");","module.exports = require(\"os\");","module.exports = require(\"stream\");","module.exports = require(\"util\");","module.exports = require(\"fs\");","module.exports = require(\"next/dist/server/app-render/work-async-storage.external.js\");","module.exports = require(\"node:child_process\");","import * as Sentry from '@sentry/nextjs';\nimport * as origModule from 'next/dist/server/app-render/work-unit-async-storage.external.js';\nimport * as serverComponentModule from '__SENTRY_WRAPPING_TARGET_FILE__.cjs';\nexport * from '__SENTRY_WRAPPING_TARGET_FILE__.cjs';\n\nconst asyncStorageModule = { ...origModule } ;\n\nconst requestAsyncStorage =\n  'workUnitAsyncStorage' in asyncStorageModule\n    ? asyncStorageModule.workUnitAsyncStorage\n    : 'requestAsyncStorage' in asyncStorageModule\n      ? asyncStorageModule.requestAsyncStorage\n      : undefined;\n\nconst serverComponent = serverComponentModule.default;\n\nlet wrappedServerComponent;\nif (typeof serverComponent === 'function') {\n  // For some odd Next.js magic reason, `headers()` will not work if used inside `wrapServerComponentsWithSentry`.\n  // Current assumption is that Next.js applies some loader magic to userfiles, but not files in node_modules. This file\n  // is technically a userfile so it gets the loader magic applied.\n  wrappedServerComponent = new Proxy(serverComponent, {\n    apply: (originalFunction, thisArg, args) => {\n      let sentryTraceHeader = undefined;\n      let baggageHeader = undefined;\n      let headers = undefined;\n\n      // We try-catch here just in `requestAsyncStorage` is undefined since it may not be defined\n      try {\n        const requestAsyncStore = requestAsyncStorage?.getStore() ;\n        sentryTraceHeader = requestAsyncStore?.headers.get('sentry-trace') ?? undefined;\n        baggageHeader = requestAsyncStore?.headers.get('baggage') ?? undefined;\n        headers = requestAsyncStore?.headers;\n      } catch (e) {\n        /** empty */\n      }\n\n      return Sentry.wrapServerComponentWithSentry(originalFunction, {\n        componentRoute: '/home',\n        componentType: 'Page',\n        sentryTraceHeader,\n        baggageHeader,\n        headers,\n      }).apply(thisArg, args);\n    },\n  });\n} else {\n  wrappedServerComponent = serverComponent;\n}\n\nconst generateMetadata = serverComponentModule.generateMetadata\n  ? Sentry.wrapGenerationFunctionWithSentry(serverComponentModule.generateMetadata, {\n      componentRoute: '/home',\n      componentType: 'Page',\n      generationFunctionIdentifier: 'generateMetadata',\n      requestAsyncStorage,\n    })\n  : undefined;\n\nconst generateImageMetadata = serverComponentModule.generateImageMetadata\n  ? Sentry.wrapGenerationFunctionWithSentry(serverComponentModule.generateImageMetadata, {\n      componentRoute: '/home',\n      componentType: 'Page',\n      generationFunctionIdentifier: 'generateImageMetadata',\n      requestAsyncStorage,\n    })\n  : undefined;\n\nconst generateViewport = serverComponentModule.generateViewport\n  ? Sentry.wrapGenerationFunctionWithSentry(serverComponentModule.generateViewport, {\n      componentRoute: '/home',\n      componentType: 'Page',\n      generationFunctionIdentifier: 'generateViewport',\n      requestAsyncStorage,\n    })\n  : undefined;\n\nconst wrappedServerComponent$1 = wrappedServerComponent;\n\nexport { wrappedServerComponent$1 as default, generateImageMetadata, generateMetadata, generateViewport };\n","module.exports = require(\"path\");","module.exports = require(\"diagnostics_channel\");","module.exports = require(\"node:http\");","module.exports = require(\"node:zlib\");","import { Client } from \"$/supabase/client\";\nimport { Post, UploadResponse } from \"$/types/data.types\";\nimport { getRange } from \"@/utils\";\nimport { LIST_LIMIT } from \"@/app/libs/constants\";\nimport { logError } from \"@/utils/sentryUtils\";\n\nexport async function getPosts(client: Client, start = 0): Promise<Post[]> {\n  const range = getRange(start, LIST_LIMIT);\n\n  const { data, error } = await client\n    .from(\"posts\")\n    .select(\"*\")\n    .eq(\"isPrivate\", false) // Filter where isPrivate is false\n    .eq(\"isDraft\", false) // Filter where isDraft is false\n    .order(\"createdAt\", { ascending: false })\n    .range(range[0], range[1]);\n\n  if (error) {\n    logError(\"Supabase error fetching posts\", error);\n    throw new Error(error.message);\n  }\n\n  // console.log(\"Supabase raw data:\", data);\n\n  return data.map((post) => ({\n    ...post,\n    ipfsImages: Array.isArray(post.ipfsImages)\n      ? (post.ipfsImages as UploadResponse[]) // ✅ If already an array, cast it\n      : typeof post.ipfsImages === \"string\"\n      ? (JSON.parse(post.ipfsImages) as UploadResponse[]) // ✅ Parse string to UploadResponse[]\n      : null, // ❌ Set to null if neither\n  }));\n}\n\nexport async function getTopPosts(client: Client, start = 0): Promise<Post[]> {\n  const range = getRange(start, 20);\n\n  const { data, error } = await client\n    .from(\"posts\")\n    .select(\"*\")\n    .eq(\"isPrivate\", false) // Filter where isPrivate is false\n    .eq(\"isDraft\", false) // Filter where isDraft is false\n    .gt(\"like_count\", 0)\n    .order(\"like_count\", { ascending: false })\n    .range(range[0], range[1]);\n\n  if (error) {\n    logError(\"Supabase error fetching top posts\", error);\n    throw new Error(error.message);\n  }\n\n  // console.log(\"Supabase raw data:\", data);\n\n  return data.map((post) => ({\n    ...post,\n    ipfsImages: Array.isArray(post.ipfsImages)\n      ? (post.ipfsImages as UploadResponse[]) // ✅ If already an array, cast it\n      : typeof post.ipfsImages === \"string\"\n      ? (JSON.parse(post.ipfsImages) as UploadResponse[]) // ✅ Parse string to UploadResponse[]\n      : null, // ❌ Set to null if neither\n  }));\n}\n\nexport async function getFollowingPosts(\n  client: Client,\n  start = 0,\n  id?: string\n): Promise<Post[]> {\n  const range = getRange(start, 20);\n\n  // If no ID is provided, retrieve the authenticated user's ID\n  if (!id) {\n    const { error: userError, data: userData } = await client.auth.getUser();\n    if (userError) {\n      logError(\"Error fetching user for following posts\", userError);\n      throw new Error(\"Failed to retrieve authenticated user.\");\n    }\n    id = userData?.user?.id;\n    if (!id) {\n      throw new Error(\"User ID is undefined.\");\n    }\n  }\n\n  // Fetch followee IDs for the given user\n  const { data: followings, error: followingsError } = await client\n    .from(\"follows\")\n    .select(\"followee_id\")\n    .eq(\"follower_id\", id);\n\n  if (followingsError) {\n    logError(\"Error fetching user followings\", followingsError);\n    throw followingsError;\n  }\n\n  const followeeIds = followings.map((following) => following.followee_id);\n\n  if (followeeIds.length === 0) {\n    return []; // If the user is not following anyone, return an empty array\n  }\n\n  const { data, error } = await client\n    .from(\"posts\")\n    .select(\"*\")\n    .in(\"author\", followeeIds as string[])\n    .eq(\"isPrivate\", false) // Filter where isPrivate is false\n    .eq(\"isDraft\", false) // Filter where isDraft is false\n    .order(\"createdAt\", { ascending: false })\n    .range(range[0], range[1]);\n\n  if (error) {\n    logError(\"Supabase error fetching following posts\", error);\n    throw new Error(error.message);\n  }\n\n  // console.log(\"Supabase raw data:\", data);\n\n  return data.map((post) => ({\n    ...post,\n    ipfsImages: Array.isArray(post.ipfsImages)\n      ? (post.ipfsImages as UploadResponse[]) // ✅ If already an array, cast it\n      : typeof post.ipfsImages === \"string\"\n      ? (JSON.parse(post.ipfsImages) as UploadResponse[]) // ✅ Parse string to UploadResponse[]\n      : null, // ❌ Set to null if neither\n  }));\n}\n","module.exports = require(\"string_decoder\");","import { Client } from \"$/supabase/client\";\nimport { FollowStats } from \"$/types/data.types\";\nimport { logWarning, logError } from \"@/utils/sentryUtils\";\n\nexport const getFollowStats = async (\n  userId: string | undefined,\n  client: Client\n): Promise<FollowStats> => {\n  if (!userId) {\n    logWarning(\"No userId provided. Returning default stats\");\n    return { followeeCount: 0, followerCount: 0 };\n  }\n\n  try {\n    // Fetch follower count\n    const { count: followerCount, error: followerError } = await client\n      .from(\"follows\")\n      .select(\"*\", { count: \"exact\", head: true })\n      .eq(\"follower_id\", userId);\n\n    if (followerError) {\n      logError(\"Supabase follower count error\", followerError);\n      throw new Error(\n        `Error fetching follower count: ${followerError.message}`\n      );\n    }\n\n    // Fetch followee count\n    const { count: followeeCount, error: followeeError } = await client\n      .from(\"follows\")\n      .select(\"*\", { count: \"exact\", head: true })\n      .eq(\"followee_id\", userId);\n\n    if (followeeError) {\n      logError(\"Supabase followee count error\", followeeError);\n      throw new Error(\n        `Error fetching followee count: ${followeeError.message}`\n      );\n    }\n\n    return {\n      followerCount: followerCount || 0,\n      followeeCount: followeeCount || 0,\n    };\n  } catch (error) {\n    logError(\"Server error in getFollowStats\", error);\n    throw error;\n  }\n};\n","import { useQuery, useQueryClient } from \"@tanstack/react-query\";\nimport { supabase } from \"$/supabase/client\";\nimport { getFollowStats } from \"@/queries/user/getFollowerStat\";\nimport { dedupedRequest } from \"@/utils/queryOptimizer\";\nimport { useCallback } from \"react\";\n\ninterface FollowStats {\n  followeeCount: number;\n  followerCount: number;\n}\n\n/**\n * Optimized hook for fetching follow statistics with advanced caching\n * and optimistic update capabilities\n */\nexport function useFollowStats(userId?: string) {\n  const queryClient = useQueryClient();\n\n  const result = useQuery<FollowStats>({\n    queryKey: [\"followStats\", userId], // Unique cache key per user\n    queryFn: async () => {\n      if (!userId) return { followeeCount: 0, followerCount: 0 };\n\n      // Use deduplication to prevent duplicate API calls\n      return dedupedRequest(`followStats-${userId}`, () =>\n        getFollowStats(userId, supabase)\n      );\n    },\n    enabled: !!userId, // Only fetch if userId exists\n    staleTime: 1000 * 60 * 10, // Cache for 10 minutes\n    gcTime: 1000 * 60 * 30, // Keep in cache for 30 minutes\n  });\n\n  // Helper for optimistic updates when following\n  const incrementFolloweeCount = useCallback(\n    (otherUserId?: string) => {\n      if (!userId) return;\n\n      // Update current user's followee count (people I follow)\n      queryClient.setQueryData(\n        [\"followStats\", userId],\n        (old: FollowStats | undefined) => {\n          if (!old) return { followeeCount: 1, followerCount: 0 };\n          return {\n            ...old,\n            followeeCount: old.followeeCount + 1,\n          };\n        }\n      );\n\n      // Update target user's follower count (people following them)\n      if (otherUserId) {\n        queryClient.setQueryData(\n          [\"followStats\", otherUserId],\n          (old: FollowStats | undefined) => {\n            if (!old) return { followeeCount: 0, followerCount: 1 };\n            return {\n              ...old,\n              followerCount: old.followerCount + 1,\n            };\n          }\n        );\n      }\n    },\n    [userId, queryClient]\n  );\n\n  // Helper for optimistic updates when unfollowing\n  const decrementFolloweeCount = useCallback(\n    (otherUserId?: string) => {\n      if (!userId) return;\n\n      // Update current user's followee count (people I follow)\n      queryClient.setQueryData(\n        [\"followStats\", userId],\n        (old: FollowStats | undefined) => {\n          if (!old) return { followeeCount: 0, followerCount: 0 };\n          return {\n            ...old,\n            followeeCount: Math.max(0, old.followeeCount - 1),\n          };\n        }\n      );\n\n      // Update target user's follower count (people following them)\n      if (otherUserId) {\n        queryClient.setQueryData(\n          [\"followStats\", otherUserId],\n          (old: FollowStats | undefined) => {\n            if (!old) return { followeeCount: 0, followerCount: 0 };\n            return {\n              ...old,\n              followerCount: Math.max(0, old.followerCount - 1),\n            };\n          }\n        );\n      }\n    },\n    [userId, queryClient]\n  );\n\n  // Helper to refresh stats when needed\n  const refreshStats = useCallback(() => {\n    if (!userId) return;\n\n    queryClient.invalidateQueries({\n      queryKey: [\"followStats\", userId],\n      exact: true,\n    });\n  }, [userId, queryClient]);\n\n  return {\n    ...result,\n    // Expose enhanced API\n    incrementFolloweeCount,\n    decrementFolloweeCount,\n    refreshStats,\n    // Convenience properties with defaults\n    followeeCount: result.data?.followeeCount || 0,\n    followerCount: result.data?.followerCount || 0,\n  };\n}\n","module.exports = require(\"node:tls\");","\"use client\";\n\nimport React, { useEffect, useRef } from \"react\";\nimport Skeleton from \"react-loading-skeleton\";\nimport \"react-loading-skeleton/dist/skeleton.css\";\ntype Props = {\n  isLoadingInitial: boolean;\n  isLoadingMore: boolean;\n  children: React.ReactNode;\n  loadMore: () => void;\n  hasNextPage: boolean;\n};\n\nfunction InfiniteScroll(props: Props) {\n  const observerElement = useRef<HTMLDivElement | null>(null);\n  const { isLoadingInitial, isLoadingMore, children, loadMore, hasNextPage } =\n    props;\n\n  useEffect(() => {\n    // is element in view?\n    function handleIntersection(entries: IntersectionObserverEntry[]) {\n      entries.forEach((entry) => {\n        if (entry.isIntersecting && !isLoadingMore && !isLoadingInitial) {\n          // console.log(\"in view\");\n          loadMore();\n        }\n      });\n    }\n\n    // create observer instance\n    const observer = new IntersectionObserver(handleIntersection, {\n      root: null,\n      rootMargin: \"100px\",\n      threshold: 0,\n    });\n\n    if (observerElement.current) {\n      observer.observe(observerElement.current);\n    }\n\n    // cleanup function\n    return () => observer.disconnect();\n  }, [isLoadingMore, isLoadingInitial, loadMore]);\n\n  // console.log(isLoadingInitial);\n  return (\n    <div className=\"mb-32 w-full\">\n      {isLoadingInitial && (\n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-2  w-full \">\n          {Array(12)\n            .fill(null)\n            .map((_, index) => (\n              <Skeleton\n                key={index}\n                height={200}\n                baseColor=\"#1a1a1a\" // Dark background\n                highlightColor=\"#333\" // Slightly lighter shimmer effect\n              />\n            ))}\n        </div>\n      )}\n\n      {!isLoadingInitial && <>{children}</>}\n\n      <div ref={observerElement} id=\"obs\">\n        {isLoadingMore && hasNextPage && (\n          <div className=\"grid grid-cols-2 md:grid-cols-4 gap-2  w-full p-2 \">\n            {Array(4)\n              .fill(null)\n              .map((_, index) => (\n                <Skeleton\n                  key={index}\n                  height={200}\n                  baseColor=\"#1a1a1a\" // Dark background\n                  highlightColor=\"#333\" // Slightly lighter shimmer effect\n                />\n              ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default InfiniteScroll;\n","\"use client\";\n\nimport Link from \"next/link\";\nimport { useSearchParams, useRouter, usePathname } from \"next/navigation\";\nimport {\n  useEffect,\n  useState,\n  useTransition,\n  useCallback,\n  useRef,\n  memo,\n} from \"react\";\nimport { useGalleryStore, GalleryTab } from \"@/stores/galleryStore\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { useTransitionState } from \"@/hooks/useTransitionState\";\nimport {\n  GlobeIcon,\n  UserIcon,\n  FlashIcon,\n  SearchIcon,\n} from \"@/app/components/icons\";\n\ninterface NavBtnProps {\n  text: \"Explore\" | \"Following\" | \"Top\" | \"Search\";\n}\n\nfunction TabBtn({ text }: NavBtnProps) {\n  const router = useRouter();\n  const [isPending, startTransition] = useTransition();\n  const searchParams = useSearchParams();\n  const pathname = usePathname();\n\n  // Use Zustand store\n  const { activeTab, setActiveTab } = useGalleryStore();\n\n  // Convert UI text to param value - compute this once\n  const paramValue = text.toLowerCase();\n\n  // Compute isActive outside of render loop for better performance\n  const isActive = activeTab.toLowerCase() === paramValue;\n\n  // Memoize the click handler to prevent unnecessary re-renders\n  const handleClick = useCallback(() => {\n    // Skip if already active\n    if (isActive) return;\n\n    setActiveTab(text.toUpperCase() as GalleryTab);\n\n    startTransition(() => {\n      router.push(`${pathname}?s=${paramValue}`);\n    });\n  }, [router, pathname, paramValue, isActive, setActiveTab, text]);\n\n  // Get the appropriate icon based on tab text\n  const getIcon = () => {\n    const iconColor = isActive ? \"#F0F0F0\" : \"#5D5D5D\";\n    switch (text) {\n      case \"Explore\":\n        return <GlobeIcon color={iconColor} width={16} height={16} />;\n      case \"Following\":\n        return <UserIcon color={iconColor} width={16} height={16} />;\n      case \"Top\":\n        return <FlashIcon color={iconColor} width={16} height={16} />;\n      case \"Search\":\n        return <SearchIcon color={iconColor} width={16} height={16} />;\n      default:\n        return null;\n    }\n  };\n\n  return (\n    <div className=\"relative rounded-full cursor-pointer overflow-hidden\">\n      <button\n        onClick={handleClick}\n        className={`rounded-full px-4 py-2 text-sm md:text-base font-medium ${\n          isActive ? \"bg-primary-10\" : \"text-primary-6 bg-opacity-0\"\n        } flex items-center gap-2`}\n      >\n        {getIcon()}\n        {text}\n      </button>\n\n      {isActive && (\n        <div className=\"hidden md:flex  absolute w-[90px] h-[2px] -bottom-[1px] left-0 right-0 mx-auto\" />\n      )}\n    </div>\n  );\n}\n\n// Memoize the component to prevent unnecessary re-renders\nexport default memo(TabBtn);\n","import { ITabs, TabBtn } from \"../../creations/components/Tabs\";\nimport { TabText } from \"@/stores/creationAndProfileStore\";\n\n// Create a type that extends TabText to include search-specific tabs\ntype SearchTabText = TabText | \"User\" | \"Image\";\n\n// Create an interface for the search tab props\ninterface SearchTabProps {\n  currentIndex: number;\n  setCurrentIndex: (value: number) => void;\n  section?: \"creation\" | \"profile\"; // Optional for the search component\n}\n\n// Also add a custom TabBtn interface to handle our extended tab types\ninterface SearchTabBtnProps {\n  currentIndex: number;\n  index: number;\n  text: SearchTabText;\n  setCurrentIndex: (value: number) => void;\n  section: \"creation\" | \"profile\";\n}\n\n// Custom TabBtn component that extends the original one\nfunction SearchTabBtn({\n  currentIndex,\n  index,\n  text,\n  setCurrentIndex,\n  section,\n}: SearchTabBtnProps) {\n  return (\n    <button\n      className={`flex justify-center items-center gap-x-2 py-2 px-4 border-primary-1 ${\n        currentIndex === index ? \"border-b-2\" : \"\"\n      }`}\n      onClick={() => setCurrentIndex(index)}\n    >\n      <p style={{ color: currentIndex === index ? \"#DADADA\" : \"#5D5D5D\" }}>\n        {text}\n      </p>\n    </button>\n  );\n}\n\nexport default function Tabs({\n  currentIndex,\n  setCurrentIndex,\n  section = \"creation\", // Default to creation for backwards compatibility\n}: SearchTabProps) {\n  return (\n    <div className=\"flex gap-x-8 border-b-[1px] border-primary-11\">\n      <SearchTabBtn\n        currentIndex={currentIndex}\n        index={0}\n        text=\"User\"\n        setCurrentIndex={setCurrentIndex}\n        section={section}\n      />\n\n      <SearchTabBtn\n        currentIndex={currentIndex}\n        index={1}\n        text=\"Image\"\n        setCurrentIndex={setCurrentIndex}\n        section={section}\n      />\n    </div>\n  );\n}\n","import { supabase } from \"$/supabase/client\";\nimport { Post, UploadResponse } from \"$/types/data.types\";\nimport { logError, logWarning } from \"@/utils/sentryUtils\";\n\nexport const searchPostsPaginated = async (\n  keyword: string,\n  page: number,\n  limit = 10\n): Promise<Post[]> => {\n  if (!keyword?.trim()) return []; // ✅ Prevent empty or whitespace-only searches\n\n  // Calculate pagination bounds, ensuring start is never negative\n  const start = Math.max(0, (page - 1) * limit);\n  // Calculate end index (inclusive) for the current page\n  const end = start + (limit - 1);\n\n  // console.log(`Fetching posts from index ${start} to ${end}`);\n  const { data, error } = await supabase\n    .from(\"posts_with_rank\") // ✅ Query the view, not \"posts\"\n    .select(\"*\")\n    .eq(\"isPrivate\", false) // Filter where isPrivate is false\n    .eq(\"isDraft\", false) // Filter where isDraft is false\n    .textSearch(\"prompt\", keyword, {\n      type: \"websearch\",\n      config: \"english\",\n    })\n    .order(\"rank\", { ascending: false }) // ✅ Order by rank\n    .order(\"id\", { ascending: false }) // ✅ Ensures stable pagination\n\n    .range(start, end);\n\n  if (error) {\n    logError(\"Supabase post search error\", error);\n    throw new Error(error.message);\n  }\n\n  return data.map((post) => ({\n    ...post,\n    id: post.id ?? 0, // Ensure id is always a number\n    prompt: post.prompt ?? \"\", // Ensure prompt is always a string\n    author: post.author ?? \"\",\n    caption: post.caption ?? \"\",\n    category: post.category ?? \"\",\n    cpu: post.cpu ?? 0,\n    createdAt: post.createdAt ?? \"\",\n    device: post.device ?? \"\",\n    rank: post.rank ?? 0,\n    seed: post.seed ?? 0,\n\n    ipfsImages: (() => {\n      if (Array.isArray(post.ipfsImages))\n        return post.ipfsImages as UploadResponse[];\n      if (typeof post.ipfsImages === \"string\") {\n        try {\n          return JSON.parse(post.ipfsImages) as UploadResponse[];\n        } catch {\n          logWarning(\"Failed to parse ipfsImages\", {\n            ipfsImages: post.ipfsImages,\n          });\n          return null; // ✅ Handle potential parsing errors\n        }\n      }\n      return null;\n    })(),\n  }));\n};\n","import { useInfiniteQuery, useQueryClient } from \"@tanstack/react-query\";\nimport { searchPostsPaginated } from \"@/queries/post/searchPostsPaginated\";\nimport { useEffect, useState, useMemo, useCallback } from \"react\";\nimport { normalizeEntity } from \"@/utils/queryOptimizer\";\nimport { log, logError } from \"@/utils/sentryUtils\";\n\n// Optimized hook for searching posts with efficient data loading and caching\nexport const useSearchPostsInfinite = (keyword: string, limit = 10) => {\n  const queryClient = useQueryClient();\n\n  // Debounce the search keyword to prevent excessive API calls\n  const [debouncedKeyword, setDebouncedKeyword] = useState(keyword);\n\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setDebouncedKeyword(keyword);\n    }, 300); // 300ms debounce\n\n    return () => clearTimeout(timer);\n  }, [keyword]);\n\n  // Memoize the normalized keyword to prevent unnecessary query key changes\n  const normalizedKeyword = useMemo(\n    () => debouncedKeyword.trim().toLowerCase(),\n    [debouncedKeyword]\n  );\n\n  // The actual query using the debounced keyword\n  const result = useInfiniteQuery({\n    queryKey: [\"posts\", \"search\", normalizedKeyword, limit],\n    queryFn: async ({ pageParam = 1 }) => {\n      const result = await searchPostsPaginated(\n        normalizedKeyword,\n        pageParam,\n        limit\n      );\n\n      // Normalize the post data for reuse\n      result.forEach((post) => {\n        normalizeEntity(\"posts\", post);\n      });\n\n      return {\n        data: result ?? [],\n        nextCursor: result.length === limit ? pageParam + 1 : undefined,\n      };\n    },\n    initialPageParam: 1,\n    getNextPageParam: (lastPage) =>\n      lastPage?.data.length < limit ? undefined : lastPage.nextCursor,\n    enabled: normalizedKeyword.length > 2, // Only search with meaningful keywords\n    staleTime: 1000 * 60 * 5, // Cache results for 5 minutes\n    gcTime: 1000 * 60 * 15, // Keep unused results in cache for 15 minutes\n  });\n\n  // Prefetch next page when close to the end\n  const prefetchNextPage = useCallback(() => {\n    if (result.hasNextPage && !result.isFetchingNextPage) {\n      const nextPageParam =\n        result.data?.pages[result.data.pages.length - 1]?.nextCursor;\n      if (nextPageParam) {\n        queryClient.prefetchInfiniteQuery({\n          queryKey: [\"posts\", \"search\", normalizedKeyword, limit],\n          queryFn: ({ pageParam = nextPageParam }) =>\n            searchPostsPaginated(normalizedKeyword, pageParam, limit),\n          initialPageParam: nextPageParam,\n        });\n      }\n    }\n  }, [\n    result.hasNextPage,\n    result.isFetchingNextPage,\n    result.data?.pages,\n    queryClient,\n    normalizedKeyword,\n    limit,\n  ]);\n\n  // Expose the prefetch function for optimization\n  return {\n    ...result,\n    prefetchNextPage,\n    debouncedKeyword: normalizedKeyword,\n  };\n};\n","\"use client\";\nimport {\n  MasonryPhotoAlbum,\n  RenderImageContext,\n  RenderImageProps,\n  RenderPhotoContext,\n} from \"react-photo-album\";\nimport \"react-photo-album/masonry.css\";\nimport { useEffect, useState } from \"react\";\nimport { MD_BREAKPOINT } from \"@/app/libs/constants\";\n//import { ChatIcon, HeartFillIcon, HeartIcon, OptionMenuIcon } from \"@/app/components/icons\";\nimport PhotoOverlay, { ExtendedRenderPhotoContext } from \"../photoOverlay\";\n\nimport Image from \"next/image\";\nimport ImageView from \"../imageView\";\n// import { usePostsQuery } from \"@/hooks/usePostsQuery\";\nimport { supabase } from \"$/supabase/client\";\nimport {\n  getFollowingPosts,\n  getPosts,\n  getTopPosts,\n} from \"@/queries/post/getPosts\";\nimport { useInfiniteQuery } from \"@tanstack/react-query\";\nimport InfiniteScroll from \"../InfiniteScroll\";\nimport { formattedPhotos } from \"../../formattedPhotos\";\nimport { Post } from \"$/types/data.types\";\nimport { useSearchParams } from \"next/navigation\";\n// import { getAuthorUserName } from \"@/queries/post/getAuthorUserName\";\nimport useAuthorUsername from \"@/hooks/useAuthorUserName\";\nimport useAuthorImage from \"@/hooks/useAuthorImage\";\nimport { useSearchPostsInfinite } from \"@/hooks/useSearchPostsInfinite\";\nimport { useGalleryStore } from \"@/stores/galleryStore\";\nimport OptimizedImage from \"@/app/components/OptimizedImage\";\n\n// Add renderNextImage function for lazy/eager loading\nfunction renderNextImage(\n  { alt = \"\", title, sizes }: RenderImageProps,\n  { photo, width, height, index = 0 }: RenderImageContext\n) {\n  // Use priority loading for the first 8 images (eagerly loaded)\n  // This provides fast initial rendering for visible content\n  const shouldPrioritize = index < 8;\n\n  // Extract image name for tracking\n  const imageName =\n    typeof photo === \"object\" && photo !== null && \"src\" in photo\n      ? String(photo.src).split(\"/\").pop()?.split(\"?\")[0] ||\n        `search-img-${index}`\n      : `search-img-${index}`;\n\n  // Responsive size hints for optimal loading\n  const responsiveSizes =\n    sizes || \"(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 33vw\";\n\n  return (\n    <div\n      style={{\n        width: \"100%\",\n        position: \"relative\",\n        aspectRatio: `${width} / ${height}`,\n      }}\n    >\n      <OptimizedImage\n        fill\n        src={photo}\n        alt={alt || \"Search result\"}\n        title={title}\n        sizes={responsiveSizes}\n        loading={shouldPrioritize ? \"eager\" : \"lazy\"}\n        priority={shouldPrioritize}\n        placeholder={\"blurDataURL\" in photo ? \"blur\" : undefined}\n        trackPerformance={process.env.NODE_ENV === \"development\"}\n        imageName={imageName}\n      />\n    </div>\n  );\n}\n\nexport default function SearchPhotoGallary({\n  searchTerm,\n}: {\n  searchTerm: string;\n}) {\n  const [imageIndex, setImageIndex] = useState(-1);\n  const [columns, setColumns] = useState(\n    window?.innerWidth < MD_BREAKPOINT ? 2 : 4\n  );\n\n  // Use Zustand store for tab state\n  const { initFromUrl } = useGalleryStore();\n\n  // Sync with URL on initial load\n  const searchParams = useSearchParams();\n  useEffect(() => {\n    const urlParam = searchParams.get(\"s\");\n    initFromUrl(urlParam);\n  }, [searchParams, initFromUrl]);\n\n  const {\n    data,\n    isLoading,\n    isError,\n    error,\n    fetchNextPage,\n    hasNextPage,\n    isFetchingNextPage,\n  } = useSearchPostsInfinite(searchTerm, 10);\n\n  useEffect(() => {\n    if (typeof window === \"undefined\") return; // ✅ Ensure it runs only on the client\n\n    const handleResize = () => {\n      setColumns(window.innerWidth < MD_BREAKPOINT ? 2 : 4);\n    };\n\n    window.addEventListener(\"resize\", handleResize);\n    handleResize(); // ✅ Call initially to set correct columns\n\n    return () => {\n      window.removeEventListener(\"resize\", handleResize);\n    };\n  }, []);\n\n  const handleImageIndex = (context: RenderPhotoContext) => {\n    setImageIndex(context.index);\n  };\n\n  if (isError) {\n    return (\n      <p className=\"wrapper\">{\"message\" in error ? error.message : error}</p>\n    );\n  }\n\n  if (!data || data.pages.length === 0) {\n    return (\n      <p>It looks like you haven&apos;t saved any books to this shelf yet.</p>\n    );\n  }\n\n  return (\n    <div className=\"w-full\">\n      <InfiniteScroll\n        isLoadingInitial={isLoading}\n        isLoadingMore={isFetchingNextPage}\n        loadMore={() => hasNextPage && fetchNextPage()}\n        hasNextPage={hasNextPage}\n      >\n        <MasonryPhotoAlbum\n          photos={formattedPhotos(data?.pages ?? [])}\n          columns={columns}\n          spacing={4}\n          render={{\n            extras: (_, context) => (\n              <PhotoWithAuthor\n                context={context as ExtendedRenderPhotoContext}\n                handleImageIndex={handleImageIndex}\n              />\n            ),\n            image: renderNextImage,\n          }}\n        />\n      </InfiniteScroll>\n      <ImageView\n        photo={\n          imageIndex > -1 && formattedPhotos(data?.pages ?? [])[imageIndex]\n        }\n        setImageIndex={setImageIndex}\n      />\n    </div>\n  );\n}\n\nfunction PhotoWithAuthor({\n  context,\n  handleImageIndex,\n}: {\n  context: ExtendedRenderPhotoContext;\n  handleImageIndex: (context: RenderPhotoContext) => void;\n}) {\n  const authorId = context.photo.author || \"\"; // Ensure it's always a string\n\n  const { data: userName, isLoading: isLoading } = useAuthorUsername(authorId);\n  const { data: image, isLoading: imageLoading } = useAuthorImage(authorId);\n  return (\n    <PhotoOverlay\n      setImageIndex={() => handleImageIndex(context)}\n      context={context}\n    >\n      <div className=\"absolute flex items-center gap-1 bottom-2 left-2\">\n        {!isLoading && !imageLoading && userName && (\n          <>\n            <div className=\"rounded-full\">\n              {image ? (\n                <Image\n                  className=\"rounded-full border-[1px] border-primary-3 drop-shadow-lg\"\n                  src={image}\n                  width={24}\n                  height={24}\n                  alt=\"profile\"\n                />\n              ) : (\n                <div className=\"w-6 h-6 bg-gray-300 rounded-full\" /> // Fallback avatar\n              )}\n            </div>\n            <p className=\"font-semibold text-sm drop-shadow-lg\">{userName}</p>\n          </>\n        )}\n      </div>\n    </PhotoOverlay>\n  );\n}\n","import { supabase } from \"$/supabase/client\";\nimport { Post, UploadResponse } from \"$/types/data.types\";\nimport { logError, logWarning } from \"@/utils/sentryUtils\";\n\nexport type ProfileWithPosts = {\n  id: string;\n  full_name: string;\n  username: string | null;\n  avatar_url: string | null;\n  createdAt: string;\n  posts: Post[]; // Up to 10 posts per user\n};\n\nexport const searchUsersPaginated = async (\n  keyword: string,\n  page: number,\n  limit = 10\n): Promise<ProfileWithPosts[]> => {\n  if (!keyword?.trim()) return []; // Prevent empty searches\n\n  const start = Math.max(0, (page - 1) * limit);\n  const end = start + (limit - 1);\n\n  // const { data, error } = await supabase\n  //   .from(\"profiles\")\n  //   .select(`*, posts:posts(*)`) // Select everything from profiles and its posts\n  //   .textSearch(\"full_name\", keyword, {\n  //     type: \"websearch\",\n  //     config: \"english\",\n  //   })\n  //   .order(\"createdAt\", { ascending: false }) // Ensure correct sorting\n  //   .range(start, end);\n  //\n  const { data, error } = await supabase\n    .from(\"profiles\")\n    .select(`*, posts:posts(*)`)\n    .textSearch(\"search_vector\", keyword, {\n      type: \"websearch\",\n      config: \"english\",\n    })\n    .order(\"createdAt\", { ascending: false })\n    .range(start, end);\n\n  if (error) {\n    logError(\"Supabase user search error\", error);\n    throw new Error(error.message);\n  }\n  // Transform data to match `ProfileWithPosts` type\n  return data.map((profile) => ({\n    id: profile.id,\n    full_name: profile.full_name || \"\", // Ensure non-null string\n    username: profile.display_name || profile.full_name || \"\",\n    avatar_url: profile.avatar_url,\n    createdAt: profile.createdAt ?? \"\",\n    posts: Array.isArray(profile.posts)\n      ? profile.posts.slice(0, 10).map((post) => ({\n          ...post, // Spread all post fields dynamically\n          createdAt: post.createdAt ?? \"\",\n          ipfsImages: (() => {\n            if (Array.isArray(post.ipfsImages))\n              return post.ipfsImages as UploadResponse[];\n            if (typeof post.ipfsImages === \"string\") {\n              try {\n                return JSON.parse(post.ipfsImages) as UploadResponse[];\n              } catch {\n                logWarning(\"Failed to parse ipfsImages\", {\n                  ipfsImages: post.ipfsImages,\n                });\n                return null;\n              }\n            }\n            return null;\n          })(),\n        }))\n      : [],\n  }));\n};\n","import { useInfiniteQuery } from \"@tanstack/react-query\";\nimport { searchUsersPaginated } from \"@/queries/post/searchUsersPaginated\";\n\nexport const useSearchUsersInfinite = (keyword: string, limit = 10) => {\n  return useInfiniteQuery({\n    queryKey: [\"posts\", keyword.trim(), limit], // ✅ Ensures key consistency\n    queryFn: async ({ pageParam = 1 }) => {\n      const result = await searchUsersPaginated(keyword, pageParam, limit);\n      return {\n        data: result ?? [],\n        nextCursor: result.length === limit ? pageParam + 1 : undefined, // ✅ Prevents unnecessary extra calls\n      };\n    },\n    initialPageParam: 1,\n    getNextPageParam: (lastPage) => lastPage?.nextCursor ?? undefined,\n    enabled: keyword.trim().length > 2, // ✅ Prevents empty queries & ensures keyword is meaningful\n    staleTime: 1000 * 60 * 5, // ✅ Caches results for 5 minutes\n  });\n};\n","\"use client\";\nimport Image from \"next/image\";\n//import PhotoOverlay from \"../photoOverlay\"\nimport { OptionMenuIcon } from \"@/app/components/icons\";\nimport { timeAgo } from \"@/app/libs/timeAgo\";\nimport { truncateText } from \"@/utils\";\nimport ProfileInfo from \"../../profile/components/profileInfo\";\nimport { useSearchUsersInfinite } from \"@/hooks/useSearchUsersInfinite\";\nimport { ProfileWithPosts } from \"@/queries/post/searchUsersPaginated\";\nimport { Post } from \"$/types/data.types\";\nimport { getImage } from \"../../formattedPhotos\";\nimport { useFollowStats } from \"@/hooks/useFollowStats\";\nimport { useLikeStat } from \"@/hooks/useLikeStat\";\nimport { useDoesUserFollow } from \"@/hooks/useDoesUserFollow\";\nimport { useUser } from \"@/hooks/useUser\";\nimport { useToggleFollow } from \"@/hooks/useToggleFollow\";\nimport Link from \"next/link\";\n\nconst dummydata = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];\n\nexport default function UserSearch({ searchTerm }: { searchTerm: string }) {\n  const {\n    data,\n    isLoading,\n    isError,\n    error,\n    fetchNextPage,\n    hasNextPage,\n    isFetchingNextPage,\n  } = useSearchUsersInfinite(searchTerm, 10);\n\n  return (\n    <div>\n      {data?.pages?.flatMap((page) =>\n        page.data.map((details: ProfileWithPosts) => (\n          <User key={details.id} data={details} posts={details.posts} />\n        )),\n      )}\n    </div>\n  );\n}\n\nexport function User({\n  data,\n  posts,\n}: {\n  data: ProfileWithPosts;\n  posts: Post[];\n}) {\n  const { data: followStats } = useFollowStats(data.id);\n  const { data: likeCount } = useLikeStat(data.id);\n  const { userId } = useUser();\n  const { data: isFollowing, isLoading } = useDoesUserFollow(\n    userId as string,\n    data.id,\n  );\n  const toggleFollowMutation = useToggleFollow();\n\n  const handleFollowToggle = () => {\n    toggleFollowMutation.mutate({\n      followerId: userId as string,\n      followeeId: data.id,\n    });\n  };\n\n  return (\n    <div className=\"bg-primary-11 rounded-t-3xl my-3\">\n      <div className=\"flex justify-between items-center h-16 py-4 px-4\">\n        <div className=\"flex items-center gap-4\">\n          <Link\n            href={`/home/profile/${data.id}`}\n            className=\"w-10 h-10 bg-primary-9 rounded-full\"\n          >\n            <Image\n              src={data.avatar_url || \"/profile.jpg\"}\n              width={40}\n              height={40}\n              alt=\"profile\"\n              className=\"rounded-full\"\n            />\n          </Link>\n\n          <Link\n            href={`/home/profile/${data.id}`}\n            className=\"text-primary-1 text-lg w-36 font-normal\"\n          >\n            {data.username}\n          </Link>\n\n          {userId !== data.id && (\n            <button\n              disabled={toggleFollowMutation.isPending}\n              onClick={handleFollowToggle}\n              className={`flex items-center justify-center gap-1 rounded-full h-8 w-24 px-2 py-1 border-[1px] border-primary-8\n    ${isFollowing ? \"bg-transparent\" : \"bg-primary-10\"}`}\n            >\n              <p className=\"text-primary-5 text-sm\">\n                {isLoading ? \"Loading...\" : isFollowing ? \"Unfollow\" : \"Follow\"}\n              </p>\n            </button>\n          )}\n        </div>\n\n        <div className=\"flex gap-x-4 my-4\">\n          <ProfileInfo\n            value={followStats?.followeeCount?.toString() || \"0\"}\n            title={followStats?.followeeCount === 1 ? \"Follower\" : \"Followers\"}\n          />\n          <ProfileInfo\n            value={followStats?.followerCount?.toString() || \"0\"}\n            title={followStats?.followerCount === 1 ? \"Following\" : \"Following\"} // Stays the same\n            leftBorder={true}\n          />\n          <ProfileInfo\n            value={likeCount?.toString() || \"0\"}\n            title={likeCount === 1 ? \"Like\" : \"Likes\"} // Adjusts title dynamically\n            leftBorder={true}\n          />\n        </div>\n      </div>\n\n      <div className=\"overflow-x-auto whitespace-nowrap\">\n        {posts.map((post, index) => (\n          <UserImage key={index} post={post} />\n        ))}\n      </div>\n    </div>\n  );\n}\n\nexport function UserImage({ post }: { post: Post }) {\n  return (\n    // <PhotoOverlay\n    //     //setImageIndex={() => handleImageIndex(context)}\n    //     //context={context as ExtendedRenderPhotoContext}\n    //     >\n    <Link\n      href={`home/photo/${post.id}`}\n      className=\"relative inline-block w-[306px] cursor-pointer\"\n    >\n      <div className=\"absolute top-0 flex justify-between text-primary-1 text-sm picture-gradient w-full h-12 items-center px-3\">\n        <p>{timeAgo(post.createdAt)}</p>\n        <button>\n          <OptionMenuIcon color=\"#FFFFFF\" />\n        </button>\n      </div>\n\n      <Image\n        src={getImage(\n          post.ipfsImages?.[0].hash as string,\n          post.ipfsImages?.[0].fileNames?.[0] as string,\n          post.author,\n        )}\n        width={306}\n        height={408}\n        alt=\"generated\"\n      />\n\n      <p className=\"absolute bottom-0 left-0 w-full text-left text-primary-1 text-sm picture-gradient h-14 p-3\">\n        {truncateText(post.caption || (post.prompt as string), 3)}\n      </p>\n    </Link>\n    // </PhotoOverlay>\n  );\n}\n","import{useRef as r,useEffect as n,useMemo as t,useState as e,useCallback as u}from\"react\";function c(e,u,c){var i=this,a=r(null),o=r(0),f=r(null),l=r([]),v=r(),m=r(),d=r(e),g=r(!0);d.current=e;var p=\"undefined\"!=typeof window,w=!u&&0!==u&&p;if(\"function\"!=typeof e)throw new TypeError(\"Expected a function\");u=+u||0;var s=!!(c=c||{}).leading,x=!(\"trailing\"in c)||!!c.trailing,h=\"maxWait\"in c,y=\"debounceOnServer\"in c&&!!c.debounceOnServer,F=h?Math.max(+c.maxWait||0,u):null;n(function(){return g.current=!0,function(){g.current=!1}},[]);var A=t(function(){var r=function(r){var n=l.current,t=v.current;return l.current=v.current=null,o.current=r,m.current=d.current.apply(t,n)},n=function(r,n){w&&cancelAnimationFrame(f.current),f.current=w?requestAnimationFrame(r):setTimeout(r,n)},t=function(r){if(!g.current)return!1;var n=r-a.current;return!a.current||n>=u||n<0||h&&r-o.current>=F},e=function(n){return f.current=null,x&&l.current?r(n):(l.current=v.current=null,m.current)},c=function r(){var c=Date.now();if(t(c))return e(c);if(g.current){var i=u-(c-a.current),f=h?Math.min(i,F-(c-o.current)):i;n(r,f)}},A=function(){if(p||y){var e=Date.now(),d=t(e);if(l.current=[].slice.call(arguments),v.current=i,a.current=e,d){if(!f.current&&g.current)return o.current=a.current,n(c,u),s?r(a.current):m.current;if(h)return n(c,u),r(a.current)}return f.current||n(c,u),m.current}};return A.cancel=function(){f.current&&(w?cancelAnimationFrame(f.current):clearTimeout(f.current)),o.current=0,l.current=a.current=v.current=f.current=null},A.isPending=function(){return!!f.current},A.flush=function(){return f.current?e(Date.now()):m.current},A},[s,h,u,F,x,w,p,y]);return A}function i(r,n){return r===n}function a(n,t,a){var o=a&&a.equalityFn||i,f=r(n),l=e({})[1],v=c(u(function(r){f.current=r,l({})},[l]),t,a),m=r(n);return o(m.current,n)||(v(n),m.current=n),[f.current,v]}function o(r,n,t){var e=void 0===t?{}:t,u=e.leading,i=e.trailing;return c(r,n,{maxWait:n,leading:void 0===u||u,trailing:void 0===i||i})}export{a as useDebounce,c as useDebouncedCallback,o as useThrottledCallback};\n//# sourceMappingURL=index.module.js.map\n","\"use client\";\nimport { useState } from \"react\";\nimport { CloseIcon, SearchIcon } from \"@/app/components/icons\";\nimport Tabs from \"./searchTab\";\nimport SearchPhotoGallary from \"./searchPhotoGallary\";\nimport UserSearch from \"./userSearch\";\nimport { useDebounce } from \"use-debounce\";\n\nexport default function Search() {\n  const [currentIndex, setCurrentIndex] = useState(0);\n\n  const [open, setOpen] = useState(false);\n  const [hover, setHover] = useState(false);\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [debouncedSearch] = useDebounce(searchTerm, 500);\n\n  function getIconColor() {\n    if (hover) {\n      return \"#8F8F8F\";\n    } else {\n      return \"#5D5D5D\";\n    }\n  }\n\n  return (\n    <>\n      <button\n        className={`flex gap-x-1 h-9 w-10 items-center justify-center rounded-full ${\n          hover ? \"bg-primary-10\" : \"\"\n        }`}\n        onClick={() => setOpen(true)}\n        onMouseEnter={() => setHover(true)}\n        onMouseLeave={() => setHover(false)}\n      >\n        <SearchIcon width={16} height={16} color={getIconColor()} />\n      </button>\n\n      {open && (\n        <div className=\"fixed z-50  top-0  h-full w-screen bg-gray-950/50\">\n          <div\n            onClick={() => setOpen(false)}\n            className=\"m-auto z-50  top-0 left-0 h-screen w-screen bg-gray-950/50\"\n          ></div>\n\n          <div className=\"absolute w-full max-w-[1034px] h-[90vh] z-50 top-2 md:top-[5vh] left-0 md:left-60 border-primary-8 border-[1px] bg-primary-12 rounded-xl p-4\">\n            <div className=\"flex justify-between text-primary-3\">\n              <p className=\"nasalization text-2xl\">\n                Search for Anything Imaginable\n              </p>\n              <div className=\"cursor-pointer\" onClick={() => setOpen(false)}>\n                <CloseIcon width={24} height={24} color=\"#C1C1C1\" />\n              </div>\n            </div>\n\n            <div>\n              <div className=\"relative h-14 w-full my-3 rounded-xl bg-primary-10\">\n                <button className=\"absolute top-[18px] left-3 z-10\">\n                  <SearchIcon width={20} height={20} color=\"#8F8F8F\" />\n                </button>\n\n                <input\n                  type=\"text\"\n                  placeholder=\"Search for anything imaginable\"\n                  value={searchTerm}\n                  onChange={(e) => setSearchTerm(e.target.value)}\n                  className=\"absolute text-primary-2 placeholder:text-primary-2 bg-inherit left-0 top-0 w-full h-14 px-10 rounded-lg border-[1px] border-primary-11 border-none focus:outline-none focus:ring-0\"\n                />\n              </div>\n            </div>\n\n            <div className=\"my-2\">\n              <Tabs\n                currentIndex={currentIndex}\n                setCurrentIndex={setCurrentIndex}\n              />\n            </div>\n\n            <div className=\"overflow-y-auto h-[70vh]\">\n              {currentIndex === 0 && (\n                <UserSearch searchTerm={debouncedSearch} />\n              )}\n\n              {currentIndex === 1 && (\n                <SearchPhotoGallary searchTerm={debouncedSearch} />\n              )}\n            </div>\n          </div>\n        </div>\n      )}\n    </>\n  );\n}\n","import Image from \"next/image\";\n\nexport default function Loading() {\n  // You can add any UI inside Loading, including a Skeleton.\n  return (\n    <div className=\"h-screen w-screen top-0  left-0 fixed z-50 flex items-center justify-center \">\n      <Image\n        src=\"/Icon-White.png\"\n        alt=\"unreal\"\n        height={50}\n        width={50}\n        priority\n      />\n    </div>\n  );\n}\n","\"use client\";\n\nimport { supabase } from \"$/supabase/client\";\nimport {\n  dehydrate,\n  HydrationBoundary,\n  useQueryClient,\n} from \"@tanstack/react-query\";\nimport { useEffect, useState } from \"react\";\nimport {\n  getFollowingPosts,\n  getPosts,\n  getTopPosts,\n} from \"@/queries/post/getPosts\";\nimport Loading from \"../loading\";\n\nexport default function PostsProvider({\n  children,\n  searchType,\n}: {\n  children: React.ReactNode;\n  searchType?: string;\n}) {\n  const [isHydrated, setIsHydrated] = useState(false);\n  const queryClient = useQueryClient();\n\n  useEffect(() => {\n    const prefetchData = async () => {\n      // Prefetch initial data based on search type\n      await queryClient.prefetchInfiniteQuery({\n        queryKey: [\"posts\", searchType || \"explore\"],\n        queryFn: async ({ pageParam = 0 }) => {\n          let result = [];\n          if (searchType?.toUpperCase() === \"EXPLORE\") {\n            result = await getPosts(supabase, pageParam);\n          } else if (searchType?.toUpperCase() === \"FOLLOWING\") {\n            result = await getFollowingPosts(supabase, pageParam);\n          } else if (searchType?.toUpperCase() === \"TOP\") {\n            result = await getTopPosts(supabase, pageParam);\n          } else {\n            result = await getPosts(supabase, pageParam);\n          }\n          return {\n            data: result ?? [],\n            nextCursor: result.length > 0 ? pageParam + 1 : undefined,\n          };\n        },\n        initialPageParam: 0,\n        getNextPageParam: (lastPage: { nextCursor: any }) =>\n          lastPage?.nextCursor ?? undefined,\n      });\n\n      setIsHydrated(true);\n    };\n\n    prefetchData();\n  }, [searchType, queryClient]);\n\n  if (!isHydrated) {\n    return <Loading />; //show loading state until data is fetched\n  }\n\n  return (\n    <HydrationBoundary state={dehydrate(queryClient)}>\n      {children}\n    </HydrationBoundary>\n  );\n}\n","\"use client\";\n\nimport React from \"react\";\nimport { useSearchParams } from \"next/navigation\";\nimport TabBtn from \"./components/tabBtn\";\nimport GenerateInput from \"./components/generateInput\";\nimport dynamic from \"next/dynamic\";\nimport Search from \"./components/search\";\nimport Skeleton from \"react-loading-skeleton\";\nimport PostsProvider from \"./components/PostsProvider\";\n\nconst PhotoGallary = dynamic(() => import(\"./components/photoGallary\"), {\n  ssr: true,\n  loading: () => (\n    <div className=\"grid grid-cols-2 md:grid-cols-4 gap-2  w-full \">\n      {Array(12)\n        .fill(null)\n        .map((_, index) => (\n          <Skeleton\n            key={index}\n            height={200}\n            baseColor=\"#1a1a1a\"\n            highlightColor=\"#333\"\n          />\n        ))}\n    </div>\n  ),\n});\n\nexport default function HomePage() {\n  const searchParams = useSearchParams();\n  const searchType = searchParams?.get(\"s\") || \"\";\n\n  return (\n    <PostsProvider searchType={searchType}>\n      <div className=\"relative flex flex-col items-center background-color-primary-1 px-1 md:px-10 w-full\">\n        <div className=\"hidden md:flex flex-col justify-center items-center pt-5 w-full\">\n          <GenerateInput />\n        </div>\n\n        <div className=\"flex gap-x-2 items-center w-full h-10 mt-3 md:mt-0 mb-2 relative\">\n          <Search />\n          <TabBtn text=\"Explore\" />\n          <TabBtn text=\"Following\" />\n          <TabBtn text=\"Top\" />\n        </div>\n\n        <div className=\"overflow-y-auto w-full\">\n          <PhotoGallary />\n        </div>\n      </div>\n    </PostsProvider>\n  );\n}\n","module.exports = require(\"node:https\");","import { create } from \"zustand\";\n\nexport type GalleryTab = \"EXPLORE\" | \"FOLLOWING\" | \"TOP\" | \"SEARCH\";\n\ninterface GalleryState {\n  // Active tab in the gallery\n  activeTab: GalleryTab;\n\n  // Is a tab transition in progress?\n  isTabTransitioning: boolean;\n\n  // Previous active tab (for transition optimization)\n  previousTab: GalleryTab | null;\n\n  // Setters\n  setActiveTab: (tab: GalleryTab) => void;\n  setIsTabTransitioning: (isTransitioning: boolean) => void;\n\n  // Initialize from URL parameter\n  initFromUrl: (urlParam: string | null) => void;\n}\n\nexport const useGalleryStore = create<GalleryState>((set) => ({\n  // Default tab\n  activeTab: \"EXPLORE\",\n\n  // Default transition state\n  isTabTransitioning: false,\n\n  // No previous tab initially\n  previousTab: null,\n\n  // Set the active tab\n  setActiveTab: (tab: GalleryTab) =>\n    set((state) => {\n      // Only set transitioning if the tab is changing\n      const isChanging = state.activeTab !== tab;\n      return {\n        activeTab: tab,\n        isTabTransitioning: isChanging,\n        // Track previous tab when changing\n        previousTab: isChanging ? state.activeTab : state.previousTab,\n      };\n    }),\n\n  // Set the transitioning state\n  setIsTabTransitioning: (isTransitioning: boolean) =>\n    set({ isTabTransitioning: isTransitioning }),\n\n  // Initialize from URL parameter\n  initFromUrl: (urlParam) => {\n    if (!urlParam) return;\n\n    // Convert URL parameter to uppercase for gallery tab\n    const paramUppercase = urlParam.toUpperCase() as GalleryTab;\n\n    // Only set if it's a valid tab\n    const validTabs: GalleryTab[] = [\"EXPLORE\", \"FOLLOWING\", \"TOP\", \"SEARCH\"];\n    if (validTabs.includes(paramUppercase)) {\n      set((state) => ({\n        previousTab:\n          state.activeTab !== paramUppercase\n            ? state.activeTab\n            : state.previousTab,\n        activeTab: paramUppercase,\n        // Don't set transitioning on initial load\n        isTabTransitioning: false,\n      }));\n    }\n  },\n}));\n","/* eslint-disable react-compiler/react-compiler */\n\n'use client'\nimport * as React from 'react'\n\nimport { hydrate } from '@tanstack/query-core'\nimport { useQueryClient } from './QueryClientProvider'\nimport type {\n  DehydratedState,\n  HydrateOptions,\n  OmitKeyof,\n  QueryClient,\n} from '@tanstack/query-core'\n\nexport interface HydrationBoundaryProps {\n  state?: unknown\n  options?: OmitKeyof<HydrateOptions, 'defaultOptions'> & {\n    defaultOptions?: OmitKeyof<\n      Exclude<HydrateOptions['defaultOptions'], undefined>,\n      'mutations'\n    >\n  }\n  children?: React.ReactNode\n  queryClient?: QueryClient\n}\n\nconst hasProperty = <TKey extends string>(\n  obj: unknown,\n  key: TKey,\n): obj is { [k in TKey]: unknown } => {\n  return typeof obj === 'object' && obj !== null && key in obj\n}\n\nexport const HydrationBoundary = ({\n  children,\n  options = {},\n  state,\n  queryClient,\n}: HydrationBoundaryProps) => {\n  const client = useQueryClient(queryClient)\n  const [hydrationQueue, setHydrationQueue] = React.useState<\n    DehydratedState['queries'] | undefined\n  >()\n\n  const optionsRef = React.useRef(options)\n  optionsRef.current = options\n\n  // This useMemo is for performance reasons only, everything inside it _must_\n  // be safe to run in every render and code here should be read as \"in render\".\n  //\n  // This code needs to happen during the render phase, because after initial\n  // SSR, hydration needs to happen _before_ children render. Also, if hydrating\n  // during a transition, we want to hydrate as much as is safe in render so\n  // we can prerender as much as possible.\n  //\n  // For any queries that already exist in the cache, we want to hold back on\n  // hydrating until _after_ the render phase. The reason for this is that during\n  // transitions, we don't want the existing queries and observers to update to\n  // the new data on the current page, only _after_ the transition is committed.\n  // If the transition is aborted, we will have hydrated any _new_ queries, but\n  // we throw away the fresh data for any existing ones to avoid unexpectedly\n  // updating the UI.\n  React.useMemo(() => {\n    if (state) {\n      if (typeof state !== 'object') {\n        return\n      }\n\n      const queryCache = client.getQueryCache()\n      // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n      const queries = (state as DehydratedState).queries || []\n\n      const newQueries: DehydratedState['queries'] = []\n      const existingQueries: DehydratedState['queries'] = []\n      for (const dehydratedQuery of queries) {\n        const existingQuery = queryCache.get(dehydratedQuery.queryHash)\n\n        if (!existingQuery) {\n          newQueries.push(dehydratedQuery)\n        } else {\n          const hydrationIsNewer =\n            dehydratedQuery.state.dataUpdatedAt >\n              existingQuery.state.dataUpdatedAt || // RSC special serialized then-able chunks\n            (hasProperty(dehydratedQuery.promise, 'status') &&\n              hasProperty(existingQuery.promise, 'status') &&\n              dehydratedQuery.promise.status !== existingQuery.promise.status)\n\n          const queryAlreadyQueued = hydrationQueue?.find(\n            (query) => query.queryHash === dehydratedQuery.queryHash,\n          )\n\n          if (\n            hydrationIsNewer &&\n            (!queryAlreadyQueued ||\n              dehydratedQuery.state.dataUpdatedAt >\n                queryAlreadyQueued.state.dataUpdatedAt)\n          ) {\n            existingQueries.push(dehydratedQuery)\n          }\n        }\n      }\n\n      if (newQueries.length > 0) {\n        // It's actually fine to call this with queries/state that already exists\n        // in the cache, or is older. hydrate() is idempotent for queries.\n        hydrate(client, { queries: newQueries }, optionsRef.current)\n      }\n      if (existingQueries.length > 0) {\n        setHydrationQueue((prev) =>\n          prev ? [...prev, ...existingQueries] : existingQueries,\n        )\n      }\n    }\n  }, [client, hydrationQueue, state])\n\n  React.useEffect(() => {\n    if (hydrationQueue) {\n      hydrate(client, { queries: hydrationQueue }, optionsRef.current)\n      setHydrationQueue(undefined)\n    }\n  }, [client, hydrationQueue])\n\n  return children as React.ReactElement\n}\n","module.exports = require(\"node:os\");","const module0 = () => import(/* webpackMode: \"eager\" */ \"/Users/a0000/projects/unreal/src/app/layout.tsx\");\nconst module1 = () => import(/* webpackMode: \"eager\" */ \"/Users/a0000/projects/unreal/src/app/global-error.tsx\");\nconst module2 = () => import(/* webpackMode: \"eager\" */ \"/Users/a0000/projects/unreal/src/app/not-found.tsx\");\nconst module3 = () => import(/* webpackMode: \"eager\" */ \"next/dist/client/components/forbidden-error\");\nconst module4 = () => import(/* webpackMode: \"eager\" */ \"next/dist/client/components/unauthorized-error\");\nconst module5 = () => import(/* webpackMode: \"eager\" */ \"/Users/a0000/projects/unreal/src/app/home/layout.tsx\");\nconst module6 = () => import(/* webpackMode: \"eager\" */ \"/Users/a0000/projects/unreal/src/app/home/loading.tsx\");\nconst page7 = () => import(/* webpackMode: \"eager\" */ \"/Users/a0000/projects/unreal/src/app/home/page.tsx\");\nimport { AppPageRouteModule } from \"next/dist/server/route-modules/app-page/module.compiled\" with {\n    'turbopack-transition': 'next-ssr'\n};\nimport { RouteKind } from \"next/dist/server/route-kind\" with {\n    'turbopack-transition': 'next-server-utility'\n};\n// We inject the tree and pages here so that we can use them in the route\n// module.\nconst tree = {\n        children: [\n        '',\n        {\n        children: [\n        'home',\n        {\n        children: ['__PAGE__', {}, {\n          page: [page7, \"/Users/a0000/projects/unreal/src/app/home/page.tsx\"],\n          \n        }]\n      },\n        {\n        'layout': [module5, \"/Users/a0000/projects/unreal/src/app/home/layout.tsx\"],\n'loading': [module6, \"/Users/a0000/projects/unreal/src/app/home/loading.tsx\"],\n        metadata: {\n    icon: [(async (props) => (await import(/* webpackMode: \"eager\" */ \"next-metadata-image-loader?type=favicon&segment=&basePath=&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&pageExtensions=mdx!/Users/a0000/projects/unreal/src/app/favicon.ico?__next_metadata__\")).default(props))],\n    apple: [],\n    openGraph: [],\n    twitter: [],\n    manifest: \"/manifest.webmanifest\"\n  }\n      }\n      ]\n      },\n        {\n        'layout': [module0, \"/Users/a0000/projects/unreal/src/app/layout.tsx\"],\n'global-error': [module1, \"/Users/a0000/projects/unreal/src/app/global-error.tsx\"],\n'not-found': [module2, \"/Users/a0000/projects/unreal/src/app/not-found.tsx\"],\n'forbidden': [module3, \"next/dist/client/components/forbidden-error\"],\n'unauthorized': [module4, \"next/dist/client/components/unauthorized-error\"],\n        metadata: {\n    icon: [(async (props) => (await import(/* webpackMode: \"eager\" */ \"next-metadata-image-loader?type=favicon&segment=&basePath=&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&pageExtensions=mdx!/Users/a0000/projects/unreal/src/app/favicon.ico?__next_metadata__\")).default(props))],\n    apple: [],\n    openGraph: [],\n    twitter: [],\n    manifest: \"/manifest.webmanifest\"\n  }\n      }\n      ]\n      }.children;\nconst pages = [\"/Users/a0000/projects/unreal/src/app/home/page.tsx\"];\nexport { tree, pages };\nexport { default as GlobalError } from \"/Users/a0000/projects/unreal/src/app/global-error.tsx\" with {\n    'turbopack-transition': 'next-server-utility'\n};\nconst __next_app_require__ = __webpack_require__\nconst __next_app_load_chunk__ = () => Promise.resolve()\nexport const __next_app__ = {\n    require: __next_app_require__,\n    loadChunk: __next_app_load_chunk__\n};\nexport * from \"next/dist/server/app-render/entry-base\" with {\n    'turbopack-transition': 'next-server-utility'\n};\n// Create and export the route module that will be consumed.\nexport const routeModule = new AppPageRouteModule({\n    definition: {\n        kind: RouteKind.APP_PAGE,\n        page: \"/home/page\",\n        pathname: \"/home\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: '',\n        appPaths: []\n    },\n    userland: {\n        loaderTree: tree\n    }\n});\n\n//# sourceMappingURL=app-page.js.map","module.exports = require(\"node:diagnostics_channel\");","module.exports = require(\"crypto\");","module.exports = require(\"https\");","\"use client\";\nimport { ReactNode, useState } from \"react\";\nimport {\n  ChatIcon,\n  HeartFillIcon,\n  HeartIcon,\n  OptionMenuIcon,\n} from \"@/app/components/icons\";\nimport { Photo, RenderPhotoContext } from \"react-photo-album\";\nimport { formatNumber, truncateText } from \"@/utils\";\nimport { usePostLikes } from \"@/hooks/usePostLikes\";\nimport { supabase } from \"$/supabase/client\";\nimport { useLikePost } from \"@/hooks/useLikePost\";\nimport { useUser } from \"@/hooks/useUser\";\nimport { timeAgo } from \"@/app/libs/timeAgo\";\nimport { useComments, useRealtimeComments } from \"@/hooks/useComments\";\nimport ImageOptionMenu from \"./imageOptionMenu\";\nimport { useRouter } from \"next/navigation\";\nimport Link from \"next/link\";\n\nexport interface ExtendedRenderPhotoContext extends RenderPhotoContext {\n  photo: Photo & {\n    prompt: string;\n    id: string;\n    author: string;\n    createdAt: string;\n    caption?: string;\n  };\n}\n\ninterface PhotoOverlayProps {\n  hideContent?: true;\n  children: ReactNode;\n  setImageIndex: () => void;\n  context: ExtendedRenderPhotoContext;\n  photo?: ReactNode;\n  section?: string;\n}\n\nexport default function PhotoOverlay({\n  hideContent,\n  children,\n  setImageIndex,\n  context,\n  photo,\n  section,\n}: PhotoOverlayProps) {\n  const router = useRouter();\n  // console.log(context.photo.createdAt);\n  const [hover, setHover] = useState(false);\n  // const [like, setLike] = useState(false);\n  const { userId } = useUser();\n  const {\n    likes,\n    likesCount,\n    isLoading: loadingLikes,\n    hasUserLiked,\n  } = usePostLikes(Number(context.photo.id), supabase);\n  const { mutate: toggleLike } = useLikePost(\n    Number(context.photo.id),\n    userId,\n    context.photo.author,\n  );\n\n  const userHasLiked = likes?.some((like) => like.author === userId);\n\n  // console.log(context.photo.createdAt);\n  const handleCommentClick = () => {\n    setImageIndex(); // or any specific value you want to pass\n  };\n\n  const { data: comments, isLoading: loadingComments } = useComments(\n    context.photo.id,\n  );\n  useRealtimeComments(context.photo.id);\n\n  const handleView = () => {\n    router.push(\"/home/photo/\" + context.photo.id);\n  };\n\n  return (\n    <>\n      <div\n        onMouseEnter={() => setHover(true)}\n        onMouseLeave={() => setHover(false)}\n        className=\"absolute top-0 left-0 w-full h-full flex flex-col text-primary-1 text-sm md:hover:bg-gray-900/50\"\n      >\n        {hover && (\n          <div className=\"relative hidden md:flex flex-col text-primary-1 justify-between px-4 py-3 h-full\">\n            {/* <Link href={`/home/photo/${context.photo.id}`}> */}\n            <div\n              onClick={handleView}\n              className=\"absolute top-0 left-0 w-full h-full\"\n            >\n              {\" \"}\n              {photo}{\" \"}\n            </div>\n            {/* </Link> */}\n\n            <div\n              onClick={handleView}\n              className=\"absolute top-0 left-0 w-full h-full cursor-pointer\"\n            ></div>\n            {!hideContent ? (\n              <div className=\"flex justify-between text-primary-1 text-sm z-20\">\n                <p>{timeAgo(context.photo.createdAt)}</p>\n                <ImageOptionMenu\n                  image={context.photo}\n                  postId={context.photo.id}\n                >\n                  <OptionMenuIcon color=\"#FFFFFF\" />\n                </ImageOptionMenu>\n              </div>\n            ) : (\n              <div> </div>\n            )}\n\n            {/* {!loadingLikes && !loadingComments && ( */}\n            <div className=\"flex justify-center gap-4 z-10\">\n              <button\n                className=\"flex gap-1 items-center\"\n                onClick={() => toggleLike()}\n              >\n                {userHasLiked ? (\n                  <HeartFillIcon color=\"#FFFFFF\" />\n                ) : (\n                  <HeartIcon color=\"#FFFFFF\" />\n                )}\n                <p>{likes ? formatNumber(likes?.length) : \"\"}</p>\n              </button>\n\n              <button\n                className=\"flex gap-1 items-center\"\n                onClick={() => handleCommentClick()}\n              >\n                <ChatIcon color=\"#FFFFFF\" />{\" \"}\n                <p>{comments ? formatNumber(comments?.length) : \"\"}</p>\n              </button>\n            </div>\n            {/* )} */}\n\n            {!hideContent ? (\n              <Link href={`/home/photo/${context.photo.id}`}>\n                {\" \"}\n                {/*Link is added to enable prefetch */}\n                <p className=\"text-left text-primary-1 text-sm z-10\">\n                  {truncateText(context.photo.caption || context.photo.prompt)}\n                </p>\n              </Link>\n            ) : (\n              <p></p>\n            )}\n          </div>\n        )}\n\n        <div className=\"flex flex-col md:hidden h-full w-full justify-between items-end p-3\">\n          <div className=\"relative block mr-4\">\n            <div className=\"absolute\">\n              <div className=\"absolute z-20\">\n                <ImageOptionMenu\n                  image={context.photo}\n                  postId={context.photo.id}\n                >\n                  <OptionMenuIcon color=\"#FFFFFF\" />\n                </ImageOptionMenu>\n              </div>\n            </div>\n          </div>\n\n          <div\n            className={`flex flex-col ${section == \"photoGridTwo\" ? \" mb-12\" : \"mb-6\"}`}\n          >\n            <div className=\"relative flex flex-col items-center\">\n              <button\n                className=\"absolute flex flex-col items-center z-10\"\n                onClick={() => toggleLike()}\n              >\n                {userHasLiked ? (\n                  <HeartFillIcon color=\"#FFFFFF\" />\n                ) : (\n                  <HeartIcon color=\"#FFFFFF\" />\n                )}\n              </button>\n\n              <p className=\"mt-6 z-10\">\n                {likes ? formatNumber(likes?.length) : \"\"}\n              </p>\n            </div>\n\n            <div className=\"relative flex flex-col items-center\">\n              <button\n                className=\"absolute flex gap-1 items-center z-10\"\n                onClick={handleCommentClick}\n              >\n                <ChatIcon color=\"#FFFFFF\" />\n              </button>\n\n              <p className=\"mt-6 z-10\">\n                {comments ? formatNumber(comments?.length) : \"\"}\n              </p>\n            </div>\n          </div>\n        </div>\n\n        <div\n          onClick={handleView}\n          className=\"absolute hidden md:block w-full h-full\"\n        >\n          {!hover && children}{\" \"}\n        </div>\n\n        <div onClick={handleView} className=\"absolute  md:hidden w-full h-full\">\n          {children}{\" \"}\n        </div>\n      </div>\n    </>\n  );\n}\n","module.exports = require(\"tls\");","module.exports = require(\"node:stream\");","module.exports = require(\"node:util\");","\"use client\";\nimport { useRef, useReducer, useCallback } from \"react\";\nfunction useArray(array) {\n  const ref = useRef(array);\n  if (!array || !ref.current || array.length !== ref.current.length || ref.current.some((el, i) => el !== array[i])) {\n    ref.current = array;\n  }\n  return ref.current;\n}\nfunction containerWidthReducer(state, [newContainerWidth, newScrollbarWidth]) {\n  const [containerWidth, scrollbarWidth] = state;\n  if (containerWidth !== void 0 && scrollbarWidth !== void 0 && newContainerWidth !== void 0 && newScrollbarWidth !== void 0 && newContainerWidth > containerWidth && newContainerWidth - containerWidth <= 20 && newScrollbarWidth < scrollbarWidth) {\n    return [containerWidth, newScrollbarWidth];\n  }\n  return containerWidth !== newContainerWidth || scrollbarWidth !== newScrollbarWidth ? [newContainerWidth, newScrollbarWidth] : state;\n}\nfunction resolveContainerWidth(el, breakpoints) {\n  let width = el?.clientWidth;\n  if (width !== void 0 && breakpoints && breakpoints.length > 0) {\n    const sorted = [...breakpoints.filter((x) => x > 0)].sort((a, b) => b - a);\n    sorted.push(Math.floor(sorted[sorted.length - 1] / 2));\n    width = sorted.find((breakpoint, index) => breakpoint <= width || index === sorted.length - 1);\n  }\n  return width;\n}\nfunction useContainerWidth(ref, breakpointsArray, defaultContainerWidth) {\n  const [[containerWidth], dispatch] = useReducer(containerWidthReducer, [defaultContainerWidth]);\n  const breakpoints = useArray(breakpointsArray);\n  const observerRef = useRef();\n  const containerRef = useCallback(\n    (node) => {\n      observerRef.current?.disconnect();\n      observerRef.current = void 0;\n      const updateWidth = () => dispatch([resolveContainerWidth(node, breakpoints), window.innerWidth - document.documentElement.clientWidth]);\n      updateWidth();\n      if (node && typeof ResizeObserver !== \"undefined\") {\n        observerRef.current = new ResizeObserver(updateWidth);\n        observerRef.current.observe(node);\n      }\n      if (typeof ref === \"function\") {\n        ref(node);\n      } else if (ref) {\n        ref.current = node;\n      }\n    },\n    [ref, breakpoints]\n  );\n  return { containerRef, containerWidth };\n}\nexport {\n  useArray,\n  useContainerWidth\n};\n","function clsx(...classes) {\n  return [...classes].filter(Boolean).join(\" \");\n}\nfunction cssClass(suffix) {\n  return [\"react-photo-album\", suffix].filter(Boolean).join(\"--\");\n}\nfunction cssVar(suffix) {\n  return `--${cssClass(suffix)}`;\n}\nfunction ratio({ width, height }) {\n  return width / height;\n}\nconst breakpoints = Object.freeze([1200, 600, 300, 0]);\nfunction unwrap(value, arg) {\n  return typeof value === \"function\" ? value(arg) : value;\n}\nfunction unwrapParameter(value, containerWidth) {\n  return containerWidth !== void 0 ? unwrap(value, containerWidth) : void 0;\n}\nfunction selectResponsiveValue(values, containerWidth) {\n  const index = breakpoints.findIndex((breakpoint) => breakpoint <= containerWidth);\n  return unwrap(values[Math.max(index, 0)], containerWidth);\n}\nfunction resolveResponsiveParameter(parameter, containerWidth, values, minValue = 0) {\n  if (containerWidth === void 0) return void 0;\n  const value = unwrapParameter(parameter, containerWidth);\n  return Math.round(Math.max(value === void 0 ? selectResponsiveValue(values, containerWidth) : value, minValue));\n}\nfunction resolveCommonProps(containerWidth, {\n  spacing,\n  padding,\n  componentsProps,\n  render\n}) {\n  return {\n    spacing: resolveResponsiveParameter(spacing, containerWidth, [20, 15, 10, 5]),\n    padding: resolveResponsiveParameter(padding, containerWidth, [0, 0, 0, 0]),\n    componentsProps: unwrap(componentsProps, containerWidth) || {},\n    render: unwrap(render, containerWidth)\n  };\n}\nfunction round(value, decimals = 0) {\n  const factor = 10 ** decimals;\n  return Math.round((value + Number.EPSILON) * factor) / factor;\n}\nfunction srcSetAndSizes(photo, responsiveSizes, photoWidth, containerWidth, photosCount, spacing, padding) {\n  let srcSet;\n  let sizes;\n  const calcSizes = (base) => {\n    const gaps = spacing * (photosCount - 1) + 2 * padding * photosCount;\n    return `calc((${base.match(/^\\s*calc\\((.*)\\)\\s*$/)?.[1] ?? base} - ${gaps}px) / ${round((containerWidth - gaps) / photoWidth, 5)})`;\n  };\n  const images = photo.srcSet;\n  if (images && images.length > 0) {\n    srcSet = images.concat(\n      !images.some(({ width }) => width === photo.width) ? [{ src: photo.src, width: photo.width, height: photo.height }] : []\n    ).sort((first, second) => first.width - second.width).map((image) => `${image.src} ${image.width}w`).join(\", \");\n  }\n  if (responsiveSizes?.size) {\n    sizes = (responsiveSizes.sizes || []).map(({ viewport, size }) => `${viewport} ${calcSizes(size)}`).concat(calcSizes(responsiveSizes.size)).join(\", \");\n  } else {\n    sizes = `${Math.ceil(photoWidth / containerWidth * 100)}vw`;\n  }\n  return { srcSet, sizes };\n}\nexport {\n  clsx,\n  cssClass,\n  cssVar,\n  ratio,\n  resolveCommonProps,\n  resolveResponsiveParameter,\n  round,\n  srcSetAndSizes,\n  unwrap,\n  unwrapParameter\n};\n","import { jsx, jsxs } from \"react/jsx-runtime\";\nimport { forwardRef, createElement } from \"react\";\nimport { clsx, cssClass, cssVar, round, srcSetAndSizes, unwrap } from \"../utils/index.js\";\nfunction Component({\n  as,\n  render,\n  context,\n  classes = [],\n  variables = {},\n  style: styleProp,\n  className: classNameProp,\n  children,\n  ...rest\n}, ref) {\n  const className = clsx(\n    ...(Array.isArray(classes) ? classes : [classes]).filter((el) => typeof el === \"string\").map(cssClass),\n    classNameProp\n  );\n  const style = {\n    ...Object.fromEntries(\n      Object.entries(variables).map(([key, value]) => [\n        cssVar(key.replace(/([a-z])([A-Z])/g, \"$1-$2\").toLowerCase()),\n        typeof value === \"number\" ? round(value, 5) : value\n      ])\n    ),\n    ...styleProp\n  };\n  const props = { style, className, children, ...rest };\n  if (render) {\n    const rendered = render({ ref, ...props }, context);\n    if (rendered) return rendered;\n  }\n  const Element = as || \"div\";\n  return jsx(Element, { ref, ...props });\n}\nconst Component$1 = forwardRef(Component);\nfunction PhotoComponent({\n  photo,\n  index,\n  width,\n  height,\n  onClick,\n  render: { wrapper, link, button, image, extras } = {},\n  componentsProps: { link: linkProps, button: buttonProps, wrapper: wrapperProps, image: imageProps } = {}\n}, ref) {\n  const { href } = photo;\n  const context = { photo, index, width: round(width, 3), height: round(height, 3) };\n  let props;\n  if (href) {\n    props = { ...linkProps, as: \"a\", render: link, classes: [\"photo\", \"link\"], href, onClick };\n  } else if (onClick) {\n    props = { ...buttonProps, as: \"button\", type: \"button\", render: button, classes: [\"photo\", \"button\"], onClick };\n  } else {\n    props = { ...wrapperProps, render: wrapper, classes: \"photo\" };\n  }\n  return jsxs(\n    Component$1,\n    {\n      ref,\n      variables: { photoWidth: context.width, photoHeight: context.height },\n      ...{ context, ...props },\n      children: [\n        jsx(Component$1, { as: \"img\", classes: \"image\", render: image, context, ...imageProps }),\n        extras?.({}, context)\n      ]\n    }\n  );\n}\nconst PhotoComponent$1 = forwardRef(PhotoComponent);\nfunction StaticPhotoAlbum({\n  layout,\n  sizes,\n  model,\n  skeleton,\n  onClick: onClickCallback,\n  render: { container, track, photo: renderPhoto, ...restRender } = {},\n  componentsProps: {\n    container: containerProps,\n    track: trackProps,\n    link: linkProps,\n    button: buttonProps,\n    wrapper: wrapperProps,\n    image: imageProps\n  } = {}\n}, ref) {\n  const { spacing, padding, containerWidth, tracks, variables, horizontal } = model || {};\n  return jsxs(\n    Component$1,\n    {\n      role: \"group\",\n      \"aria-label\": \"Photo album\",\n      ...containerProps,\n      variables: { spacing, padding, containerWidth, ...variables },\n      classes: [\"\", layout],\n      render: container,\n      ref,\n      children: [\n        spacing !== void 0 && padding !== void 0 && containerWidth !== void 0 && tracks?.map(({ photos, variables: trackVariables }, trackIndex) => {\n          const trackSize = photos.length;\n          const photosCount = horizontal ? trackSize : tracks.length;\n          return createElement(\n            Component$1,\n            {\n              ...trackProps,\n              key: trackIndex,\n              render: track,\n              classes: \"track\",\n              variables: { trackSize, ...trackVariables }\n            },\n            photos.map((context) => {\n              const { photo, index, width } = context;\n              const { key, src, alt, title, label } = photo;\n              const onClick = onClickCallback ? (event) => {\n                onClickCallback({ event, photo, index });\n              } : void 0;\n              if (renderPhoto) {\n                const rendered = renderPhoto({ onClick }, context);\n                if (rendered) return rendered;\n              }\n              const ariaLabel = (props) => {\n                return label ? { \"aria-label\": label, ...props } : props;\n              };\n              return jsx(\n                PhotoComponent$1,\n                {\n                  onClick,\n                  render: restRender,\n                  componentsProps: {\n                    image: {\n                      loading: \"lazy\",\n                      decoding: \"async\",\n                      src,\n                      alt,\n                      title,\n                      ...srcSetAndSizes(photo, sizes, width, containerWidth, photosCount, spacing, padding),\n                      ...unwrap(imageProps, context)\n                    },\n                    link: ariaLabel(unwrap(linkProps, context)),\n                    button: ariaLabel(unwrap(buttonProps, context)),\n                    wrapper: unwrap(wrapperProps, context)\n                  },\n                  ...context\n                },\n                key ?? src\n              );\n            })\n          );\n        }),\n        containerWidth === void 0 && skeleton\n      ]\n    }\n  );\n}\nconst StaticPhotoAlbum$1 = forwardRef(StaticPhotoAlbum);\nexport {\n  StaticPhotoAlbum$1 as default\n};\n","import { resolveCommonProps, resolveResponsiveParameter } from \"../utils/index.js\";\nfunction resolveMasonryProps(containerWidth, { columns, ...rest }) {\n  return {\n    ...rest,\n    ...resolveCommonProps(containerWidth, rest),\n    columns: resolveResponsiveParameter(columns, containerWidth, [5, 4, 3, 2], 1)\n  };\n}\nexport {\n  resolveMasonryProps as default\n};\n","import { ratio } from \"../utils/index.js\";\nfunction computeMasonryLayout(photos, spacing, padding, containerWidth, columns) {\n  const columnWidth = (containerWidth - spacing * (columns - 1) - 2 * padding * columns) / columns;\n  if (columnWidth <= 0) {\n    return columns > 1 ? computeMasonryLayout(photos, spacing, padding, containerWidth, columns - 1) : void 0;\n  }\n  const columnsCurrentTopPositions = [];\n  for (let i = 0; i < columns; i += 1) {\n    columnsCurrentTopPositions[i] = 0;\n  }\n  const columnsModel = photos.reduce(\n    (model, photo, index) => {\n      const shortestColumn = columnsCurrentTopPositions.reduce(\n        (currentShortestColumn, item, i) => item < columnsCurrentTopPositions[currentShortestColumn] - 1 ? i : currentShortestColumn,\n        0\n      );\n      columnsCurrentTopPositions[shortestColumn] = columnsCurrentTopPositions[shortestColumn] + columnWidth / ratio(photo) + spacing + 2 * padding;\n      model[shortestColumn].push({ photo, index });\n      return model;\n    },\n    Array.from({ length: columns }, () => [])\n  );\n  return {\n    spacing,\n    padding,\n    containerWidth,\n    variables: { columns },\n    tracks: columnsModel.map((column) => ({\n      photos: column.map(({ photo, index }) => ({\n        photo,\n        index,\n        width: columnWidth,\n        height: columnWidth / ratio(photo)\n      }))\n    }))\n  };\n}\nexport {\n  computeMasonryLayout as default\n};\n","\"use client\";\nimport { jsx } from \"react/jsx-runtime\";\nimport { useMemo, forwardRef } from \"react\";\nimport { useContainerWidth } from \"./hooks.js\";\nimport StaticPhotoAlbum from \"../static/index.js\";\nimport resolveMasonryProps from \"./masonryProps.js\";\nimport computeMasonryLayout from \"../layouts/masonry.js\";\nfunction MasonryPhotoAlbum({ photos, breakpoints, defaultContainerWidth, ...rest }, ref) {\n  const { containerRef, containerWidth } = useContainerWidth(ref, breakpoints, defaultContainerWidth);\n  const { spacing, padding, columns, ...restProps } = resolveMasonryProps(containerWidth, { photos, ...rest });\n  const model = useMemo(\n    () => containerWidth !== void 0 && spacing !== void 0 && padding !== void 0 && columns !== void 0 ? computeMasonryLayout(photos, spacing, padding, containerWidth, columns) : void 0,\n    [photos, spacing, padding, containerWidth, columns]\n  );\n  return jsx(StaticPhotoAlbum, { layout: \"masonry\", ref: containerRef, model, ...restProps });\n}\nconst MasonryPhotoAlbum$1 = forwardRef(MasonryPhotoAlbum);\nexport {\n  MasonryPhotoAlbum$1 as default\n};\n","module.exports = require(\"next/dist/server/app-render/work-unit-async-storage.external.js\");",null,"// src/hydration.ts\nfunction defaultTransformerFn(data) {\n  return data;\n}\nfunction dehydrateMutation(mutation) {\n  return {\n    mutationKey: mutation.options.mutationKey,\n    state: mutation.state,\n    ...mutation.options.scope && { scope: mutation.options.scope },\n    ...mutation.meta && { meta: mutation.meta }\n  };\n}\nfunction dehydrateQuery(query, serializeData, shouldRedactErrors) {\n  return {\n    state: {\n      ...query.state,\n      ...query.state.data !== void 0 && {\n        data: serializeData(query.state.data)\n      }\n    },\n    queryKey: query.queryKey,\n    queryHash: query.queryHash,\n    ...query.state.status === \"pending\" && {\n      promise: query.promise?.then(serializeData).catch((error) => {\n        if (!shouldRedactErrors(error)) {\n          return Promise.reject(error);\n        }\n        if (process.env.NODE_ENV !== \"production\") {\n          console.error(\n            `A query that was dehydrated as pending ended up rejecting. [${query.queryHash}]: ${error}; The error will be redacted in production builds`\n          );\n        }\n        return Promise.reject(new Error(\"redacted\"));\n      })\n    },\n    ...query.meta && { meta: query.meta }\n  };\n}\nfunction defaultShouldDehydrateMutation(mutation) {\n  return mutation.state.isPaused;\n}\nfunction defaultShouldDehydrateQuery(query) {\n  return query.state.status === \"success\";\n}\nfunction defaultshouldRedactErrors(_) {\n  return true;\n}\nfunction dehydrate(client, options = {}) {\n  const filterMutation = options.shouldDehydrateMutation ?? client.getDefaultOptions().dehydrate?.shouldDehydrateMutation ?? defaultShouldDehydrateMutation;\n  const mutations = client.getMutationCache().getAll().flatMap(\n    (mutation) => filterMutation(mutation) ? [dehydrateMutation(mutation)] : []\n  );\n  const filterQuery = options.shouldDehydrateQuery ?? client.getDefaultOptions().dehydrate?.shouldDehydrateQuery ?? defaultShouldDehydrateQuery;\n  const shouldRedactErrors = options.shouldRedactErrors ?? client.getDefaultOptions().dehydrate?.shouldRedactErrors ?? defaultshouldRedactErrors;\n  const serializeData = options.serializeData ?? client.getDefaultOptions().dehydrate?.serializeData ?? defaultTransformerFn;\n  const queries = client.getQueryCache().getAll().flatMap(\n    (query) => filterQuery(query) ? [dehydrateQuery(query, serializeData, shouldRedactErrors)] : []\n  );\n  return { mutations, queries };\n}\nfunction hydrate(client, dehydratedState, options) {\n  if (typeof dehydratedState !== \"object\" || dehydratedState === null) {\n    return;\n  }\n  const mutationCache = client.getMutationCache();\n  const queryCache = client.getQueryCache();\n  const deserializeData = options?.defaultOptions?.deserializeData ?? client.getDefaultOptions().hydrate?.deserializeData ?? defaultTransformerFn;\n  const mutations = dehydratedState.mutations || [];\n  const queries = dehydratedState.queries || [];\n  mutations.forEach(({ state, ...mutationOptions }) => {\n    mutationCache.build(\n      client,\n      {\n        ...client.getDefaultOptions().hydrate?.mutations,\n        ...options?.defaultOptions?.mutations,\n        ...mutationOptions\n      },\n      state\n    );\n  });\n  queries.forEach(({ queryKey, state, queryHash, meta, promise }) => {\n    let query = queryCache.get(queryHash);\n    const data = state.data === void 0 ? state.data : deserializeData(state.data);\n    if (query) {\n      if (query.state.dataUpdatedAt < state.dataUpdatedAt) {\n        const { fetchStatus: _ignored, ...serializedState } = state;\n        query.setState({\n          ...serializedState,\n          data\n        });\n      }\n    } else {\n      query = queryCache.build(\n        client,\n        {\n          ...client.getDefaultOptions().hydrate?.queries,\n          ...options?.defaultOptions?.queries,\n          queryKey,\n          queryHash,\n          meta\n        },\n        // Reset fetch status to idle to avoid\n        // query being stuck in fetching state upon hydration\n        {\n          ...state,\n          data,\n          fetchStatus: \"idle\"\n        }\n      );\n    }\n    if (promise) {\n      const initialPromise = Promise.resolve(promise).then(deserializeData);\n      void query.fetch(void 0, { initialPromise });\n    }\n  });\n}\nexport {\n  defaultShouldDehydrateMutation,\n  defaultShouldDehydrateQuery,\n  defaultshouldRedactErrors,\n  dehydrate,\n  hydrate\n};\n//# sourceMappingURL=hydration.js.map","module.exports = require(\"node:fs\");","module.exports = require(\"worker_threads\");","module.exports = require(\"zlib\");","module.exports = require(\"perf_hooks\");","module.exports = require(\"node:worker_threads\");","module.exports = require(\"node:path\");","module.exports = require(\"node:net\");","module.exports = require(\"node:crypto\");","import(/* webpackMode: \"eager\" */ \"/Users/a0000/projects/unreal/src/app/home/page.tsx\");\n","module.exports = require(\"buffer\");","module.exports = require(\"url\");","module.exports = require(\"child_process\");","module.exports = require(\"node:readline\");","module.exports = require(\"http\");","import { Client } from \"$/supabase/client\";\nimport { logError } from \"@/utils/sentryUtils\";\n\nexport const getLikeStat = async (\n  userId: string | undefined,\n  client: Client\n): Promise<number> => {\n  if (!userId) return 0;\n\n  try {\n    const { count, error } = await client\n      .from(\"likes\")\n      .select(\"*\", { count: \"exact\" })\n      .eq(\"post_author\", userId);\n\n    if (error) {\n      logError(\"Error fetching like count\", error);\n      return 0;\n    }\n\n    return count || 0;\n  } catch (err) {\n    logError(\"Unexpected error\", err);\n    return 0;\n  }\n};\n\n// export const getLikeStat = async (\n//   userId: string | undefined,\n//   client: Client\n// ): Promise<number> => {\n//   if (!userId) return 0;\n//   try {\n//     // Fetch posts with likes where author matches the specified value\n//     const { data: posts, error } = await client\n//       .from(\"likes\")\n//       .select(\"posts(*),created_at\")\n//       .eq(\"post_author\", userId); // Filter posts by the post_author\n\n//     if (error) {\n//       logError(\"Error fetching posts with likes\", error);\n//       return 0;\n//     }\n\n//     return posts.length || 0;\n//   } catch (err) {\n//     logError(\"Unexpected error\", err);\n//     return 0;\n//   }\n// };\n","import { useQuery, useQueryClient } from \"@tanstack/react-query\";\nimport { supabase } from \"$/supabase/client\";\nimport { getLikeStat } from \"@/queries/user/getLikeStat\";\nimport { dedupedRequest } from \"@/utils/queryOptimizer\";\nimport { useCallback } from \"react\";\n\n/**\n * Optimized hook for fetching a user's like statistics\n * Includes deduplication, optimized caching, and methods for updating counts\n */\nexport const useLikeStat = (userId?: string) => {\n  const queryClient = useQueryClient();\n\n  const result = useQuery<number>({\n    queryKey: [\"likeStat\", userId], // Unique cache key\n    queryFn: async () => {\n      if (!userId) return 0;\n\n      // Use request deduplication to prevent duplicate API calls\n      return dedupedRequest(`likeStat-${userId}`, () =>\n        getLikeStat(userId, supabase)\n      );\n    },\n    enabled: !!userId, // Only fetch if userId exists\n    staleTime: 1000 * 60 * 10, // Cache data for 10 minutes for better performance\n    gcTime: 1000 * 60 * 30, // Keep in cache for 30 minutes\n  });\n\n  // Optimistic update helpers\n  const incrementLikeStat = useCallback(() => {\n    if (!userId) return;\n\n    queryClient.setQueryData(\n      [\"likeStat\", userId],\n      (oldCount: number | undefined) => {\n        return (oldCount || 0) + 1;\n      }\n    );\n  }, [userId, queryClient]);\n\n  const decrementLikeStat = useCallback(() => {\n    if (!userId) return;\n\n    queryClient.setQueryData(\n      [\"likeStat\", userId],\n      (oldCount: number | undefined) => {\n        return Math.max(0, (oldCount || 0) - 1);\n      }\n    );\n  }, [userId, queryClient]);\n\n  // Refetch helper (for when you need fresh data)\n  const refreshLikeStat = useCallback(() => {\n    if (!userId) return;\n\n    queryClient.invalidateQueries({\n      queryKey: [\"likeStat\", userId],\n      exact: true,\n    });\n  }, [userId, queryClient]);\n\n  return {\n    ...result,\n    // Enhanced API with optimistic update methods\n    incrementLikeStat,\n    decrementLikeStat,\n    refreshLikeStat,\n    // Convenience properties\n    likeCount: result.data || 0,\n  };\n};\n","module.exports = require(\"tty\");","module.exports = require(\"async_hooks\");","module.exports = require(\"node:inspector\");","module.exports = require(\"net\");","interface ProfileInfoProps {\n    value: string;\n    title: string;\n    leftBorder?: boolean;\n}\n\nexport default function ProfileInfo ({ value, title, leftBorder } : ProfileInfoProps) {\n\n    return (\n        <div className={`flex flex-col md:flex-row md:items-center gap-2 border-primary-6 px-5 ${leftBorder && \"border-l-[1px]\"}`}>\n            <p className=\"text-xl text-primary-5\">{value}</p>\n            <p className=\"text-primary-6\">{title}</p>\n        </div>\n    )\n}","module.exports = require(\"events\");"],"names":["serverComponentModule.default","getPosts","client","start","range","getRange","LIST_LIMIT","data","error","from","select","eq","order","ascending","logError","message","map","post","ipfsImages","Array","isArray","JSON","parse","getTopPosts","gt","getFollowingPosts","id","userError","userData","auth","getUser","Error","user","followings","followingsError","followeeIds","following","followee_id","length","in","getFollowStats","userId","logWarning","followeeCount","followerCount","count","followerError","head","followeeError","useFollowStats","queryClient","useQueryClient","result","useQuery","queryKey","queryFn","dedupedRequest","supabase","enabled","staleTime","gcTime","useCallback","otherUserId","setQueryData","old","decrementFolloweeCount","Math","max","refreshStats","invalidateQueries","exact","incrementFolloweeCount","InfiniteScroll","observerElement","useRef","isLoadingInitial","isLoadingMore","children","loadMore","hasNextPage","props","div","className","fill","_","index","Skeleton","height","baseColor","highlightColor","ref","memo","TabBtn","text","router","useRouter","isPending","startTransition","useTransition","useSearchParams","pathname","usePathname","activeTab","setActiveTab","useGalleryStore","paramValue","toLowerCase","isActive","handleClick","toUpperCase","push","button","onClick","getIcon","iconColor","GlobeIcon","color","width","UserIcon","FlashIcon","SearchIcon","SearchTabBtn","currentIndex","setCurrentIndex","section","p","style","Tabs","searchPostsPaginated","keyword","page","limit","trim","textSearch","type","config","end","prompt","author","caption","category","cpu","createdAt","device","rank","seed","useSearchPostsInfinite","debouncedKeyword","setDebouncedKeyword","useState","useEffect","timer","setTimeout","clearTimeout","normalizedKeyword","useMemo","useInfiniteQuery","pageParam","forEach","normalizeEntity","nextCursor","undefined","initialPageParam","getNextPageParam","lastPage","prefetchNextPage","isFetchingNextPage","nextPageParam","pages","prefetchInfiniteQuery","renderNextImage","alt","title","sizes","photo","shouldPrioritize","imageName","String","src","split","pop","position","aspectRatio","OptimizedImage","responsiveSizes","loading","priority","placeholder","trackPerformance","process","SearchPhotoGallary","searchTerm","imageIndex","setImageIndex","columns","setColumns","window","innerWidth","MD_BREAKPOINT","initFromUrl","isLoading","isError","fetchNextPage","handleImageIndex","context","MasonryPhotoAlbum","photos","formattedPhotos","spacing","render","extras","PhotoWithAuthor","image","ImageView","authorId","userName","useAuthorUsername","imageLoading","useAuthorImage","PhotoOverlay","Image","searchUsersPaginated","profile","full_name","username","display_name","avatar_url","posts","slice","UserSearch","useSearchUsersInfinite","flatMap","User","details","followStats","likeCount","useLikeStat","useUser","isFollowing","useDoesUserFollow","toggleFollowMutation","useToggleFollow","Link","href","disabled","handleFollowToggle","mutate","followerId","followeeId","ProfileInfo","value","toString","leftBorder","UserImage","timeAgo","OptionMenuIcon","getImage","hash","fileNames","truncateText","Search","open","setOpen","hover","setHover","setSearchTerm","debouncedSearch","useDebounce","onMouseEnter","onMouseLeave","getIconColor","CloseIcon","input","onChange","e","target","Loading","_jsx","PostsProvider","searchType","isHydrated","setIsHydrated","HydrationBoundary","state","dehydrate","PhotoGallary","dynamic","ssr","HomePage","searchParams","get","GenerateInput","create","isTabTransitioning","previousTab","tab","set","isChanging","setIsTabTransitioning","isTransitioning","urlParam","paramUppercase","includes","hideContent","likes","likesCount","loadingLikes","hasUserLiked","usePostLikes","Number","toggleLike","useLikePost","userHasLiked","some","like","handleCommentClick","comments","loadingComments","useComments","useRealtimeComments","handleView","ImageOptionMenu","postId","HeartFillIcon","HeartIcon","formatNumber","ChatIcon","containerWidthReducer","newContainerWidth","newScrollbarWidth","containerWidth","scrollbarWidth","MasonryPhotoAlbum$1","forwardRef","breakpoints","defaultContainerWidth","rest","containerRef","useContainerWidth","breakpointsArray","dispatch","useReducer","useArray","array","current","el","i","observerRef","disconnect","updateWidth","resolveContainerWidth","clientWidth","sorted","filter","x","sort","a","b","floor","find","breakpoint","node","document","documentElement","ResizeObserver","observe","padding","restProps","resolveMasonryProps","model","computeMasonryLayout","jsx","StaticPhotoAlbum","layout","getLikeStat","err","oldCount","decrementLikeStat","refreshLikeStat","incrementLikeStat"],"sourceRoot":""}