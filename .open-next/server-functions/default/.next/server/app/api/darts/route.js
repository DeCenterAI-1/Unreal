try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},r=(new e.Error).stack;r&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[r]="7572b48c-a36b-403d-ba53-456bdef6aa50",e._sentryDebugIdIdentifier="sentry-dbid-7572b48c-a36b-403d-ba53-456bdef6aa50")}catch(e){}(()=>{var e={};e.id=93716,e.ids=[93716],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},8086:e=>{"use strict";e.exports=require("module")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11151:(e,r,t)=>{"use strict";t.d(r,{qT:()=>i,eO:()=>s});var n=t(51988);let i=()=>{let e=n.u.createRandom();return{address:e.address,privateKey:e.privateKey,publicKey:e.publicKey}};function s(e,r){let t=e*r;return[t,t+r-1]}(0,t(75351).N)({clientId:"16d7dafb3864c65ca59908546b05004c"}),t(53767)},11997:e=>{"use strict";e.exports=require("punycode")},14830:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>M,routeModule:()=>_,serverHooks:()=>O,workAsyncStorage:()=>R,workUnitAsyncStorage:()=>S});var n={};t.r(n),t.d(n,{DELETE:()=>h,GET:()=>b,HEAD:()=>w,OPTIONS:()=>x,PATCH:()=>E,POST:()=>v,PUT:()=>m});var i=t(88378),s=t(18659),o=t(8258),a=t(30019),u=t(63033),c=t(19515),l=t(84159),d=t(78660);async function p(e){let r=process.env.SUPABASE_SERVICE_ROLE_KEY,t=(0,d.UU)("https://ayghfeluaxotpfyuezlw.supabase.co",r);try{let r=await e.json(),n=await (0,l.w)();if(!n||!n.creditBalance||!n.wallet?.privateKey)return;n.creditBalance<=0&&n.wallet.privateKey;let{error:i}=await t.rpc("send_to_queue",{queue_name:"dart_jobs",msg:r});if(i)throw Error(`Request failed with status: ${i}`);return c.NextResponse.json({status:!0})}catch(e){return console.error("Error forwarding request to /darts:",e),c.NextResponse.json({error:"Internal Server Error"},{status:500})}}let f={...u},g="workUnitAsyncStorage"in f?f.workUnitAsyncStorage:"requestAsyncStorage"in f?f.requestAsyncStorage:void 0;function y(e,r){return"phase-production-build"===process.env.NEXT_PHASE||"function"!=typeof e?e:new Proxy(e,{apply:(e,t,n)=>{let i;try{let e=g?.getStore();i=e?.headers}catch(e){}return a.wrapRouteHandlerWithSentry(e,{method:r,parameterizedRoute:"/api/darts",headers:i}).apply(t,n)}})}let b=y(void 0,"GET"),v=y(p,"POST"),m=y(void 0,"PUT"),E=y(void 0,"PATCH"),h=y(void 0,"DELETE"),w=y(void 0,"HEAD"),x=y(void 0,"OPTIONS"),_=new i.AppRouteRouteModule({definition:{kind:s.RouteKind.APP_ROUTE,page:"/api/darts/route",pathname:"/api/darts",filename:"route",bundlePath:"app/api/darts/route"},resolvedPagePath:"/Users/a0000/projects/unreal/src/app/api/darts/route.ts",nextConfigOutput:"standalone",userland:n}),{workAsyncStorage:R,workUnitAsyncStorage:S,serverHooks:O}=_;function M(){return(0,o.patchFetch)({workAsyncStorage:R,workUnitAsyncStorage:S})}},16236:(e,r,t)=>{"use strict";t.d(r,{U:()=>s});var n=t(77156),i=t(38152);async function s(){let e=await (0,i.UL)();return(0,n.createServerClient)("https://ayghfeluaxotpfyuezlw.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImF5Z2hmZWx1YXhvdHBmeXVlemx3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzM0MzMyNDAsImV4cCI6MjA0OTAwOTI0MH0.YvtVbvd41lXv0bvqUVMrYqexn3Eq7gXt3Dz87CzIm6c",{cookies:{getAll:()=>e.getAll(),setAll(r){try{r.forEach(({name:r,value:t,options:n})=>e.set(r,t,n))}catch{}}},auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}})}},19771:e=>{"use strict";e.exports=require("process")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28167:(e,r,t)=>{"use strict";let n;Object.defineProperty(r,"__esModule",{value:!0}),!function(e,r){for(var t in r)Object.defineProperty(e,t,{enumerable:!0,get:r[t]})}(r,{arrayBufferToString:function(){return a},decrypt:function(){return l},encrypt:function(){return c},getActionEncryptionKey:function(){return y},getClientReferenceManifestForRsc:function(){return g},getServerModuleMap:function(){return f},setReferenceManifestsSingleton:function(){return p},stringToUint8Array:function(){return u}});let i=t(27396),s=t(47189),o=t(29294);function a(e){let r=new Uint8Array(e),t=r.byteLength;if(t<65535)return String.fromCharCode.apply(null,r);let n="";for(let e=0;e<t;e++)n+=String.fromCharCode(r[e]);return n}function u(e){let r=e.length,t=new Uint8Array(r);for(let n=0;n<r;n++)t[n]=e.charCodeAt(n);return t}function c(e,r,t){return crypto.subtle.encrypt({name:"AES-GCM",iv:r},e,t)}function l(e,r,t){return crypto.subtle.decrypt({name:"AES-GCM",iv:r},e,t)}let d=Symbol.for("next.server.action-manifests");function p({page:e,clientReferenceManifest:r,serverActionsManifest:t,serverModuleMap:n}){var i;let o=null==(i=globalThis[d])?void 0:i.clientReferenceManifestsPerPage;globalThis[d]={clientReferenceManifestsPerPage:{...o,[(0,s.normalizeAppPath)(e)]:r},serverActionsManifest:t,serverModuleMap:n}}function f(){let e=globalThis[d];if(!e)throw Object.defineProperty(new i.InvariantError("Missing manifest for Server Actions."),"__NEXT_ERROR_CODE",{value:"E606",enumerable:!1,configurable:!0});return e.serverModuleMap}function g(){let e=globalThis[d];if(!e)throw Object.defineProperty(new i.InvariantError("Missing manifest for Server Actions."),"__NEXT_ERROR_CODE",{value:"E606",enumerable:!1,configurable:!0});let{clientReferenceManifestsPerPage:r}=e,t=o.workAsyncStorage.getStore();if(!t)return function(e){let r=Object.values(e),t={clientModules:{},edgeRscModuleMapping:{},rscModuleMapping:{}};for(let e of r)t.clientModules={...t.clientModules,...e.clientModules},t.edgeRscModuleMapping={...t.edgeRscModuleMapping,...e.edgeRscModuleMapping},t.rscModuleMapping={...t.rscModuleMapping,...e.rscModuleMapping};return t}(r);let n=r[t.route];if(!n)throw Object.defineProperty(new i.InvariantError(`Missing Client Reference Manifest for ${t.route}.`),"__NEXT_ERROR_CODE",{value:"E570",enumerable:!1,configurable:!0});return n}async function y(){if(n)return n;let e=globalThis[d];if(!e)throw Object.defineProperty(new i.InvariantError("Missing manifest for Server Actions."),"__NEXT_ERROR_CODE",{value:"E606",enumerable:!1,configurable:!0});let r=process.env.NEXT_SERVER_ACTIONS_ENCRYPTION_KEY||e.serverActionsManifest.encryptionKey;if(void 0===r)throw Object.defineProperty(new i.InvariantError("Missing encryption key for Server Actions"),"__NEXT_ERROR_CODE",{value:"E571",enumerable:!1,configurable:!0});return n=await crypto.subtle.importKey("raw",u(atob(r)),"AES-GCM",!0,["encrypt","decrypt"])}},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},31421:e=>{"use strict";e.exports=require("node:child_process")},33873:e=>{"use strict";e.exports=require("path")},36686:e=>{"use strict";e.exports=require("diagnostics_channel")},37067:e=>{"use strict";e.exports=require("node:http")},38522:e=>{"use strict";e.exports=require("node:zlib")},41692:e=>{"use strict";e.exports=require("node:tls")},44708:e=>{"use strict";e.exports=require("node:https")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},46855:(e,r,t)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,r){for(var t in r)Object.defineProperty(e,t,{enumerable:!0,get:r[t]})}(r,{decryptActionBoundArgs:function(){return y},encryptActionBoundArgs:function(){return g}}),t(86891);let n=t(880),i=t(58734),s=t(29972),o=t(28167),a=t(63033),u=t(66364),c=function(e){return e&&e.__esModule?e:{default:e}}(t(53605)),l=new TextEncoder,d=new TextDecoder;async function p(e,r){let t=await (0,o.getActionEncryptionKey)();if(void 0===t)throw Object.defineProperty(Error("Missing encryption key for Server Action. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E65",enumerable:!1,configurable:!0});let n=atob(r),i=n.slice(0,16),s=n.slice(16),a=d.decode(await (0,o.decrypt)(t,(0,o.stringToUint8Array)(i),(0,o.stringToUint8Array)(s)));if(!a.startsWith(e))throw Object.defineProperty(Error("Invalid Server Action payload: failed to decrypt."),"__NEXT_ERROR_CODE",{value:"E191",enumerable:!1,configurable:!0});return a.slice(e.length)}async function f(e,r){let t=await (0,o.getActionEncryptionKey)();if(void 0===t)throw Object.defineProperty(Error("Missing encryption key for Server Action. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E65",enumerable:!1,configurable:!0});let n=new Uint8Array(16);a.workUnitAsyncStorage.exit(()=>crypto.getRandomValues(n));let i=(0,o.arrayBufferToString)(n.buffer),s=await (0,o.encrypt)(t,n,l.encode(e+r));return btoa(i+(0,o.arrayBufferToString)(s))}let g=c.default.cache(async function e(r,...t){let{clientModules:i}=(0,o.getClientReferenceManifestForRsc)(),c=Error();Error.captureStackTrace(c,e);let l=!1,d=a.workUnitAsyncStorage.getStore(),p=(null==d?void 0:d.type)==="prerender"?(0,u.createHangingInputAbortSignal)(d):void 0,g=await (0,s.streamToString)((0,n.renderToReadableStream)(t,i,{signal:p,onError(e){(null==p||!p.aborted)&&!l&&(l=!0,c.message=e instanceof Error?e.message:String(e))}}),p);if(l)throw c;if(!d)return f(r,g);let y=(0,a.getPrerenderResumeDataCache)(d),b=(0,a.getRenderResumeDataCache)(d),v=r+g,m=(null==y?void 0:y.encryptedBoundArgs.get(v))??(null==b?void 0:b.encryptedBoundArgs.get(v));if(m)return m;let E="prerender"===d.type?d.cacheSignal:void 0;null==E||E.beginRead();let h=await f(r,g);return null==E||E.endRead(),null==y||y.encryptedBoundArgs.set(v,h),h});async function y(e,r){let t;let n=await r,s=a.workUnitAsyncStorage.getStore();if(s){let r="prerender"===s.type?s.cacheSignal:void 0,i=(0,a.getPrerenderResumeDataCache)(s),o=(0,a.getRenderResumeDataCache)(s);(t=(null==i?void 0:i.decryptedBoundArgs.get(n))??(null==o?void 0:o.decryptedBoundArgs.get(n)))||(null==r||r.beginRead(),t=await p(e,n),null==r||r.endRead(),null==i||i.decryptedBoundArgs.set(n,t))}else t=await p(e,n);let{edgeRscModuleMapping:u,rscModuleMapping:c}=(0,o.getClientReferenceManifestForRsc)();return await (0,i.createFromReadableStream)(new ReadableStream({start(e){e.enqueue(l.encode(t)),(null==s?void 0:s.type)==="prerender"?s.renderSignal.aborted?e.close():s.renderSignal.addEventListener("abort",()=>e.close(),{once:!0}):e.close()}}),{serverConsumerManifest:{moduleLoading:null,moduleMap:c,serverModuleMap:(0,o.getServerModuleMap)()}})}},48161:e=>{"use strict";e.exports=require("node:os")},53053:e=>{"use strict";e.exports=require("node:diagnostics_channel")},53767:(e,r,t)=>{"use strict";t.d(r,{FF:()=>d,Lk:()=>p,vV:()=>l});var n=t(30019);let i={},s=e=>{if(null==e)return"";if("string"==typeof e)return e.substring(0,5e3);try{let r=JSON.stringify(e);return r.length>5e3?r.substring(0,5e3)+"...[truncated]":r}catch(e){return"[Object cannot be serialized]"}},o=()=>{let e=Date.now(),r=Object.keys(i);r.length>100&&r.map(e=>i[e]&&"number"==typeof i[e].timestamp?{key:e,time:i[e].timestamp}:{key:e,time:0}).sort((e,r)=>e.time-r.time).slice(0,r.length-50).map(e=>e.key).forEach(e=>delete i[e]),r.forEach(r=>{i[r]&&"number"==typeof i[r].timestamp&&e-i[r].timestamp>5e4?delete i[r]:i[r]&&"number"==typeof i[r].timestamp||delete i[r]})},a=e=>{let r=Date.now();if(i[e]){let{timestamp:t,count:n}=i[e];if(r-t<5e3)return i[e].count++,!0;i[e].timestamp=r,i[e].count++}else i[e]={timestamp:r,count:1},Object.keys(i).length>100&&o();return!1},u=(e,r)=>{let t=e instanceof Error?e.message:String(e);if(a(`error:${t.substring(0,100)}`))return;let i=r?Object.fromEntries(Object.entries(r).map(([e,r])=>[e,s(r)])):void 0;e instanceof Error?n.captureException(e,{extra:i}):n.captureException(Error(String(e)),{extra:i})},c=(e,r="info",t)=>{if("info"===r)return;let i=e.substring(0,200);if(a(`${r}:${i}`))return;let o=t?Object.fromEntries(Object.entries(t).map(([e,r])=>[e,s(r)])):void 0;n.captureMessage(i,{level:r,extra:o})},l=(e,r)=>{let t=r instanceof Error?r.message:String(r);a(`error:${e}:${t.substring(0,50)}`)||(r?u(r,{message:e}):c(e,"error"))},d=(e,r)=>{a(`warning:${e}`)||c(e,"warning")},p=(e,r,t)=>()=>{}},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},57012:e=>{"use strict";e.exports=require("tls")},57075:e=>{"use strict";e.exports=require("node:stream")},57975:e=>{"use strict";e.exports=require("node:util")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},64927:(e,r)=>{"use strict";function t(e){for(let r=0;r<e.length;r++){let t=e[r];if("function"!=typeof t)throw Object.defineProperty(Error(`A "use server" file can only export async functions, found ${typeof t}.
Read more: https://nextjs.org/docs/messages/invalid-use-server-value`),"__NEXT_ERROR_CODE",{value:"E352",enumerable:!1,configurable:!0})}}Object.defineProperty(r,"D",{enumerable:!0,get:function(){return t}})},69764:()=>{},73024:e=>{"use strict";e.exports=require("node:fs")},73566:e=>{"use strict";e.exports=require("worker_threads")},74075:e=>{"use strict";e.exports=require("zlib")},74998:e=>{"use strict";e.exports=require("perf_hooks")},75919:e=>{"use strict";e.exports=require("node:worker_threads")},76760:e=>{"use strict";e.exports=require("node:path")},77030:e=>{"use strict";e.exports=require("node:net")},77598:e=>{"use strict";e.exports=require("node:crypto")},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},79646:e=>{"use strict";e.exports=require("child_process")},80481:e=>{"use strict";e.exports=require("node:readline")},81630:e=>{"use strict";e.exports=require("http")},81993:(e,r,t)=>{"use strict";Object.defineProperty(r,"A",{enumerable:!0,get:function(){return n.registerServerReference}});let n=t(880)},83997:e=>{"use strict";e.exports=require("tty")},84159:(e,r,t)=>{"use strict";t.d(r,{w:()=>u});var n=t(81993);t(46855);var i=t(16236),s=t(11151),o=t(53767),a=t(64927);let u=async e=>{let r=await (0,i.U)(),t=e??r,{data:n,error:a}=await t.auth.getUser();if(a)return(0,o.vV)("Error fetching auth user",a),null;let{data:u,error:c}=await r.from("profiles").select("*").eq("id",n?.user?.id);if(c)return(0,o.vV)("Error fetching user profile data",c),null;if(!u[0].wallet){let e=(0,s.qT)(),{error:t}=await r.from("profiles").update({wallet:e}).eq("id",u[0].id).single();if(t)return(0,o.vV)("Error updating user wallet",t),null}return{...n,wallet:u[0].wallet,bio:u[0].bio,location:u[0].location,creditBalance:u[0].credit_balance,full_name:u[0].full_name,username:u[0].display_name||u[0].full_name,avatar_url:u[0].avatar_url}};(0,a.D)([u]),(0,n.A)(u,"7fbe796e2ed096f78d3b020da10b4dbad05ca067aa",null)},84297:e=>{"use strict";e.exports=require("async_hooks")},84599:(e,r,t)=>{"use strict";t.r(r),t.d(r,{"7fbe796e2ed096f78d3b020da10b4dbad05ca067aa":()=>n.w});var n=t(84159)},86592:e=>{"use strict";e.exports=require("node:inspector")},87558:e=>{function r(e){var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}r.keys=()=>[],r.resolve=r,r.id=87558,e.exports=r},88324:()=>{},91093:e=>{function r(e){var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}r.keys=()=>[],r.resolve=r,r.id=91093,e.exports=r},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),n=r.X(0,[97015,30019,78660,56445,81511,95092,23996],()=>t(14830));module.exports=n})();
//# sourceMappingURL=route.js.map