try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},r=(new e.Error).stack;r&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[r]="9b4b32af-e096-4285-9ae2-93303e5362fe",e._sentryDebugIdIdentifier="sentry-dbid-9b4b32af-e096-4285-9ae2-93303e5362fe")}catch(e){}(()=>{var e={};e.id=90209,e.ids=[90209],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},8086:e=>{"use strict";e.exports=require("module")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{"use strict";e.exports=require("punycode")},16236:(e,r,t)=>{"use strict";t.d(r,{U:()=>n});var s=t(77156),i=t(38152);async function n(){let e=await (0,i.UL)();return(0,s.createServerClient)("https://ayghfeluaxotpfyuezlw.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImF5Z2hmZWx1YXhvdHBmeXVlemx3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzM0MzMyNDAsImV4cCI6MjA0OTAwOTI0MH0.YvtVbvd41lXv0bvqUVMrYqexn3Eq7gXt3Dz87CzIm6c",{cookies:{getAll:()=>e.getAll(),setAll(r){try{r.forEach(({name:r,value:t,options:s})=>e.set(r,t,s))}catch{}}},auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}})}},19771:e=>{"use strict";e.exports=require("process")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},31421:e=>{"use strict";e.exports=require("node:child_process")},33873:e=>{"use strict";e.exports=require("path")},36686:e=>{"use strict";e.exports=require("diagnostics_channel")},37067:e=>{"use strict";e.exports=require("node:http")},38522:e=>{"use strict";e.exports=require("node:zlib")},41692:e=>{"use strict";e.exports=require("node:tls")},44708:e=>{"use strict";e.exports=require("node:https")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},48161:e=>{"use strict";e.exports=require("node:os")},53053:e=>{"use strict";e.exports=require("node:diagnostics_channel")},53767:(e,r,t)=>{"use strict";t.d(r,{FF:()=>l,Lk:()=>d,vV:()=>p});var s=t(30019);let i={},n=e=>{if(null==e)return"";if("string"==typeof e)return e.substring(0,5e3);try{let r=JSON.stringify(e);return r.length>5e3?r.substring(0,5e3)+"...[truncated]":r}catch(e){return"[Object cannot be serialized]"}},o=()=>{let e=Date.now(),r=Object.keys(i);r.length>100&&r.map(e=>i[e]&&"number"==typeof i[e].timestamp?{key:e,time:i[e].timestamp}:{key:e,time:0}).sort((e,r)=>e.time-r.time).slice(0,r.length-50).map(e=>e.key).forEach(e=>delete i[e]),r.forEach(r=>{i[r]&&"number"==typeof i[r].timestamp&&e-i[r].timestamp>5e4?delete i[r]:i[r]&&"number"==typeof i[r].timestamp||delete i[r]})},u=e=>{let r=Date.now();if(i[e]){let{timestamp:t,count:s}=i[e];if(r-t<5e3)return i[e].count++,!0;i[e].timestamp=r,i[e].count++}else i[e]={timestamp:r,count:1},Object.keys(i).length>100&&o();return!1},a=(e,r)=>{let t=e instanceof Error?e.message:String(e);if(u(`error:${t.substring(0,100)}`))return;let i=r?Object.fromEntries(Object.entries(r).map(([e,r])=>[e,n(r)])):void 0;e instanceof Error?s.captureException(e,{extra:i}):s.captureException(Error(String(e)),{extra:i})},c=(e,r="info",t)=>{if("info"===r)return;let i=e.substring(0,200);if(u(`${r}:${i}`))return;let o=t?Object.fromEntries(Object.entries(t).map(([e,r])=>[e,n(r)])):void 0;s.captureMessage(i,{level:r,extra:o})},p=(e,r)=>{let t=r instanceof Error?r.message:String(r);u(`error:${e}:${t.substring(0,50)}`)||(r?a(r,{message:e}):c(e,"error"))},l=(e,r)=>{u(`warning:${e}`)||c(e,"warning")},d=(e,r,t)=>()=>{}},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},57012:e=>{"use strict";e.exports=require("tls")},57075:e=>{"use strict";e.exports=require("node:stream")},57975:e=>{"use strict";e.exports=require("node:util")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},69764:()=>{},73024:e=>{"use strict";e.exports=require("node:fs")},73566:e=>{"use strict";e.exports=require("worker_threads")},74075:e=>{"use strict";e.exports=require("zlib")},74998:e=>{"use strict";e.exports=require("perf_hooks")},75919:e=>{"use strict";e.exports=require("node:worker_threads")},76760:e=>{"use strict";e.exports=require("node:path")},77030:e=>{"use strict";e.exports=require("node:net")},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},79646:e=>{"use strict";e.exports=require("child_process")},80481:e=>{"use strict";e.exports=require("node:readline")},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},84297:e=>{"use strict";e.exports=require("async_hooks")},86592:e=>{"use strict";e.exports=require("node:inspector")},87558:e=>{function r(e){var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}r.keys=()=>[],r.resolve=r,r.id=87558,e.exports=r},88324:()=>{},91093:e=>{function r(e){var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}r.keys=()=>[],r.resolve=r,r.id=91093,e.exports=r},91645:e=>{"use strict";e.exports=require("net")},94349:(e,r,t)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"createDedupedByCallsiteServerErrorLoggerDev",{enumerable:!0,get:function(){return a}});let s=function(e,r){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=i(r);if(t&&t.has(e))return t.get(e);var s={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var u=n?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(s,o,u):s[o]=e[o]}return s.default=e,t&&t.set(e,s),s}(t(53605));function i(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(i=function(e){return e?t:r})(e)}let n={current:null},o="function"==typeof s.cache?s.cache:e=>e,u=console.warn;function a(e){return function(...r){u(e(...r))}}o(e=>{try{u(n.current)}finally{n.current=null}})},94735:e=>{"use strict";e.exports=require("events")},98211:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>j,routeModule:()=>O,serverHooks:()=>I,workAsyncStorage:()=>E,workUnitAsyncStorage:()=>_});var s={};t.r(s),t.d(s,{DELETE:()=>b,GET:()=>y,HEAD:()=>v,OPTIONS:()=>w,PATCH:()=>q,POST:()=>g,PUT:()=>h});var i=t(88378),n=t(18659),o=t(8258),u=t(30019),a=t(63033),c=t(16236),p=t(19515),l=t(53767);async function d(e){let r=await (0,c.U)();try{let{searchParams:t}=new URL(e.url),s=t.get("parentId");if(!s)return(0,l.FF)("Replies GET request missing parentId"),p.NextResponse.json({error:"Missing parentId"},{status:400});let i=await r.auth.getUser(),{data:n,error:o}=await r.rpc("get_replies_with_likes",{given_parent_id:s,current_user_id:i?.data?.user?.id});if(o)return(0,l.vV)("Error fetching comment replies",{error:o,parentId:s,userId:i?.data?.user?.id}),p.NextResponse.json({error:o.message},{status:500});return p.NextResponse.json(n)}catch(e){return(0,l.vV)("Unexpected error in replies GET",e),p.NextResponse.json({error:e.message},{status:500})}}let f={...a},x="workUnitAsyncStorage"in f?f.workUnitAsyncStorage:"requestAsyncStorage"in f?f.requestAsyncStorage:void 0;function m(e,r){return"phase-production-build"===process.env.NEXT_PHASE||"function"!=typeof e?e:new Proxy(e,{apply:(e,t,s)=>{let i;try{let e=x?.getStore();i=e?.headers}catch(e){}return u.wrapRouteHandlerWithSentry(e,{method:r,parameterizedRoute:"/api/comments/replies",headers:i}).apply(t,s)}})}let y=m(d,"GET"),g=m(void 0,"POST"),h=m(void 0,"PUT"),q=m(void 0,"PATCH"),b=m(void 0,"DELETE"),v=m(void 0,"HEAD"),w=m(void 0,"OPTIONS"),O=new i.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/comments/replies/route",pathname:"/api/comments/replies",filename:"route",bundlePath:"app/api/comments/replies/route"},resolvedPagePath:"/Users/a0000/projects/unreal/src/app/api/comments/replies/route.ts",nextConfigOutput:"standalone",userland:s}),{workAsyncStorage:E,workUnitAsyncStorage:_,serverHooks:I}=O;function j(){return(0,o.patchFetch)({workAsyncStorage:E,workUnitAsyncStorage:_})}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[97015,30019,78660,81511,95092],()=>t(98211));module.exports=s})();
//# sourceMappingURL=route.js.map