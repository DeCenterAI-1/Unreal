try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},l=(new e.Error).stack;l&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[l]="8e3b6996-f130-42af-bf22-4bc622cc31a0",e._sentryDebugIdIdentifier="sentry-dbid-8e3b6996-f130-42af-bf22-4bc622cc31a0")}catch(e){}"use strict";exports.id=82955,exports.ids=[82955],exports.modules={68037:(e,l,s)=>{s.d(l,{A:()=>Q});var t=s(42434),a=s(75728),r=s(99224),i=s(41246),o=s(6638),n=s(98678),d=s(42582),c=s(75830),u=s(40955),m=s(97828),x=s(89435),p=s(18466),f=s(43165),h=s(12197);function w({commentCount:e,postId:l}){let{data:s}=(0,u.G)(Number(l),o.N),{userId:a}=(0,m.J)(),{data:r}=(0,c.YK)(Number(l)),[w,j]=(0,x.useState)(!1),{mutate:y}=(0,d.$)(Number(l),a,r?.author),{shareCount:g}=(0,h.og)(Number(l)),N=s?.some(e=>e.author===a);return(0,t.jsxs)("div",{className:"flex justify-between w-full relative h-8",children:[(0,t.jsxs)("button",{onClick:()=>y(),className:"flex items-center gap-[2px] justify-center",children:[N?(0,t.jsx)(i.zw,{color:"#FFFFFF"}):(0,t.jsx)(i.C3,{color:"#FFFFFF"}),(0,t.jsx)("p",{className:"text-xs text-primary-3",children:(0,n.ZV)(s?.length)})]}),(0,t.jsxs)("button",{className:"flex items-center gap-[2px] justify-center",children:[(0,t.jsx)(i.b1,{color:"#F0F0F0"}),(0,t.jsx)("p",{className:"text-xs text-primary-3",children:(0,n.ZV)(e)})]}),(0,t.jsxs)("button",{onClick:()=>j(!0),className:"flex items-center gap-[2px] justify-center",children:[(0,t.jsx)(i.li,{color:"#F0F0F0"}),(0,t.jsx)("p",{className:"text-xs text-primary-3",children:g})]}),r&&a&&w&&(0,t.jsxs)("div",{className:"fixed z-50 top-0 left-0 h-screen w-full",children:[" ",(0,t.jsx)(f.A,{open:w,post:r,userId:a,setOpen:j,link:"https://unreal.art/home/photo/"+l})]}),(0,t.jsx)("button",{onClick:()=>(0,n.GV)((0,p.Qp)(r?.ipfsImages?.[0]?.hash,r?.ipfsImages?.[0]?.fileNames[0],r?.author),r?.ipfsImages?.[0]?.fileNames[0]),children:(0,t.jsx)(i.s3,{color:"#F0F0F0"})})]})}var j=s(6691),y=s(58312);function g({replyTo:e,postId:l,closeReply:s,authorId:a}){let r=(0,j.Z5)(),[o,n]=(0,x.useState)(null),{userId:d}=(0,m.J)(),c=async t=>{t.preventDefault(),o&&o.trim()&&d&&(r.mutate({post_id:l,content:o,parent_id:e?.id,author:a,senderId:d}),e&&s(),n(""))};return(0,t.jsxs)("div",{className:"p-1",children:[e&&(0,t.jsxs)("div",{className:"h-16 rounded-t-lg w-full bg-primary-12 py-2 px-3 border-2 border-primary-10",children:[(0,t.jsxs)("div",{className:"flex justify-between w-full",children:[(0,t.jsx)("p",{className:"font-bold text-primary-2 text-[10px]",children:"REPLY TO"}),(0,t.jsx)("button",{onClick:s,className:"w-3 h-3",children:(0,t.jsx)(i.US,{color:"#F5F5F5",width:"10px",height:"10px"})})]}),(0,t.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,t.jsx)("div",{children:(0,t.jsx)(y.A,{src:e.avatar_url||"/profile.jpg",width:32,height:32,alt:`${e.username||"User"}'s profile picture`,className:"rounded-full",trackPerformance:!0,imageName:`reply-to-avatar-${e.user_id}`})}),(0,t.jsxs)("div",{className:"flex gap-3 mt-1",children:[(0,t.jsx)("p",{className:"text-primary-4 text-xs font-medium",children:e.username}),(0,t.jsx)("p",{className:"text-xs text-primary-6 line-clamp-1",children:e.content})]})]})]}),(0,t.jsxs)("form",{onSubmit:c,className:`flex h-16 bg-primary-10 px-2 ${e?"rounded-b-lg":"m-1 mt-2 rounded-lg"}  pl-4`,children:[(0,t.jsx)("button",{className:"w-8",children:(0,t.jsx)(i.mY,{color:"#C1C1C1"})}),(0,t.jsx)("textarea",{onChange:e=>n(e.target.value),value:o||"",className:"flex-grow bg-primary-10 outline-none resize-none mt-[18px] text-primary-4"}),(0,t.jsx)("button",{disabled:!o,type:"submit",className:"text-primary-4 disable:text-primary-8 text-sm w-12",children:"Post"})]})]})}var N=s(92246);function v({data:e}){let{data:l}=(0,a.A)(e.user_id),s=(0,j.X7)(e.post_id.toString(),e.parent_id),r=(0,j.G)(e.post_id.toString(),e.parent_id);return(0,t.jsx)("div",{className:"pl-10 ",children:(0,t.jsx)("div",{className:" gap-2 py-2  border-primary-10",children:(0,t.jsxs)("div",{className:"flex w-full  gap-2",children:[(0,t.jsx)("div",{className:"h-12 w-12",children:(0,t.jsx)(y.A,{src:e.avatar_url||"/profile.jpg",width:48,height:48,alt:`${l||"User"}'s profile picture`,className:"rounded-full",trackPerformance:!0,imageName:`reply-avatar-${e.user_id}`})}),(0,t.jsxs)("div",{className:"w-full",children:[(0,t.jsxs)("div",{className:"flex flex-col basis-1/6",children:[(0,t.jsx)("p",{className:"text-primary-4 text-md font-medium whitespace-nowrap",children:l}),(0,t.jsx)("p",{className:"text-xs",children:(0,N.f)(e.created_at)})]}),(0,t.jsxs)("div",{className:"flex gap-2 w-full pt-2",children:[(0,t.jsx)("div",{className:"flex-grow space-y-4 gap-4",children:(0,t.jsx)("p",{className:"text-primary-6 text-sm flex-grow",children:e.content})}),(0,t.jsxs)("div",{className:"justify-end",children:[(0,t.jsx)("button",{className:"flex gap-1 items-center",onClick:()=>e.user_liked?r.mutate(e.id):s.mutate(e.id),children:e.user_liked?(0,t.jsx)(i.zw,{color:"#FFFFFF"}):(0,t.jsx)(i.C3,{color:"#FFFFFF"})}),(0,t.jsx)("p",{className:"text-center",children:e.like_count})]})]})]})]})})})}function b({data:e,setReplyTo:l}){let{data:s}=(0,a.A)(e.user_id),r=(0,j.us)(e.post_id.toString()),o=(0,j.hk)(e.post_id.toString()),[d,c]=(0,x.useState)(!1),{data:u}=(0,j.KK)(e.id);return(0,j.Zr)(e.id),(0,t.jsxs)("div",{className:" gap-2 py-2  border-primary-10",children:[(0,t.jsxs)("div",{className:"flex w-full  gap-2",children:[(0,t.jsx)("div",{className:"h-12 w-12",children:(0,t.jsx)(y.A,{src:e.avatar_url||"/profile.jpg",width:48,height:48,alt:`${s||"User"}'s profile picture`,className:"rounded-full",trackPerformance:!0,imageName:`comment-avatar-${e.user_id}`})}),(0,t.jsxs)("div",{className:"w-full",children:[(0,t.jsxs)("div",{className:"flex flex-col basis-1/6",children:[(0,t.jsx)("p",{className:"text-primary-4 text-md font-medium whitespace-nowrap",children:s}),(0,t.jsx)("p",{className:"text-xs",children:(0,N.f)(e.created_at)})]}),(0,t.jsxs)("div",{className:"flex gap-2 w-full py-2",children:[(0,t.jsxs)("div",{className:"flex-grow space-y-4 gap-4",children:[(0,t.jsx)("p",{className:"text-primary-6 text-sm flex-grow",children:e.content}),(0,t.jsxs)("button",{className:"text-primary-9  text-xs",onClick:()=>{e.username=s,l(e)},children:["reply (",u?(0,n.ZV)(u.length):"",")"]})]}),(0,t.jsxs)("div",{className:"justify-end",children:[(0,t.jsx)("button",{className:"flex gap-1 items-center",onClick:()=>e.user_liked?o.mutate(e.id):r.mutate(e.id),children:e.user_liked?(0,t.jsx)(i.zw,{color:"#FFFFFF"}):(0,t.jsx)(i.C3,{color:"#FFFFFF"})}),(0,t.jsx)("p",{className:"text-center",children:(0,n.ZV)(e.like_count)})]})]})]})]}),u?.slice(0,d?u.length:2).map((e,l)=>t.jsx(v,{data:e},l)),u&&u?.length>2&&(0,t.jsx)("p",{className:"text-right",children:(0,t.jsx)("button",{onClick:()=>c(!d),className:"text-xs hover:underline",children:d?"Show Less":"See More"})})]})}var F=s(56661),C=s(78877),_=s(89381);function k({authorId:e}){let{userId:l}=(0,m.J)(),{data:s,isLoading:a}=(0,C.j)(l,e),r=(0,_.T)();return(0,t.jsx)("div",{className:" rounded-t-3xl my-3",children:l!==e&&(0,t.jsx)("button",{disabled:r.isPending,onClick:()=>{r.mutate({followerId:l,followeeId:e})},className:`flex items-center justify-center gap-1 rounded-full h-8 w-24 px-2 py-1 border-[1px] border-primary-8 bg-[#DADADA] text-primary-11 ${s?"bg-transparent":"bg-primary-10"}`,children:!a&&(0,t.jsx)("p",{className:"text-primary-5 text-sm",children:s?"Unfollow":"Follow"})})})}function S({image:e,imageLoading:l,userName:s,isLoading:a,authorId:r,postId:o,imageDetails:n,handleClose:d}){let{data:c}=(0,j._9)(o);(0,j.nU)(o);let[u,m]=(0,x.useState)(null);return(0,t.jsxs)("div",{className:"md:flex md:flex-col",children:[(0,t.jsx)("div",{className:"md:p-[2px]",children:(0,t.jsxs)("div",{className:"flex justify-between h-18 py-2 px-2 md:px-5 gap-5 w-full text-sm lg:text-base",children:[(0,t.jsxs)("div",{className:"flex gap-1 items-center",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("button",{onClick:d,className:"p-4 md:hidden",children:(0,t.jsx)(i.Z3,{width:24,height:24,color:"#C1C1C1"})}),!l&&(0,t.jsx)(y.A,{className:"rounded-full border-[1px] border-primary-3 drop-shadow-lg",src:e||"",width:48,height:48,alt:`${s||"Unknown"}'s profile picture`,imageName:"comment-area-avatar",trackPerformance:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-semibold text-lg leading-6 text-primary-2",children:a?"Loading...":s||"Unknown"}),(0,t.jsx)("p",{className:"text-primary-7 nasalization",children:"Creator"})]}),(0,t.jsx)("div",{className:" h-full pl-2",children:(0,t.jsx)(k,{authorId:r})})]}),(0,t.jsx)("div",{className:"h-full py-2",children:(0,t.jsx)(F.A,{image:n,children:(0,t.jsx)(i.Ys,{color:"#C1C1C1"})})})]})}),(0,t.jsx)("div",{className:"px-6",children:(0,t.jsx)("hr",{})}),(0,t.jsx)("div",{className:`py-2 px-6 overflow-y-auto ${u?"h-[calc(100dvh_-_285px)] md:h-[346px]":"h-[calc(100dvh_-_235px)] md:h-[400px]"}`,children:c?.map((e,l)=>t.jsx(b,{data:e,setReplyTo:m},l))}),(0,t.jsx)("div",{className:"flex py-2 px-6 border-y-[1px] border-primary-6",children:(0,t.jsx)(w,{commentCount:c?.length||0,postId:o})}),(0,t.jsx)("div",{children:(0,t.jsx)(g,{postId:o,replyTo:u,closeReply:()=>{m(null)},authorId:r})})]})}function Q({photo:e,setImageIndex:l}){let s=e.author||"",{data:i,isLoading:o}=(0,a.A)(s),{data:n,isLoading:d}=(0,r.A)(s),[c,u]=(0,x.useState)(!1);(0,x.useRef)(null);let m=()=>{l(-1)};if(e)return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{onClick:m,className:"relative  top-0 left-0 h-screen w-full bg-gray-950/50 inset-0"}),(0,t.jsxs)("div",{className:"fixed z-50 flex justify-center items-center top-0 left-0 h-screen w-full ",children:[(0,t.jsx)("div",{onClick:m,className:"absolute flex justify-center items-center top-0 left-0 h-screen w-full "}),(0,t.jsx)("div",{className:"z-10 w-full md:w-11/12 xl:w-8/12 max-w-[968px] h-[100dvh]  md:h-[643px] rounded-md border-primary-8 border-[1px] p-3 bg-primary-12",children:(0,t.jsx)("div",{className:"bg-primary-13 h-full w-full rounded-md",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 h-full md:grid-cols-2",children:[(0,t.jsx)("div",{className:"h-full col-span-1 hidden md:block",children:(0,t.jsx)("div",{className:"relative w-full md:h-full",children:(0,t.jsx)(y.A,{src:e.src,alt:e.caption||"Image",width:450,height:450,quality:75,priority:!1,trackPerformance:!0,imageName:e.src?.split("/").pop()?.split("?")[0],className:"object-cover w-full h-full"})})}),(0,t.jsx)("div",{className:"h-full",children:(0,t.jsx)(S,{image:n,imageLoading:d,userName:i,isLoading:o,authorId:s,postId:e.id,imageDetails:e,handleClose:m})})]})})})]})]})}s(16709)},78877:(e,l,s)=>{s.d(l,{j:()=>c});var t=s(6638),a=s(16709);let r=async(e,l)=>{try{let{data:s,error:r}=await t.N.from("follows").select("*").eq("follower_id",e).eq("followee_id",l).single();if(r&&"PGRST116"!==r.code)return(0,a.vV)("Error checking follow relationship",r),!1;return!!s}catch(e){return(0,a.vV)("Error in doesUserFollow",e),!1}};var i=s(41049),o=s(81546),n=s(48506),d=s(89435);let c=(e,l)=>{let s=(0,i.useQueryClient)(),t=(0,o.useQuery)({queryKey:["doesUserFollow",e,l],queryFn:async()=>!!e&&!!l&&(0,n.zO)(`doesUserFollow-${e}-${l}`,()=>r(e,l)),enabled:!!e&&!!l,staleTime:6e5,gcTime:18e5}),a=(0,d.useCallback)(t=>{e&&l&&(s.setQueryData(["doesUserFollow",e,l],t),t?(s.setQueryData(["followStats",e],e=>e?{...e,followeeCount:e.followeeCount+1}:void 0),s.setQueryData(["followStats",l],e=>e?{...e,followerCount:e.followerCount+1}:void 0)):(s.setQueryData(["followStats",e],e=>e?{...e,followeeCount:Math.max(0,e.followeeCount-1)}:void 0),s.setQueryData(["followStats",l],e=>e?{...e,followerCount:Math.max(0,e.followerCount-1)}:void 0)))},[e,l,s]),c=(0,d.useCallback)(()=>{e&&l&&s.invalidateQueries({queryKey:["doesUserFollow",e,l],exact:!0})},[e,l,s]);return{...t,isFollowing:t.data||!1,setFollowing:a,refresh:c}}},89381:(e,l,s)=>{s.d(l,{T:()=>d});var t=s(41049),a=s(9600),r=s(6638),i=s(16709);let o=async(e,l)=>{if(!e||!l||e===l)return;let{data:s,error:t}=await r.N.from("follows").select("*").eq("follower_id",e).eq("followee_id",l).single();if(t&&"PGRST116"!==t.code){(0,i.vV)("Error fetching follow relationship",t);return}if(s){let{error:s}=await r.N.from("follows").delete().eq("follower_id",e).eq("followee_id",l);s?(0,i.vV)("Error deleting follow relationship",s):(0,i.Rm)("Unfollowed user",{followerId:e,followeeId:l})}else{let{error:s}=await r.N.from("follows").insert([{follower_id:e,followee_id:l}]);s?(0,i.vV)("Error adding follow relationship",s):(0,i.Rm)("Followed user",{followerId:e,followeeId:l})}};var n=s(89435);let d=()=>{let e=(0,t.useQueryClient)(),l=(0,a.useMutation)({mutationFn:async({followerId:e,followeeId:l,isFollowing:s})=>({result:await o(e,l),isFollowing:s}),onMutate:async({followerId:l,followeeId:s,isFollowing:t})=>{await Promise.all([e.cancelQueries({queryKey:["doesUserFollow",l,s]}),e.cancelQueries({queryKey:["followStats",l]}),e.cancelQueries({queryKey:["followStats",s]})]);let a=e.getQueryData(["doesUserFollow",l,s]),r=e.getQueryData(["followStats",l]),i=e.getQueryData(["followStats",s]);return e.setQueryData(["doesUserFollow",l,s],!t),r&&e.setQueryData(["followStats",l],{...r,followeeCount:t?Math.max(0,r.followeeCount-1):r.followeeCount+1}),i&&e.setQueryData(["followStats",s],{...i,followerCount:t?Math.max(0,i.followerCount-1):i.followerCount+1}),{previousFollowStatus:a,previousFollowerStats:r,previousFolloweeStats:i}},onError:(l,{followerId:s,followeeId:t},a)=>{(0,i.vV)("Error toggling follow status",l),a?.previousFollowStatus!==void 0&&e.setQueryData(["doesUserFollow",s,t],a.previousFollowStatus),a?.previousFollowerStats&&e.setQueryData(["followStats",s],a.previousFollowerStats),a?.previousFolloweeStats&&e.setQueryData(["followStats",t],a.previousFolloweeStats)},onSuccess:(l,{followerId:s,followeeId:t})=>{e.invalidateQueries({queryKey:["doesUserFollow",s,t]}),e.invalidateQueries({queryKey:["user",s]}),e.invalidateQueries({queryKey:["user",t]})}}),s=(0,n.useCallback)((e,s,t)=>l.mutate({followerId:e,followeeId:s,isFollowing:t}),[l]);return{...l,toggleFollowUser:s}}},89599:(e,l,s)=>{s.d(l,{default:()=>o});var t=s(42434),a=s(89435),r=s(78671),i=s(41246);function o(){let[e,l]=(0,a.useState)(!1);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("h1",{className:"text-center text-4xl text-primary-1 nasalization",children:"Create Anything Imaginable"}),(0,t.jsx)("div",{className:"w-4/5 max-w-4xl mt-7",children:(0,t.jsxs)("div",{className:"relative h-12 flex w-full rounded-l-full mb-10",children:[(0,t.jsx)("div",{className:"absolute left-4 top-2.5",children:(0,t.jsx)(i.Bm,{color:"#FFFFFF"})}),(0,t.jsx)("input",{onClick:()=>l(!0),className:"basis-5/6 outline-none indent-12 rounded-l-full bg-primary-12 border-[1px] border-primary-9",placeholder:"Generate stunning AI images in seconds"}),(0,t.jsx)("button",{onClick:()=>l(!0),className:"basis-1/6 text-primary-11 bg-primary-5 font-semibold rounded-r-full px-6",children:"Generate"})]})}),(0,t.jsx)(r.A,{open:e,setOpen:l})]})}}};
//# sourceMappingURL=82955.js.map