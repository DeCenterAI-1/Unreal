try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="a161e672-26ce-4772-bb99-58b84fed9df8",e._sentryDebugIdIdentifier="sentry-dbid-a161e672-26ce-4772-bb99-58b84fed9df8")}catch(e){}"use strict";exports.id=58734,exports.ids=[58734,74229],exports.modules={36353:(e,t,n)=>{n.d(t,{getZkGasFees:()=>T,f:()=>D,sendEip712Transaction:()=>j,a:()=>_});var r=n(65056),a=n(98644),i=n(56540),s=n(51198);function o(e){if(e<256)return 1;if(e<65536)return 2;if(e<0x1000000)return 3;if(e<0x100000000)return 4;throw new r.C("Length is too large.")}var u=n(64695),y=n(13878),c=n(81169),d=n(77814),g=n(74229),l=n(6362),p=n(18571),h=n(82632),f=n(78890),m=n(17620),b=n(1701),x=n(25792);let w=32n*(2n**16n-1n);class B extends r.C{constructor({givenLength:e,maxBytecodeSize:t}){super(`Bytecode cannot be longer than ${t} bytes. Given length: ${e}`,{name:"BytecodeLengthExceedsMaxSizeError"})}}class v extends r.C{constructor({givenLengthInWords:e}){super(`Bytecode length in 32-byte words must be odd. Given length in words: ${e}`,{name:"BytecodeLengthInWordsMustBeOddError"})}}class P extends r.C{constructor({givenLength:e}){super(`The bytecode length in bytes must be divisible by 32. Given length: ${e}`,{name:"BytecodeLengthMustBeDivisibleBy32Error"})}}let I=e=>{let t=function(e){let{gas:t,nonce:n,to:r,from:a,value:o,maxFeePerGas:u,maxPriorityFeePerGas:y,paymaster:c,paymasterInput:d,gasPerPubdata:g,data:p,factoryDeps:h}=e;return{txType:113n,from:BigInt(a),to:r?BigInt(r):0n,gasLimit:t??0n,gasPerPubdataByteLimit:g??50000n,maxFeePerGas:u??0n,maxPriorityFeePerGas:y??0n,paymaster:c?BigInt(c):0n,nonce:n?BigInt(n):0n,value:o??0n,data:p||"0x0",factoryDeps:h?.map(e=>l.nj(function(e){let t=(0,i.ZJ)(e);if(t.length%32!=0)throw new P({givenLength:t.length});if(t.length>w)throw new B({givenLength:t.length,maxBytecodeSize:w});let n=function(e,t){let n=(0,b.sc)((0,x.q)(e,{strict:!1})?(0,i.ZJ)(e):e);return"bytes"===((void 0)||"hex")?n:(0,s.nj)(n)}(t),r=(0,i.ZJ)(n),a=t.length/32;if(a%2==0)throw new v({givenLengthInWords:a});let o=(0,i.ZJ)(a),u=(0,m.eV)(o,{size:2}),y=new Uint8Array([1,0]);return r.set(y,0),r.set(u,2),r}(e)))??[],paymasterInput:d||"0x"}}(e);return{domain:{name:"zkSync",version:"2",chainId:e.chainId},types:{Transaction:[{name:"txType",type:"uint256"},{name:"from",type:"uint256"},{name:"to",type:"uint256"},{name:"gasLimit",type:"uint256"},{name:"gasPerPubdataByteLimit",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymaster",type:"uint256"},{name:"nonce",type:"uint256"},{name:"value",type:"uint256"},{name:"data",type:"bytes"},{name:"factoryDeps",type:"bytes32[]"},{name:"paymasterInput",type:"bytes"}]},primaryType:"Transaction",message:t}};async function j(e){let{account:t,transaction:n}=e,r=await D(e),a=await _({account:t,eip712Transaction:r,chainId:n.chain.id}),i=(0,y.getRpcClient)(n);return{transactionHash:await (0,u.B)(i,a),chain:n.chain,client:n.client}}async function _(e){let{account:t,eip712Transaction:n,chainId:r}=e,u=I(n),y=await t.signTypedData({...u});return function(e){let{chainId:t,gas:n,nonce:r,to:u,from:y,value:c,maxFeePerGas:d,maxPriorityFeePerGas:p,customSignature:h,factoryDeps:f,paymaster:m,paymasterInput:b,gasPerPubdata:x,data:w}=e,B=[r?(0,l.nj)(r):"0x",p?(0,l.nj)(p):"0x",d?(0,l.nj)(d):"0x",n?(0,l.nj)(n):"0x",u??"0x",c?(0,l.nj)(c):"0x",w??"0x0",(0,l.nj)(t),(0,l.nj)(""),(0,l.nj)(""),(0,l.nj)(t),y??"0x",x?(0,l.nj)(x):(0,l.nj)(50000n),f??[],h??"0x",m&&b?[m,b]:[]];return(0,g.concatHex)(["0x71",function(e,t="hex"){let n=function e(t){return Array.isArray(t)?function(e){let t=e.reduce((e,t)=>e+t.length,0),n=o(t);return{length:t<=55?1+t:1+n+t,encode(r){for(let{encode:a}of(t<=55?r.pushByte(192+t):(r.pushByte(247+n),1===n?r.pushUint8(t):2===n?r.pushUint16(t):3===n?r.pushUint24(t):r.pushUint32(t)),e))a(r)}}}(t.map(t=>e(t))):function(e){let t="string"==typeof e?(0,i.aT)(e):e,n=o(t.length);return{length:1===t.length&&t[0]<128?1:t.length<=55?1+t.length:1+n+t.length,encode(e){1===t.length&&t[0]<128||(t.length<=55?e.pushByte(128+t.length):(e.pushByte(183+n),1===n?e.pushUint8(t.length):2===n?e.pushUint16(t.length):3===n?e.pushUint24(t.length):e.pushUint32(t.length))),e.pushBytes(t)}}}(t)}(e),r=(0,a.l)(new Uint8Array(n.length));return(n.encode(r),"hex"===t)?(0,s.My)(r.bytes):r.bytes}(B)])}({...n,chainId:r,customSignature:y})}async function D(e){let{account:t,transaction:n}=e,{gas:r,maxFeePerGas:a,maxPriorityFeePerGas:i,gasPerPubdata:s}=await T({transaction:n,from:(0,c.bv)(t.address)});return{...await (0,f.$)({transaction:{...n,gas:r,maxFeePerGas:a,maxPriorityFeePerGas:i},from:t.address}),...n.eip712,gasPerPubdata:s,from:t.address}}async function T(e){let{transaction:t,from:n}=e,[r,a,i,s]=await Promise.all([(0,p.r)(t.gas),(0,p.r)(t.maxFeePerGas),(0,p.r)(t.maxPriorityFeePerGas),(0,p.r)(t.eip712)]),o=s?.gasPerPubdata;if(void 0===r||void 0===a||void 0===i){let e=(0,y.getRpcClient)(t),s=await L({transaction:t,from:n}),u=await e({method:"zks_estimateFee",params:[(0,d.Xf)(s,l.nj)]});r=2n*(0,d.Dg)(u.gas_limit),a=2n*(0,d.Dg)(u.max_fee_per_gas),i=(0,d.Dg)(u.max_priority_fee_per_gas)||1n,(o=2n*(0,d.Dg)(u.gas_per_pubdata_limit))<50000n&&(o=50000n)}return{gas:r,maxFeePerGas:a,maxPriorityFeePerGas:i,gasPerPubdata:o}}async function L(e){let{transaction:t,from:n}=e,[r,a,s,o]=await Promise.all([(0,h.encode)(t),(0,p.r)(t.to),(0,p.r)(t.value),(0,p.r)(t.eip712)]),u=o?.gasPerPubdata;return{from:n,to:a,data:r,value:s,gasPerPubdata:u,eip712Meta:{...o,gasPerPubdata:u||50000n,factoryDeps:o?.factoryDeps?.map(e=>Array.from(i.aT(e)))},type:"0x71"}}},64695:(e,t,n)=>{n.d(t,{B:()=>r});async function r(e,t){return await e({method:"eth_sendRawTransaction",params:[t]})}},74229:(e,t,n)=>{n.r(t),n.d(t,{concatHex:()=>a});var r=n(57934);function a(e){return r.xW(...e)}},77814:(e,t,n)=>{n.d(t,{Dg:()=>a,Xf:()=>i});var r=n(6362);function a(e){if(["string","number"].includes(typeof e)&&!Number.isInteger(Number(e)))throw Error(`Expected value to be an integer to convert to a bigint, got ${e} of type ${typeof e}`);return e instanceof Uint8Array?BigInt((0,r.EY)(e)):BigInt(e)}let i=(e,t)=>"bigint"==typeof e?t(e):Array.isArray(e)?e.map(e=>i(e,t)):e&&"object"==typeof e?Object.fromEntries(Object.entries(e).map(([e,n])=>[e,i(n,t)])):e}};
//# sourceMappingURL=58734.js.map