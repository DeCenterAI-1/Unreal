try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="0feff27b-c268-4578-800f-5ea6eafc82ee",e._sentryDebugIdIdentifier="sentry-dbid-0feff27b-c268-4578-800f-5ea6eafc82ee")}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[81433],{36503:(e,t,r)=>{"use strict";r.d(t,{default:()=>x});var n=r(71844),s=r(76648),i=r(73079),a=r(46626),o=r(69626),l=r(35426),d=r.n(l),u=r(14669),c=r(72528),m=r(84532),h=r(17792),f=r(83672);r(68336);var b=r(22290);let p={Public:{title:"Public",content:"You have not published anything yet.",subContent:"Tap your inner artist and create something amazing!"},Private:{title:"Private",content:"You don't have any private posts.",subContent:"You can go ahead and create one."},Liked:{title:"Liked",content:"You haven't liked anything yet.",subContent:"Find something you love and tap that \uD83E\uDD0D!"},Pinned:{title:"Pinned",content:"You haven't pinned anything yet.",subContent:"Find something you love and pin it!"},Draft:{title:"Draft",content:"You haven't saved anything yet.",subContent:"Create something you love to post later"}},v=(e,t)=>async r=>{let{pageParam:n=0}=r,s="number"==typeof n?n:0,i=[];switch(t.toUpperCase()){case"PRIVATE":i=await (0,h.rE)(m.N,s,e||"");break;case"LIKED":i=await (0,h.i4)(m.N,s,e||"");break;case"PINNED":i=await (0,h.Oj)(m.N,s,e||"");break;case"DRAFT":i=await (0,h.bC)(m.N,s,e||"");break;default:i=await (0,h.qY)(m.N,s,e||"")}return{data:i,nextCursor:i.length>0?s+1:void 0}};function x(){let e=(0,o.useSearchParams)().get("s"),{userId:t}=(0,f.J)(),{creationTab:r,initFromUrl:l,setCreationTab:m}=(0,b.g)(),[h,x]=(0,s.useTransition)(),[g,y]=(0,s.useState)(0);(0,s.useEffect)(()=>{if(e){console.log("CreationView - Initializing from URL:",e),x(()=>{l("creation",e)});let t=d()(u.ew,e.toUpperCase());t>=0&&x(()=>{y(t)})}},[]);let w=(0,s.useCallback)(e=>{x(()=>{var t;y(e);let r=null===(t=u.ew[e])||void 0===t?void 0:t.toLowerCase();r&&m(r.charAt(0).toUpperCase()+r.slice(1).toLowerCase())})},[m]);(0,s.useEffect)(()=>{if(r){let e=d()(u.ew,r.toUpperCase());e>=0&&e!==g&&x(()=>{y(e)})}},[r,g]);let N=(0,s.useCallback)(n=>v(t,e||r||"")(n),[t,e,r]),{data:j,isLoading:C,hasNextPage:P,fetchNextPage:k,isFetchingNextPage:E,isError:A,error:I}=(0,c.useInfiniteQuery)({queryKey:["creation_posts",e||r||"public",t],queryFn:N,getNextPageParam:e=>e.nextCursor,initialPageParam:0,enabled:!!t,retry:2,retryDelay:e=>Math.min(1e3*2**e,3e4),staleTime:6e4,gcTime:6e5,refetchOnMount:"always",refetchOnWindowFocus:!1}),F=h||C,S=(0,s.useMemo)(()=>{let t=e||r||"Public";return p[t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()]||p.Public},[e,r]),_=(0,s.useCallback)(()=>A&&!h?(0,n.jsx)("div",{className:"w-full flex justify-center items-center min-h-[200px] text-red-500",children:I instanceof Error?I.message:"An error occurred while loading posts"}):(0,n.jsx)(a.A,{...S,data:j,isLoading:F,hasNextPage:P,fetchNextPage:k,isFetchingNextPage:E}),[F,h,A,I,j,S,P,k,E]);return A&&!h?(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsx)("div",{className:"w-full mb-4",children:(0,n.jsx)(i.A,{currentIndex:g,setCurrentIndex:w,hideDraft:!1,section:"creation"})}),(0,n.jsx)("div",{className:"w-full flex justify-center items-center min-h-[200px] text-red-500",children:I instanceof Error?I.message:"An error occurred while loading posts"})]}):(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsx)("div",{className:"w-full mb-4",children:(0,n.jsx)(i.A,{currentIndex:g,setCurrentIndex:w,hideDraft:!1,section:"creation"})}),(0,n.jsx)("div",{className:"w-full",children:_()})]})}},37039:(e,t,r)=>{"use strict";r.d(t,{v7:()=>c,zW:()=>m});var n=r(71844),s=r(76648),i=r(79621),a=r(23609);let o=()=>({isActive:!1}),l={isActive:!1},d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l;return(0,a.y)()(t=>({...e,startGeneration:()=>t(()=>({isActive:!0})),stopGeneration:()=>t(()=>({isActive:!1}))}))},u=(0,s.createContext)(void 0),c=e=>{let{children:t}=e,r=(0,s.useRef)(null);return r.current||(r.current=d(o())),(0,n.jsx)(u.Provider,{value:r.current,children:t})},m=e=>{let t=(0,s.useContext)(u);if(!t)throw Error("useGenerationStore must be used within GenerationStoreProvider");return(0,i.P)(t,e)}},47019:(e,t,r)=>{"use strict";r.d(t,{default:()=>o});var n=r(71844),s=r(76648),i=r(93344),a=r(46032);function o(){let[e,t]=(0,s.useState)(!1);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h1",{className:"text-center text-4xl text-primary-1 nasalization",children:"Create Anything Imaginable"}),(0,n.jsx)("div",{className:"w-4/5 max-w-4xl mt-7",children:(0,n.jsxs)("div",{className:"relative h-12 flex w-full rounded-l-full mb-10",children:[(0,n.jsx)("div",{className:"absolute left-4 top-2.5",children:(0,n.jsx)(a.Bm,{color:"#FFFFFF"})}),(0,n.jsx)("input",{onClick:()=>t(!0),className:"basis-5/6 outline-none indent-12 rounded-l-full bg-primary-12 border-[1px] border-primary-9",placeholder:"Generate stunning AI images in seconds"}),(0,n.jsx)("button",{onClick:()=>t(!0),className:"basis-1/6 text-primary-11 bg-primary-5 font-semibold rounded-r-full px-6",children:"Generate"})]})}),(0,n.jsx)(i.A,{open:e,setOpen:t})]})}},91851:(e,t,r)=>{Promise.resolve().then(r.bind(r,64707)),Promise.resolve().then(r.bind(r,46874)),Promise.resolve().then(r.bind(r,83137)),Promise.resolve().then(r.bind(r,95460)),Promise.resolve().then(r.bind(r,72528)),Promise.resolve().then(r.bind(r,58948)),Promise.resolve().then(r.bind(r,54265)),Promise.resolve().then(r.bind(r,60272)),Promise.resolve().then(r.bind(r,44971)),Promise.resolve().then(r.bind(r,80364)),Promise.resolve().then(r.bind(r,42268)),Promise.resolve().then(r.bind(r,76136)),Promise.resolve().then(r.bind(r,49632)),Promise.resolve().then(r.bind(r,47019)),Promise.resolve().then(r.bind(r,36503))},93344:(e,t,r)=>{"use strict";r.d(t,{A:()=>N});var n=r(71844),s=r(84532),i=r(37039),a=r(84808),o=r(34489),l=r(86976),d=r(25303);let u=e=>{var t;let{prompt:r,user:n,stopGeneration:s}=e;if(!n){(0,d.vV)("User is undefined, cannot send job request",Error("No user"));return}if(!(null===(t=n.wallet)||void 0===t?void 0:t.privateKey)){(0,d.vV)("Missing private key, cannot proceed",Error("No private key"));return}let i=n.id,u={module:"isdxl",version:"v1.6.0",inputs:{Prompt:r,cpu:34,ram:"70gb",Device:"xpu",Seed:o.Ay.int(1e3,1e8),N:1,Format:"webp"},author:i,category:"GENERATION"},c={"Content-Type":"application/json"};n.creditBalance<=0&&(c.Authorization="Bearer ".concat(n.wallet.privateKey)),a.P.post("/api/darts",u,{headers:c}).catch(e=>{var t;s(),l.oR.error("Error sending job request:",(null===(t=e.response)||void 0===t?void 0:t.data)||e.message),(0,d.vV)("Error sending job request",e)})};var c=r(69626),m=r(76648),h=r(83137),f=r(54265),b=r(83672),p=r(62198),v=r(65025),x=r(40178),g=r(23948),y=r(6135);let w=(0,x.yt)(g.h,"0x37719927bbf857b4e2c0195aee74e7b3f1161a77");function N(e){var t,r,a;let{open:o,setOpen:x}=e,{user:g}=(0,b.J)(),{mutate:N,isGenerating:j,progress:C,cancelJob:P}=function(e){let t=(0,c.useRouter)(),r=(0,h.useQueryClient)(),{startGeneration:n,stopGeneration:a}=(0,i.zW)(e=>e),[o,l]=(0,m.useState)(!1),[b,p]=(0,m.useState)(0),v=(0,f.useMutation)({mutationFn:async t=>{let{prompt:r}=t;if(!r)throw Error("Prompt is required");if(!e)throw Error("User must be logged in");l(!0),p(0),n();try{return await u({prompt:r,user:e,stopGeneration:a}),p(100),{success:!0}}catch(e){throw l(!1),a(),e}},onError:e=>{(0,d.vV)("Error creating job",e),l(!1),a(),r.invalidateQueries({queryKey:["posts"]})},retry:(e,t)=>!(t.message.includes("Prompt is required")||t.message.includes("User must be logged in"))&&e<2}),x=(0,m.useCallback)(()=>{l(!1),p(0),a()},[a]);return(0,m.useEffect)(()=>{if(!e)return;let n=s.N.channel("user_posts_channel").on("postgres_changes",{event:"INSERT",schema:"public",table:"posts"},n=>{n.new.author===e.id&&(l(!1),p(100),a(),r.invalidateQueries({queryKey:["posts"]}),t.push("/home/photo/".concat(n.new.id,"?a=").concat(n.new.author)))}).subscribe();return()=>{s.N.removeChannel(n)}},[e,t,a,r]),{...v,cancelJob:x,isGenerating:o,progress:b,generationState:{isGenerating:o,progress:b}}}(g),[k,E]=(0,m.useState)(null),[A,I]=(0,m.useState)(!1),[F,S]=(0,m.useState)(!1),{data:_,refetch:D}=(0,v.Q)({contract:w,method:"function balanceOf(address account) returns (uint256)",params:[(null==g?void 0:null===(t=g.wallet)||void 0===t?void 0:t.address)||""]}),T=async()=>{var e;if(!(null==k?void 0:k.trim())){l.oR.error("Please provide a prompt.");return}if((null!==(e=null==g?void 0:g.creditBalance)&&void 0!==e?e:0)+Number((0,y.ck)(null!=_?_:BigInt(0)))<1){l.oR.error("Credit balance too low.");return}S(!0),N({prompt:k},{onSuccess:()=>{S(!1),z()},onError:e=>{S(!1),l.oR.error("Error generating image: ".concat(e.message))}})},z=()=>{x(!1)};if(o)return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{onClick:z,className:"fixed z-30 top-0 left-0 h-screen w-full"}),(0,n.jsxs)("div",{className:"absolute flex justify-center z-30 top-0 left-0 h-screen w-full",children:[(0,n.jsx)("div",{onClick:z,className:"absolute z-30 top-0 left-0 h-screen w-full"}),(0,n.jsx)("div",{className:"absolute z-50 md:mt-20 w-full md:w-8/12 max-w-[924px] h-5/6 md:h-[432px] rounded-md border-primary-8 border-[1px] p-3 bg-primary-12",children:(0,n.jsxs)("div",{className:"flex flex-col bg-primary-13 h-full w-full rounded-md",children:[(0,n.jsx)("div",{className:"flex-grow",children:(0,n.jsx)("textarea",{onChange:e=>E(e.target.value),className:"bg-inherit w-full h-full resize-none outline-none p-4 text-primary-8 placeholder:text-primary-8"})}),(0,n.jsxs)("div",{className:"h-14 p-2 w-full flex justify-end border-t-[1px] border-primary-11 gap-2",children:[(0,n.jsx)("button",{onClick:z,className:"basis-1/12 text-primary-5 border-primary-11 border-[1px] font-semibold rounded-full px-6",children:"Close"}),(0,n.jsx)(p.A,{open:A,setOpen:I,refetch:D}),(null!==(r=null==g?void 0:g.creditBalance)&&void 0!==r?r:0)+(_?Number((0,y.ck)(_))/3:0)<1&&(0,n.jsx)("button",{onClick:()=>I(!0),className:"basis-1/6 text-primary-11 bg-primary-5 font-semibold rounded-full px-6",children:"Top Up"}),(null!==(a=null==g?void 0:g.creditBalance)&&void 0!==a?a:0)+(_?Number((0,y.ck)(_))/3:0)>=1&&(0,n.jsx)("button",{onClick:T,className:"basis-1/6 text-primary-11 bg-primary-5 font-semibold rounded-full px-6",children:"Generate"})]})]})})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[97833,56550,17643,16022,50380,30475,19382,34489,72422,32377,31922,65275,90384,99954,67227,77358],()=>t(91851)),_N_E=e.O()}]);