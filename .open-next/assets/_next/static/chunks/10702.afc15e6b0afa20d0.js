try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="d708d1ec-9391-4f15-ae69-c4b2129a9c10",e._sentryDebugIdIdentifier="sentry-dbid-d708d1ec-9391-4f15-ae69-c4b2129a9c10")}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[10702],{10702:(e,t,a)=>{a.r(t),a.d(t,{default:()=>j});var s=a(71844),r=a(9686);a(8795);var l=a(76648),i=a(14669),n=a(89100),o=a(29595),d=a(84532),c=a(16610),u=a(72528),h=a(80903),g=a(85502),f=a(69626),m=a(24281),x=a(19102),p=a(62953),w=a.n(p),y=a(85921),b=a(79677),N=a(55280);function v(e,t){var a;let{alt:r="",title:l,sizes:i}=e,{photo:n,width:o,height:d,index:c=0}=t,u=c<8,h="object"==typeof n&&null!==n&&"src"in n&&(null===(a=String(n.src).split("/").pop())||void 0===a?void 0:a.split("?")[0])||"gallery-img-".concat(c);return(0,s.jsx)("div",{style:{width:"100%",position:"relative",aspectRatio:"".concat(o," / ").concat(d)},children:(0,s.jsx)(N.A,{fill:!0,src:n,alt:r||"Gallery image",title:l,sizes:i||"(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 33vw",loading:u?"eager":"lazy",priority:u,placeholder:"blurDataURL"in n?"blur":void 0,trackPerformance:!1,imageName:h})})}function j(e){var t;let{}=e,[a,n]=(0,l.useState)(-1),[m,x]=(0,l.useState)(null),{activeTab:p,initFromUrl:w}=(0,b.t)(),N=(0,f.useSearchParams)();(0,l.useEffect)(()=>{w(N.get("s"))},[N,w]);let{isLoading:j,isError:L,error:A,data:P,isFetchingNextPage:O,hasNextPage:_,fetchNextPage:k}=(0,u.useInfiniteQuery)({queryKey:["posts",p.toLowerCase()],queryFn:async e=>{let{pageParam:t=0}=e,a=[];return{data:null!=(a="EXPLORE"===p?await (0,c.K5)(d.N,t):"FOLLOWING"===p?await (0,c.BS)(d.N,t):"TOP"===p?await (0,c.rt)(d.N,t):await (0,c.K5)(d.N,t))?a:[],nextCursor:a.length===i.bh?t+1:void 0}},initialPageParam:0,getNextPageParam:e=>null==e?void 0:e.nextCursor,staleTime:3e5,refetchOnWindowFocus:!1,refetchOnMount:!1});(0,l.useEffect)(()=>{let e=()=>{requestAnimationFrame(()=>{x(window.innerWidth<i.ux?2:4)})},t=new ResizeObserver(e);return t.observe(document.body),e(),()=>{t.disconnect()}},[]);let C=e=>{n(e.index)};if(L)return(0,s.jsx)("p",{className:"wrapper",children:"message"in A?A.message:A});if(j||!m)return(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 w-full",children:Array(12).fill(null).map((e,t)=>(0,s.jsx)(y.A,{height:200,baseColor:"#1a1a1a",highlightColor:"#333"},t))});if(!P||0===P.pages.length||0===P.pages[0].data.length)return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center w-full min-h-[200px]",children:[(0,s.jsx)("p",{className:"text-center text-lg text-primary-6",children:"No posts found"}),(0,s.jsx)("p",{className:"text-center text-sm text-primary-7 mt-2",children:"FOLLOWING"===p?"Follow some creators to see their posts here":"Be the first to share something amazing"})]});let E=(0,g.Ny)(null!==(t=null==P?void 0:P.pages)&&void 0!==t?t:[]);return(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsx)(h.A,{isLoadingInitial:j,isLoadingMore:O,loadMore:()=>_&&k(),hasNextPage:_,children:(0,s.jsx)(r.A,{photos:E,columns:m,spacing:4,render:{extras:(e,t)=>(0,s.jsx)(I,{context:t,handleImageIndex:C}),image:v}})}),(0,s.jsx)(o.default,{photo:a>-1&&E[a],setImageIndex:n})]})}function I(e){let{context:t,handleImageIndex:a}=e,r=t.photo.author||"",{data:l,isLoading:i}=(0,m.A)(r),{data:o,isLoading:d}=(0,x.A)(r);return(0,s.jsx)(n.A,{setImageIndex:()=>a(t),context:t,children:(0,s.jsx)("div",{className:"absolute flex items-center gap-1 bottom-2 left-2",children:!i&&!d&&l&&(0,s.jsxs)(w(),{href:"/home/profile/".concat(r),className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"rounded-full",children:o?(0,s.jsx)(N.A,{className:"rounded-full border-[1px] border-primary-3 drop-shadow-lg",src:o,width:24,height:24,alt:"".concat(l,"'s profile"),trackPerformance:!0,imageName:"profile-".concat(r)}):(0,s.jsx)("div",{className:"w-6 h-6 bg-gray-300 rounded-full"})}),(0,s.jsx)("p",{className:"font-light text-sm drop-shadow-lg",children:l})]})})})}}}]);