try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="8f041e60-205d-4768-835d-8f850a963823",e._sentryDebugIdIdentifier="sentry-dbid-8f041e60-205d-4768-835d-8f850a963823")}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[50802],{50802:(e,t,s)=>{"use strict";s.d(t,{EthereumProvider:()=>tA,OPTIONAL_EVENTS:()=>td,OPTIONAL_METHODS:()=>tl});var i=s(78031),r=s.n(i),n=s(57075),a=s(81120),o=s(30260),h=s(58981),c=s.n(h),l=s(83890),p=s(68816),d=Object.defineProperty,u=Object.defineProperties,f=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,v=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable,y=(e,t,s)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,b=(e,t)=>{for(var s in t||(t={}))v.call(t,s)&&y(e,s,t[s]);if(m)for(var s of m(t))g.call(t,s)&&y(e,s,t[s]);return e},P=(e,t)=>u(e,f(t));let w={headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"};class C{constructor(e,t=!1){if(this.url=e,this.disableProviderPing=t,this.events=new i.EventEmitter,this.isAvailable=!1,this.registering=!1,!(0,p.isHttpUrl)(e))throw Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=t}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{let t=(0,l.h)(e),s=await (await c()(this.url,P(b({},w),{body:t}))).json();this.onPayload({data:s})}catch(t){this.onError(e.id,t)}}async register(e=this.url){if(!(0,p.isHttpUrl)(e))throw Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){let e=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=e||this.events.listenerCount("open")>=e)&&this.events.setMaxListeners(e+1),new Promise((e,t)=>{this.events.once("register_error",e=>{this.resetMaxListeners(),t(e)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return t(Error("HTTP connection is missing or invalid"));e()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){let t=(0,l.h)({id:1,jsonrpc:"2.0",method:"test",params:[]});await c()(e,P(b({},w),{body:t}))}this.onOpen()}catch(t){let e=this.parseError(t);throw this.events.emit("register_error",e),this.onClose(),e}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;let t="string"==typeof e.data?(0,l.j)(e.data):e.data;this.events.emit("payload",t)}onError(e,t){let s=this.parseError(t),i=s.message||s.toString(),r=(0,p.formatJsonRpcError)(e,i);this.events.emit("payload",r)}parseError(e,t=this.url){return(0,p.parseConnectionError)(e,t,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}}var I=s(14915),E=s(35105).Buffer;let O="error",A="wc@2:universal_provider:",j="https://rpc.walletconnect.org/v1/",_="generic",H=`${j}bundler`,S={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function D(){}function $(e){return null==e||"object"!=typeof e&&"function"!=typeof e}function q(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function N(e){return"object"==typeof e&&null!==e}function T(e){return Object.getOwnPropertySymbols(e).filter(t=>Object.prototype.propertyIsEnumerable.call(e,t))}function R(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}let M="[object String]",x="[object Number]",U="[object Boolean]",F="[object Arguments]";function B(e,t,s,i=new Map,r){let n=r?.(e,t,s,i);if(null!=n)return n;if($(e))return e;if(i.has(e))return i.get(e);if(Array.isArray(e)){let t=Array(e.length);i.set(e,t);for(let n=0;n<e.length;n++)t[n]=B(e[n],n,s,i,r);return Object.hasOwn(e,"index")&&(t.index=e.index),Object.hasOwn(e,"input")&&(t.input=e.input),t}if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp){let t=new RegExp(e.source,e.flags);return t.lastIndex=e.lastIndex,t}if(e instanceof Map){let t=new Map;for(let[n,a]of(i.set(e,t),e))t.set(n,B(a,n,s,i,r));return t}if(e instanceof Set){let t=new Set;for(let n of(i.set(e,t),e))t.add(B(n,void 0,s,i,r));return t}if("u">typeof E&&E.isBuffer(e))return e.subarray();if(q(e)){let t=new(Object.getPrototypeOf(e)).constructor(e.length);i.set(e,t);for(let n=0;n<e.length;n++)t[n]=B(e[n],n,s,i,r);return t}if(e instanceof ArrayBuffer||"u">typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer)return e.slice(0);if(e instanceof DataView){let t=new DataView(e.buffer.slice(0),e.byteOffset,e.byteLength);return i.set(e,t),k(t,e,s,i,r),t}if("u">typeof File&&e instanceof File){let t=new File([e],e.name,{type:e.type});return i.set(e,t),k(t,e,s,i,r),t}if(e instanceof Blob){let t=new Blob([e],{type:e.type});return i.set(e,t),k(t,e,s,i,r),t}if(e instanceof Error){let t=new e.constructor;return i.set(e,t),t.message=e.message,t.name=e.name,t.stack=e.stack,t.cause=e.cause,k(t,e,s,i,r),t}if("object"==typeof e&&function(e){switch(R(e)){case F:case"[object Array]":case"[object ArrayBuffer]":case"[object DataView]":case U:case"[object Date]":case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Map]":case x:case"[object Object]":case"[object RegExp]":case"[object Set]":case M:case"[object Symbol]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return!0;default:return!1}}(e)){let t=Object.create(Object.getPrototypeOf(e));return i.set(e,t),k(t,e,s,i,r),t}return e}function k(e,t,s=e,i,r){let n=[...Object.keys(t),...T(t)];for(let a=0;a<n.length;a++){let o=n[a],h=Object.getOwnPropertyDescriptor(e,o);(null==h||h.writable)&&(e[o]=B(t[o],o,s,i,r))}}function L(e){return B(e,void 0,e,new Map,(t,s,i,r)=>{let n=void 0;if(null!=n)return n;if("object"==typeof e)switch(Object.prototype.toString.call(e)){case x:case M:case U:{let t=new e.constructor(e?.valueOf());return k(t,e),t}case F:{let t={};return k(t,e),t.length=e.length,t[Symbol.iterator]=e[Symbol.iterator],t}default:return}})}function G(e){return null!==e&&"object"==typeof e&&"[object Arguments]"===R(e)}var z=Object.defineProperty,J=Object.defineProperties,V=Object.getOwnPropertyDescriptors,W=Object.getOwnPropertySymbols,Q=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable,Y=(e,t,s)=>t in e?z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,Z=(e,t)=>{for(var s in t||(t={}))Q.call(t,s)&&Y(e,s,t[s]);if(W)for(var s of W(t))K.call(t,s)&&Y(e,s,t[s]);return e},X=(e,t)=>J(e,V(t));function ee(e,t,s){var i;let r=(0,n._Yb)(e);return(null==(i=t.rpcMap)?void 0:i[r.reference])||`${j}?chainId=${r.namespace}:${r.reference}&projectId=${s}`}function et(e){return e.includes(":")?e.split(":")[1]:e}function es(e){return e.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function ei(e={},t={}){return function(e,...t){return function(e,...t){let s=t.slice(0,-1),i=t[t.length-1],r=e;for(let e=0;e<s.length;e++)r=function e(t,s,i,r){if($(t)&&(t=Object(t)),null==s||"object"!=typeof s)return t;if(r.has(s))return function(e){if($(e))return e;if(Array.isArray(e)||q(e)||e instanceof ArrayBuffer||"u">typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer)return e.slice(0);let t=Object.getPrototypeOf(e),s=t.constructor;if(e instanceof Date||e instanceof Map||e instanceof Set)return new s(e);if(e instanceof RegExp){let t=new s(e);return t.lastIndex=e.lastIndex,t}if(e instanceof DataView)return new s(e.buffer.slice(0));if(e instanceof Error){let t=new s(e.message);return t.stack=e.stack,t.name=e.name,t.cause=e.cause,t}return"u">typeof File&&e instanceof File?new s([e],e.name,{type:e.type,lastModified:e.lastModified}):"object"==typeof e?Object.assign(Object.create(t),e):e}(r.get(s));if(r.set(s,t),Array.isArray(s)){s=s.slice();for(let e=0;e<s.length;e++)s[e]=s[e]??void 0}let n=[...Object.keys(s),...T(s)];for(let a=0;a<n.length;a++){let o=n[a],h=s[o],c=t[o];if(G(h)&&(h={...h}),G(c)&&(c={...c}),"u">typeof E&&E.isBuffer(h)&&(h=L(h)),Array.isArray(h)){if("object"==typeof c&&null!=c){let e=[],t=Reflect.ownKeys(c);for(let s=0;s<t.length;s++){let i=t[s];e[i]=c[i]}c=e}else c=[]}let l=i(c,h,o,t,s,r);null!=l?t[o]=l:Array.isArray(h)||N(c)&&N(h)?t[o]=e(c,h,i,r):null==c&&function(e){if("object"!=typeof e||null==e)return!1;if(null===Object.getPrototypeOf(e))return!0;if("[object Object]"!==Object.prototype.toString.call(e)){let t=e[Symbol.toStringTag];return!!(null!=t&&Object.getOwnPropertyDescriptor(e,Symbol.toStringTag)?.writable)&&e.toString()===`[object ${t}]`}let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(h)?t[o]=e({},h,i,r):null==c&&q(h)?t[o]=L(h):(void 0===c||void 0!==h)&&(t[o]=h)}return t}(r,s[e],i,new Map);return r}(e,...t,D)}(er(e),er(t))}function er(e){var t,s,i,r;let a={};if(!(0,n.aF0)(e))return a;for(let[o,h]of Object.entries(e)){let e=(0,n.nWe)(o)?[o]:h.chains,c=h.methods||[],l=h.events||[],p=h.rpcMap||{},d=(0,n.kob)(o);a[d]=X(Z(Z({},a[d]),h),{chains:(0,n.TRk)(e,null==(t=a[d])?void 0:t.chains),methods:(0,n.TRk)(c,null==(s=a[d])?void 0:s.methods),events:(0,n.TRk)(l,null==(i=a[d])?void 0:i.events),rpcMap:Z(Z({},p),null==(r=a[d])?void 0:r.rpcMap)})}return a}function en(e){return e.includes(":")?e.split(":")[2]:e}function ea(e){let t={};for(let[s,i]of Object.entries(e)){let e=i.methods||[],r=i.events||[],a=i.accounts||[],o=(0,n.nWe)(s)?[s]:i.chains?i.chains:es(i.accounts);t[s]={chains:o,methods:e,events:r,accounts:a}}return t}function eo(e){return"number"==typeof e?e:e.includes("0x")?parseInt(e,16):isNaN(Number(e=e.includes(":")?e.split(":")[1]:e))?e:Number(e)}let eh={},ec=e=>eh[e],el=(e,t)=>{eh[e]=t};var ep=Object.defineProperty,ed=(e,t,s)=>t in e?ep(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,eu=(e,t,s)=>ed(e,"symbol"!=typeof t?t+"":t,s);class ef{constructor(e){eu(this,"name","polkadot"),eu(this,"client"),eu(this,"httpProviders"),eu(this,"events"),eu(this,"namespace"),eu(this,"chainId"),this.namespace=e.namespace,this.events=ec("events"),this.client=ec("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(S.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){let e=this.namespace.accounts;return e&&e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2])||[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var s;let i=et(t);e[i]=this.createHttpProvider(i,null==(s=this.namespace.rpcMap)?void 0:s[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){let s=t||ee(e,this.namespace,this.client.core.projectId);if(!s)throw Error(`No RPC url provided for chainId: ${e}`);return new I.F(new C(s,ec("disableProviderPing")))}}var em=Object.defineProperty,ev=Object.defineProperties,eg=Object.getOwnPropertyDescriptors,ey=Object.getOwnPropertySymbols,eb=Object.prototype.hasOwnProperty,eP=Object.prototype.propertyIsEnumerable,ew=(e,t,s)=>t in e?em(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,eC=(e,t)=>{for(var s in t||(t={}))eb.call(t,s)&&ew(e,s,t[s]);if(ey)for(var s of ey(t))eP.call(t,s)&&ew(e,s,t[s]);return e},eI=(e,t)=>ev(e,eg(t)),eE=(e,t,s)=>ew(e,"symbol"!=typeof t?t+"":t,s);class eO{constructor(e){eE(this,"name","eip155"),eE(this,"client"),eE(this,"chainId"),eE(this,"namespace"),eE(this,"httpProviders"),eE(this,"events"),this.namespace=e.namespace,this.events=ec("events"),this.client=ec("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(parseInt(e),t),this.chainId=parseInt(e),this.events.emit(S.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,t){let s=t||ee(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw Error(`No RPC url provided for chainId: ${e}`);return new I.F(new C(s,ec("disableProviderPing")))}setHttpProvider(e,t){let s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var s;let i=parseInt(et(t));e[i]=this.createHttpProvider(i,null==(s=this.namespace.rpcMap)?void 0:s[t])}),e}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}getHttpProvider(){let e=this.chainId,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}async handleSwitchChain(e){var t,s;let i=e.request.params?null==(t=e.request.params[0])?void 0:t.chainId:"0x0",r=parseInt(i=i.startsWith("0x")?i:`0x${i}`,16);if(this.isChainApproved(r))this.setDefaultChain(`${r}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:i}]},chainId:null==(s=this.namespace.chains)?void 0:s[0]}),this.setDefaultChain(`${r}`);else throw Error(`Failed to switch to chain 'eip155:${r}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var t,s,i;let r=null==(s=null==(t=e.request)?void 0:t.params)?void 0:s[0];if(!r)throw Error("Missing address parameter in `wallet_getCapabilities` request");let n=this.client.session.get(e.topic),a=(null==(i=n?.sessionProperties)?void 0:i.capabilities)||{};if(null!=a&&a[r])return a?.[r];let o=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:eI(eC({},n.sessionProperties||{}),{capabilities:eI(eC({},a||{}),{[r]:o})})})}catch(e){console.warn("Failed to update session with capabilities",e)}return o}async getCallStatus(e){var t,s;let i=this.client.session.get(e.topic),r=null==(t=i.sessionProperties)?void 0:t.bundler_name;if(r){let t=this.getBundlerUrl(e.chainId,r);try{return await this.getUserOperationReceipt(t,e)}catch(e){console.warn("Failed to fetch call status from bundler",e,t)}}let n=null==(s=i.sessionProperties)?void 0:s.bundler_url;if(n)try{return await this.getUserOperationReceipt(n,e)}catch(e){console.warn("Failed to fetch call status from custom bundler",e,n)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,t){var s;let i=new URL(e),r=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify((0,p.formatJsonRpcRequest)("eth_getUserOperationReceipt",[null==(s=t.request.params)?void 0:s[0]]))});if(!r.ok)throw Error(`Failed to fetch user operation receipt - ${r.status}`);return await r.json()}getBundlerUrl(e,t){return`${H}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${t}`}}var eA=Object.defineProperty,ej=(e,t,s)=>t in e?eA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,e_=(e,t,s)=>ej(e,"symbol"!=typeof t?t+"":t,s);class eH{constructor(e){e_(this,"name","solana"),e_(this,"client"),e_(this,"httpProviders"),e_(this,"events"),e_(this,"namespace"),e_(this,"chainId"),this.namespace=e.namespace,this.events=ec("events"),this.client=ec("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(S.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var s;let i=et(t);e[i]=this.createHttpProvider(i,null==(s=this.namespace.rpcMap)?void 0:s[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){let s=t||ee(e,this.namespace,this.client.core.projectId);if(!s)throw Error(`No RPC url provided for chainId: ${e}`);return new I.F(new C(s,ec("disableProviderPing")))}}var eS=Object.defineProperty,eD=(e,t,s)=>t in e?eS(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,e$=(e,t,s)=>eD(e,"symbol"!=typeof t?t+"":t,s);class eq{constructor(e){e$(this,"name","cosmos"),e$(this,"client"),e$(this,"httpProviders"),e$(this,"events"),e$(this,"namespace"),e$(this,"chainId"),this.namespace=e.namespace,this.events=ec("events"),this.client=ec("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(S.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var s;let i=et(t);e[i]=this.createHttpProvider(i,null==(s=this.namespace.rpcMap)?void 0:s[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){let s=t||ee(e,this.namespace,this.client.core.projectId);if(!s)throw Error(`No RPC url provided for chainId: ${e}`);return new I.F(new C(s,ec("disableProviderPing")))}}var eN=Object.defineProperty,eT=(e,t,s)=>t in e?eN(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,eR=(e,t,s)=>eT(e,"symbol"!=typeof t?t+"":t,s);class eM{constructor(e){eR(this,"name","algorand"),eR(this,"client"),eR(this,"httpProviders"),eR(this,"events"),eR(this,"namespace"),eR(this,"chainId"),this.namespace=e.namespace,this.events=ec("events"),this.client=ec("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){let s=t||ee(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!s)throw Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.chainId=e,this.events.emit(S.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var s;e[t]=this.createHttpProvider(t,null==(s=this.namespace.rpcMap)?void 0:s[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){let s=t||ee(e,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new I.F(new C(s,ec("disableProviderPing")))}}var ex=Object.defineProperty,eU=(e,t,s)=>t in e?ex(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,eF=(e,t,s)=>eU(e,"symbol"!=typeof t?t+"":t,s);class eB{constructor(e){eF(this,"name","cip34"),eF(this,"client"),eF(this,"httpProviders"),eF(this,"events"),eF(this,"namespace"),eF(this,"chainId"),this.namespace=e.namespace,this.events=ec("events"),this.client=ec("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(S.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{let s=this.getCardanoRPCUrl(t),i=et(t);e[i]=this.createHttpProvider(i,s)}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}getCardanoRPCUrl(e){let t=this.namespace.rpcMap;if(t)return t[e]}setHttpProvider(e,t){let s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){let s=t||this.getCardanoRPCUrl(e);if(!s)throw Error(`No RPC url provided for chainId: ${e}`);return new I.F(new C(s,ec("disableProviderPing")))}}var ek=Object.defineProperty,eL=(e,t,s)=>t in e?ek(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,eG=(e,t,s)=>eL(e,"symbol"!=typeof t?t+"":t,s);class ez{constructor(e){eG(this,"name","elrond"),eG(this,"client"),eG(this,"httpProviders"),eG(this,"events"),eG(this,"namespace"),eG(this,"chainId"),this.namespace=e.namespace,this.events=ec("events"),this.client=ec("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(S.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var s;let i=et(t);e[i]=this.createHttpProvider(i,null==(s=this.namespace.rpcMap)?void 0:s[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){let s=t||ee(e,this.namespace,this.client.core.projectId);if(!s)throw Error(`No RPC url provided for chainId: ${e}`);return new I.F(new C(s,ec("disableProviderPing")))}}var eJ=Object.defineProperty,eV=(e,t,s)=>t in e?eJ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,eW=(e,t,s)=>eV(e,"symbol"!=typeof t?t+"":t,s);class eQ{constructor(e){eW(this,"name","multiversx"),eW(this,"client"),eW(this,"httpProviders"),eW(this,"events"),eW(this,"namespace"),eW(this,"chainId"),this.namespace=e.namespace,this.events=ec("events"),this.client=ec("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(S.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var s;let i=et(t);e[i]=this.createHttpProvider(i,null==(s=this.namespace.rpcMap)?void 0:s[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){let s=t||ee(e,this.namespace,this.client.core.projectId);if(!s)throw Error(`No RPC url provided for chainId: ${e}`);return new I.F(new C(s,ec("disableProviderPing")))}}var eK=Object.defineProperty,eY=(e,t,s)=>t in e?eK(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,eZ=(e,t,s)=>eY(e,"symbol"!=typeof t?t+"":t,s);class eX{constructor(e){eZ(this,"name","near"),eZ(this,"client"),eZ(this,"httpProviders"),eZ(this,"events"),eZ(this,"namespace"),eZ(this,"chainId"),this.namespace=e.namespace,this.events=ec("events"),this.client=ec("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){let s=t||ee(`${this.name}:${e}`,this.namespace);if(!s)throw Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.events.emit(S.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){let e=this.namespace.accounts;return e&&e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2])||[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var s;e[t]=this.createHttpProvider(t,null==(s=this.namespace.rpcMap)?void 0:s[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){let s=t||ee(e,this.namespace);return typeof s>"u"?void 0:new I.F(new C(s,ec("disableProviderPing")))}}var e0=Object.defineProperty,e1=(e,t,s)=>t in e?e0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,e2=(e,t,s)=>e1(e,"symbol"!=typeof t?t+"":t,s);class e8{constructor(e){e2(this,"name","tezos"),e2(this,"client"),e2(this,"httpProviders"),e2(this,"events"),e2(this,"namespace"),e2(this,"chainId"),this.namespace=e.namespace,this.events=ec("events"),this.client=ec("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){let s=t||ee(`${this.name}:${e}`,this.namespace);if(!s)throw Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,s)}this.events.emit(S.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){let e=this.namespace.accounts;return e&&e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2])||[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{e[t]=this.createHttpProvider(t)}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){let s=t||ee(e,this.namespace);return typeof s>"u"?void 0:new I.F(new C(s))}}var e3=Object.defineProperty,e5=(e,t,s)=>t in e?e3(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,e6=(e,t,s)=>e5(e,"symbol"!=typeof t?t+"":t,s);class e9{constructor(e){e6(this,"name",_),e6(this,"client"),e6(this,"httpProviders"),e6(this,"events"),e6(this,"namespace"),e6(this,"chainId"),this.namespace=e.namespace,this.events=ec("events"),this.client=ec("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(S.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){var e,t;let s={};return null==(t=null==(e=this.namespace)?void 0:e.accounts)||t.forEach(e=>{let t=(0,n._Yb)(e);s[`${t.namespace}:${t.reference}`]=this.createHttpProvider(e)}),s}getHttpProvider(e){let t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let s=this.createHttpProvider(e,t);s&&(this.httpProviders[e]=s)}createHttpProvider(e,t){let s=t||ee(e,this.namespace,this.client.core.projectId);if(!s)throw Error(`No RPC url provided for chainId: ${e}`);return new I.F(new C(s,ec("disableProviderPing")))}}var e4=Object.defineProperty,e7=Object.defineProperties,te=Object.getOwnPropertyDescriptors,tt=Object.getOwnPropertySymbols,ts=Object.prototype.hasOwnProperty,ti=Object.prototype.propertyIsEnumerable,tr=(e,t,s)=>t in e?e4(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,tn=(e,t)=>{for(var s in t||(t={}))ts.call(t,s)&&tr(e,s,t[s]);if(tt)for(var s of tt(t))ti.call(t,s)&&tr(e,s,t[s]);return e},ta=(e,t)=>e7(e,te(t)),to=(e,t,s)=>tr(e,"symbol"!=typeof t?t+"":t,s);class th{constructor(e){to(this,"client"),to(this,"namespaces"),to(this,"optionalNamespaces"),to(this,"sessionProperties"),to(this,"scopedProperties"),to(this,"events",new(r())),to(this,"rpcProviders",{}),to(this,"session"),to(this,"providerOpts"),to(this,"logger"),to(this,"uri"),to(this,"disableProviderPing",!1),this.providerOpts=e,this.logger="u">typeof e?.logger&&"string"!=typeof e?.logger?e.logger:(0,o.h6)((0,o.iP)({level:e?.logger||O})),this.disableProviderPing=e?.disableProviderPing||!1}static async init(e){let t=new th(e);return await t.initialize(),t}async request(e,t,s){let[i,r]=this.validateChain(t);if(!this.session)throw Error("Please call connect() before request()");return await this.getProvider(i).request({request:tn({},e),chainId:`${i}:${r}`,topic:this.session.topic,expiry:s})}sendAsync(e,t,s,i){let r=new Date().getTime();this.request(e,s,i).then(e=>t(null,(0,p.formatJsonRpcResult)(r,e))).catch(e=>t(e,void 0))}async enable(){if(!this.client)throw Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw Error("Please call connect() before enable()");await this.client.disconnect({topic:null==(e=this.session)?void 0:e.topic,reason:(0,n.Hjj)("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,t){if(!this.client)throw Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();let{uri:s,response:i}=await this.client.authenticate(e,t);s&&(this.uri=s,this.events.emit("display_uri",s));let r=await i();if(this.session=r.session,this.session){let e=ea(this.session.namespaces);this.namespaces=ei(this.namespaces,e),await this.persist("namespaces",this.namespaces),this.onConnect()}return r}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}async pair(e){let{uri:t,approval:s}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});t&&(this.uri=t,this.events.emit("display_uri",t));let i=await s();this.session=i;let r=ea(i.namespaces);return this.namespaces=ei(this.namespaces,r),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,t){try{if(!this.session)return;let[s,i]=this.validateChain(e),r=this.getProvider(s);r.name===_?r.setDefaultChain(`${s}:${i}`,t):r.setDefaultChain(i,t)}catch(e){if(!/Please call connect/.test(e.message))throw e}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");let t=this.client.pairing.getAll();if((0,n.OP1)(t)){for(let s of t)e.deletePairings?this.client.core.expirer.set(s.topic,0):await this.client.core.relayer.subscriber.unsubscribe(s.topic);this.logger.info(`Inactive pairings cleared: ${t.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,t;if(this.client=this.providerOpts.client||await a.Ay.init({core:this.providerOpts.core,logger:this.providerOpts.logger||O,relayUrl:this.providerOpts.relayUrl||"wss://relay.walletconnect.org",projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(s){throw this.logger.error("Failed to get session",s),Error(`The provided session: ${null==(t=null==(e=this.providerOpts)?void 0:e.session)?void 0:t.topic} doesn't exist in the Sign client`)}else{let e=this.client.session.getAll();this.session=e[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw Error("Sign Client not initialized");if(!this.session)throw Error("Session not initialized. Please call connect() before enable()");let e=[...new Set(Object.keys(this.session.namespaces).map(e=>(0,n.kob)(e)))];el("client",this.client),el("events",this.events),el("disableProviderPing",this.disableProviderPing),e.forEach(e=>{if(!this.session)return;let t=function(e,t){let s=Object.keys(t.namespaces).filter(t=>t.includes(e));if(!s.length)return[];let i=[];return s.forEach(e=>{let s=t.namespaces[e].accounts;i.push(...s)}),i}(e,this.session),s=es(t),i=ta(tn({},ei(this.namespaces,this.optionalNamespaces)[e]),{accounts:t,chains:s});switch(e){case"eip155":this.rpcProviders[e]=new eO({namespace:i});break;case"algorand":this.rpcProviders[e]=new eM({namespace:i});break;case"solana":this.rpcProviders[e]=new eH({namespace:i});break;case"cosmos":this.rpcProviders[e]=new eq({namespace:i});break;case"polkadot":this.rpcProviders[e]=new ef({namespace:i});break;case"cip34":this.rpcProviders[e]=new eB({namespace:i});break;case"elrond":this.rpcProviders[e]=new ez({namespace:i});break;case"multiversx":this.rpcProviders[e]=new eQ({namespace:i});break;case"near":this.rpcProviders[e]=new eX({namespace:i});break;case"tezos":this.rpcProviders[e]=new e8({namespace:i});break;default:this.rpcProviders[_]?this.rpcProviders[_].updateNamespace(i):this.rpcProviders[_]=new e9({namespace:i})}})}registerEventListeners(){if(typeof this.client>"u")throw Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var t;let{topic:s}=e;s===(null==(t=this.session)?void 0:t.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var t;let{params:s,topic:i}=e;if(i!==(null==(t=this.session)?void 0:t.topic))return;let{event:r}=s;if("accountsChanged"===r.name){let e=r.data;e&&(0,n.OP1)(e)&&this.events.emit("accountsChanged",e.map(en))}else if("chainChanged"===r.name){let e=s.chainId,t=s.event.data,i=(0,n.kob)(e),r=eo(e)!==eo(t)?`${i}:${eo(t)}`:e;this.onChainChanged(r)}else this.events.emit(r.name,r.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:t})=>{var s,i;if(e!==(null==(s=this.session)?void 0:s.topic))return;let{namespaces:r}=t,n=null==(i=this.client)?void 0:i.session.get(e);this.session=ta(tn({},n),{namespaces:r}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:t})}),this.client.on("session_delete",async e=>{var t;e.topic===(null==(t=this.session)?void 0:t.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",ta(tn({},(0,n.Hjj)("USER_DISCONNECTED")),{data:e.topic})))}),this.on(S.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[_]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var t;this.getProvider(e).updateNamespace(null==(t=this.session)?void 0:t.namespaces[e])})}setNamespaces(e){let{namespaces:t,optionalNamespaces:s,sessionProperties:i,scopedProperties:r}=e;t&&Object.keys(t).length&&(this.namespaces=t),s&&Object.keys(s).length&&(this.optionalNamespaces=s),this.sessionProperties=i,this.scopedProperties=r}validateChain(e){let[t,s]=e?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[t,s];if(t&&!Object.keys(this.namespaces||{}).map(e=>(0,n.kob)(e)).includes(t))throw Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&s)return[t,s];let i=(0,n.kob)(Object.keys(this.namespaces)[0]),r=this.rpcProviders[i].getDefaultChain();return[i,r]}async requestAccounts(){let[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,t=!1){if(!this.namespaces)return;let[s,i]=this.validateChain(e);i&&(t||this.getProvider(s).setDefaultChain(i),this.namespaces[s]?this.namespaces[s].defaultChain=i:this.namespaces[`${s}:${i}`]?this.namespaces[`${s}:${i}`].defaultChain=i:this.namespaces[`${s}:${i}`]={defaultChain:i},this.events.emit("chainChanged",i),await this.persist("namespaces",this.namespaces))}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,t){var s;let i=(null==(s=this.session)?void 0:s.topic)||"";await this.client.core.storage.setItem(`${A}/${e}${i}`,t)}async getFromStore(e){var t;let s=(null==(t=this.session)?void 0:t.topic)||"";return await this.client.core.storage.getItem(`${A}/${e}${s}`)}async deleteFromStore(e){var t;let s=(null==(t=this.session)?void 0:t.topic)||"";await this.client.core.storage.removeItem(`${A}/${e}${s}`)}async cleanupStorage(){var e;try{if((null==(e=this.client)?void 0:e.session.length)>0)return;for(let e of(await this.client.core.storage.getKeys()))e.startsWith(A)&&await this.client.core.storage.removeItem(e)}catch(e){this.logger.warn("Failed to cleanup storage",e)}}}let tc=["eth_sendTransaction","personal_sign"],tl=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_sendCalls","wallet_getCapabilities","wallet_getCallsStatus","wallet_showCallsStatus"],tp=["chainChanged","accountsChanged"],td=["chainChanged","accountsChanged","message","disconnect","connect"];var tu=Object.defineProperty,tf=Object.defineProperties,tm=Object.getOwnPropertyDescriptors,tv=Object.getOwnPropertySymbols,tg=Object.prototype.hasOwnProperty,ty=Object.prototype.propertyIsEnumerable,tb=(e,t,s)=>t in e?tu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,tP=(e,t)=>{for(var s in t||(t={}))tg.call(t,s)&&tb(e,s,t[s]);if(tv)for(var s of tv(t))ty.call(t,s)&&tb(e,s,t[s]);return e},tw=(e,t)=>tf(e,tm(t)),tC=(e,t,s)=>tb(e,"symbol"!=typeof t?t+"":t,s);function tI(e){return Number(e[0].split(":")[1])}function tE(e){return`0x${e.toString(16)}`}class tO{constructor(){tC(this,"events",new i.EventEmitter),tC(this,"namespace","eip155"),tC(this,"accounts",[]),tC(this,"signer"),tC(this,"chainId",1),tC(this,"modal"),tC(this,"rpc"),tC(this,"STORAGE_KEY","wc@2:ethereum_provider:"),tC(this,"on",(e,t)=>(this.events.on(e,t),this)),tC(this,"once",(e,t)=>(this.events.once(e,t),this)),tC(this,"removeListener",(e,t)=>(this.events.removeListener(e,t),this)),tC(this,"off",(e,t)=>(this.events.off(e,t),this)),tC(this,"parseAccount",e=>this.isCompatibleChainId(e)?this.parseAccountId(e).address:e),this.signer={},this.rpc={}}static async init(e){let t=new tO;return await t.initialize(e),t}async request(e,t){return await this.signer.request(e,this.formatChainId(this.chainId),t)}sendAsync(e,t,s){this.signer.sendAsync(e,t,this.formatChainId(this.chainId),s)}get connected(){return!!this.signer.client&&this.signer.client.core.relayer.connected}get connecting(){return!!this.signer.client&&this.signer.client.core.relayer.connecting}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(e){if(!this.signer.client)throw Error("Provider not initialized. Call init() first");this.loadConnectOpts(e);let{required:t,optional:s}=function(e){let{chains:t,optionalChains:s,methods:i,optionalMethods:r,events:a,optionalEvents:o,rpcMap:h}=e;if(!(0,n.OP1)(t))throw Error("Invalid chains");let c={chains:t,methods:i||tc,events:a||tp,rpcMap:tP({},t.length?{[tI(t)]:h[tI(t)]}:{})},l=a?.filter(e=>!tp.includes(e)),p=i?.filter(e=>!tc.includes(e));if(!s&&!o&&!r&&!(null!=l&&l.length)&&!(null!=p&&p.length))return{required:t.length?c:void 0};let d={chains:[...new Set(l?.length&&p?.length||!s?c.chains.concat(s||[]):s)],methods:[...new Set(c.methods.concat(null!=r&&r.length?r:tl))],events:[...new Set(c.events.concat(null!=o&&o.length?o:td))],rpcMap:h};return{required:t.length?c:void 0,optional:s.length?d:void 0}}(this.rpc);try{let i=await new Promise(async(i,r)=>{var n;this.rpc.showQrModal&&(null==(n=this.modal)||n.subscribeModal(e=>{e.open||this.signer.session||(this.signer.abortPairingAttempt(),r(Error("Connection request reset. Please try again.")))}));let a=null!=e&&e.scopedProperties?{[this.namespace]:e.scopedProperties}:void 0;await this.signer.connect(tw(tP({namespaces:tP({},t&&{[this.namespace]:t})},s&&{optionalNamespaces:{[this.namespace]:s}}),{pairingTopic:e?.pairingTopic,scopedProperties:a})).then(e=>{i(e)}).catch(e=>{r(Error(e.message))})});if(!i)return;let r=(0,n.Zz7)(i.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:r),this.setAccounts(r),this.events.emit("connect",{chainId:tE(this.chainId)})}catch(e){throw this.signer.logger.error(e),e}finally{this.modal&&this.modal.closeModal()}}async authenticate(e,t){if(!this.signer.client)throw Error("Provider not initialized. Call init() first");this.loadConnectOpts({chains:e?.chains});try{let s=await new Promise(async(s,i)=>{var r;this.rpc.showQrModal&&(null==(r=this.modal)||r.subscribeModal(e=>{e.open||this.signer.session||(this.signer.abortPairingAttempt(),i(Error("Connection request reset. Please try again.")))})),await this.signer.authenticate(tw(tP({},e),{chains:this.rpc.chains}),t).then(e=>{s(e)}).catch(e=>{i(Error(e.message))})}),i=s.session;if(i){let e=(0,n.Zz7)(i.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:e),this.setAccounts(e),this.events.emit("connect",{chainId:tE(this.chainId)})}return s}catch(e){throw this.signer.logger.error(e),e}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",e=>{let{params:t}=e,{event:s}=t;"accountsChanged"===s.name?(this.accounts=this.parseAccounts(s.data),this.events.emit("accountsChanged",this.accounts)):"chainChanged"===s.name?this.setChainId(this.formatChainId(s.data)):this.events.emit(s.name,s.data),this.events.emit("session_event",e)}),this.signer.on("chainChanged",e=>{let t=parseInt(e);this.chainId=t,this.events.emit("chainChanged",tE(this.chainId)),this.persist()}),this.signer.on("session_update",e=>{this.events.emit("session_update",e)}),this.signer.on("session_delete",e=>{this.reset(),this.events.emit("session_delete",e),this.events.emit("disconnect",tw(tP({},(0,n.Hjj)("USER_DISCONNECTED")),{data:e.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",e=>{var t,s;this.rpc.showQrModal&&(null==(t=this.modal)||t.closeModal(),null==(s=this.modal)||s.openModal({uri:e})),this.events.emit("display_uri",e)})}switchEthereumChain(e){this.request({method:"wallet_switchEthereumChain",params:[{chainId:e.toString(16)}]})}isCompatibleChainId(e){return"string"==typeof e&&e.startsWith(`${this.namespace}:`)}formatChainId(e){return`${this.namespace}:${e}`}parseChainId(e){return Number(e.split(":")[1])}setChainIds(e){let t=e.filter(e=>this.isCompatibleChainId(e)).map(e=>this.parseChainId(e));t.length&&(this.chainId=t[0],this.events.emit("chainChanged",tE(this.chainId)),this.persist())}setChainId(e){if(this.isCompatibleChainId(e)){let t=this.parseChainId(e);this.chainId=t,this.switchEthereumChain(t)}}parseAccountId(e){let[t,s,i]=e.split(":");return{chainId:`${t}:${s}`,address:i}}setAccounts(e){this.accounts=e.filter(e=>this.parseChainId(this.parseAccountId(e).chainId)===this.chainId).map(e=>this.parseAccountId(e).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(e){var t,s;let i=null!=(t=e?.chains)?t:[],r=null!=(s=e?.optionalChains)?s:[],n=i.concat(r);if(!n.length)throw Error("No chains specified in either `chains` or `optionalChains`");let a=i.length?e?.methods||tc:[],o=i.length?e?.events||tp:[],h=e?.optionalMethods||[],c=e?.optionalEvents||[],l=e?.rpcMap||this.buildRpcMap(n,e.projectId),p=e?.qrModalOptions||void 0;return{chains:i?.map(e=>this.formatChainId(e)),optionalChains:r.map(e=>this.formatChainId(e)),methods:a,events:o,optionalMethods:h,optionalEvents:c,rpcMap:l,showQrModal:!!(null!=e&&e.showQrModal),qrModalOptions:p,projectId:e.projectId,metadata:e.metadata}}buildRpcMap(e,t){let s={};return e.forEach(e=>{s[e]=this.getRpcUrl(e,t)}),s}async initialize(e){if(this.rpc=this.getRpcConfig(e),this.chainId=this.rpc.chains.length?tI(this.rpc.chains):tI(this.rpc.optionalChains),this.signer=await th.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:e.disableProviderPing,relayUrl:e.relayUrl,storage:e.storage,storageOptions:e.storageOptions,customStoragePrefix:e.customStoragePrefix,telemetryEnabled:e.telemetryEnabled,logger:e.logger}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let e;try{let{WalletConnectModal:t}=await s.e(23117).then(s.bind(s,23117));e=t}catch{throw Error("To use QR modal, please install @walletconnect/modal package")}if(e)try{this.modal=new e(tP({projectId:this.rpc.projectId},this.rpc.qrModalOptions))}catch(e){throw this.signer.logger.error(e),Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(e){if(!e)return;let{chains:t,optionalChains:s,rpcMap:i}=e;t&&(0,n.OP1)(t)&&(this.rpc.chains=t.map(e=>this.formatChainId(e)),t.forEach(e=>{this.rpc.rpcMap[e]=i?.[e]||this.getRpcUrl(e)})),s&&(0,n.OP1)(s)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=s?.map(e=>this.formatChainId(e)),s.forEach(e=>{this.rpc.rpcMap[e]=i?.[e]||this.getRpcUrl(e)}))}getRpcUrl(e,t){var s;return(null==(s=this.rpc.rpcMap)?void 0:s[e])||`https://rpc.walletconnect.org/v1/?chainId=eip155:${e}&projectId=${t||this.rpc.projectId}`}async loadPersistedSession(){if(this.session)try{let e=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),t=this.session.namespaces[`${this.namespace}:${e}`]?this.session.namespaces[`${this.namespace}:${e}`]:this.session.namespaces[this.namespace];this.setChainIds(e?[this.formatChainId(e)]:t?.accounts),this.setAccounts(t?.accounts)}catch(e){this.signer.logger.error("Failed to load persisted session, clearing state..."),this.signer.logger.error(e),await this.disconnect().catch(e=>this.signer.logger.warn(e))}}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(e){return"string"==typeof e||e instanceof String?[this.parseAccount(e)]:e.map(e=>this.parseAccount(e))}}let tA=tO},58981:(e,t,s)=>{var i="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==s.g&&s.g,r=function(){function e(){this.fetch=!1,this.DOMException=i.DOMException}return e.prototype=i,new e}();!function(e){!function(t){var i=void 0!==e&&e||"undefined"!=typeof self&&self||void 0!==s.g&&s.g||{},r={searchParams:"URLSearchParams"in i,iterable:"Symbol"in i&&"iterator"in Symbol,blob:"FileReader"in i&&"Blob"in i&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in i,arrayBuffer:"ArrayBuffer"in i};if(r.arrayBuffer)var n=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],a=ArrayBuffer.isView||function(e){return e&&n.indexOf(Object.prototype.toString.call(e))>-1};function o(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function h(e){return"string"!=typeof e&&(e=String(e)),e}function c(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return r.iterable&&(t[Symbol.iterator]=function(){return t}),t}function l(e){this.map={},e instanceof l?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){if(2!=e.length)throw TypeError("Headers constructor: expected name/value pair to be length 2, found"+e.length);this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function p(e){if(!e._noBody){if(e.bodyUsed)return Promise.reject(TypeError("Already read"));e.bodyUsed=!0}}function d(e){return new Promise(function(t,s){e.onload=function(){t(e.result)},e.onerror=function(){s(e.error)}})}function u(e){var t=new FileReader,s=d(t);return t.readAsArrayBuffer(e),s}function f(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function m(){return this.bodyUsed=!1,this._initBody=function(e){if(this.bodyUsed=this.bodyUsed,this._bodyInit=e,e){if("string"==typeof e)this._bodyText=e;else if(r.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(r.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(r.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else{var t;r.arrayBuffer&&r.blob&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=f(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):r.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||a(e))?this._bodyArrayBuffer=f(e):this._bodyText=e=Object.prototype.toString.call(e)}}else this._noBody=!0,this._bodyText="";!this.headers.get("content-type")&&("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r.blob&&(this.blob=function(){var e=p(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(!this._bodyFormData)return Promise.resolve(new Blob([this._bodyText]));throw Error("could not read FormData body as blob")}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=p(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}if(r.blob)return this.blob().then(u);throw Error("could not read as ArrayBuffer")},this.text=function(){var e,t,s,i,r,n=p(this);if(n)return n;if(this._bodyBlob)return e=this._bodyBlob,s=d(t=new FileReader),r=(i=/charset=([A-Za-z0-9_-]+)/.exec(e.type))?i[1]:"utf-8",t.readAsText(e,r),s;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),s=Array(t.length),i=0;i<t.length;i++)s[i]=String.fromCharCode(t[i]);return s.join("")}(this._bodyArrayBuffer));if(!this._bodyFormData)return Promise.resolve(this._bodyText);throw Error("could not read FormData body as text")},r.formData&&(this.formData=function(){return this.text().then(y)}),this.json=function(){return this.text().then(JSON.parse)},this}l.prototype.append=function(e,t){e=o(e),t=h(t);var s=this.map[e];this.map[e]=s?s+", "+t:t},l.prototype.delete=function(e){delete this.map[o(e)]},l.prototype.get=function(e){return e=o(e),this.has(e)?this.map[e]:null},l.prototype.has=function(e){return this.map.hasOwnProperty(o(e))},l.prototype.set=function(e,t){this.map[o(e)]=h(t)},l.prototype.forEach=function(e,t){for(var s in this.map)this.map.hasOwnProperty(s)&&e.call(t,this.map[s],s,this)},l.prototype.keys=function(){var e=[];return this.forEach(function(t,s){e.push(s)}),c(e)},l.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),c(e)},l.prototype.entries=function(){var e=[];return this.forEach(function(t,s){e.push([s,t])}),c(e)},r.iterable&&(l.prototype[Symbol.iterator]=l.prototype.entries);var v=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function g(e,t){if(!(this instanceof g))throw TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var s,r,n=(t=t||{}).body;if(e instanceof g){if(e.bodyUsed)throw TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new l(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",(t.headers||!this.headers)&&(this.headers=new l(t.headers)),this.method=(r=(s=t.method||this.method||"GET").toUpperCase(),v.indexOf(r)>-1?r:s),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal||function(){if("AbortController"in i)return new AbortController().signal}(),this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(n),("GET"===this.method||"HEAD"===this.method)&&("no-store"===t.cache||"no-cache"===t.cache)){var a=/([?&])_=[^&]*/;a.test(this.url)?this.url=this.url.replace(a,"$1_="+new Date().getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+new Date().getTime()}}function y(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var s=e.split("="),i=s.shift().replace(/\+/g," "),r=s.join("=").replace(/\+/g," ");t.append(decodeURIComponent(i),decodeURIComponent(r))}}),t}function b(e,t){if(!(this instanceof b))throw TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.status<200||this.status>599)throw RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new l(t.headers),this.url=t.url||"",this._initBody(e)}g.prototype.clone=function(){return new g(this,{body:this._bodyInit})},m.call(g.prototype),m.call(b.prototype),b.prototype.clone=function(){return new b(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new l(this.headers),url:this.url})},b.error=function(){var e=new b(null,{status:200,statusText:""});return e.ok=!1,e.status=0,e.type="error",e};var P=[301,302,303,307,308];b.redirect=function(e,t){if(-1===P.indexOf(t))throw RangeError("Invalid status code");return new b(null,{status:t,headers:{location:e}})},t.DOMException=i.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(e,t){this.message=e,this.name=t;var s=Error(e);this.stack=s.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function w(e,s){return new Promise(function(n,a){var c=new g(e,s);if(c.signal&&c.signal.aborted)return a(new t.DOMException("Aborted","AbortError"));var p=new XMLHttpRequest;function d(){p.abort()}if(p.onload=function(){var e,t,s={statusText:p.statusText,headers:(e=p.getAllResponseHeaders()||"",t=new l,e.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e}).forEach(function(e){var s=e.split(":"),i=s.shift().trim();if(i){var r=s.join(":").trim();try{t.append(i,r)}catch(e){console.warn("Response "+e.message)}}}),t)};0===c.url.indexOf("file://")&&(p.status<200||p.status>599)?s.status=200:s.status=p.status,s.url="responseURL"in p?p.responseURL:s.headers.get("X-Request-URL");var i="response"in p?p.response:p.responseText;setTimeout(function(){n(new b(i,s))},0)},p.onerror=function(){setTimeout(function(){a(TypeError("Network request failed"))},0)},p.ontimeout=function(){setTimeout(function(){a(TypeError("Network request timed out"))},0)},p.onabort=function(){setTimeout(function(){a(new t.DOMException("Aborted","AbortError"))},0)},p.open(c.method,function(e){try{return""===e&&i.location.href?i.location.href:e}catch(t){return e}}(c.url),!0),"include"===c.credentials?p.withCredentials=!0:"omit"===c.credentials&&(p.withCredentials=!1),"responseType"in p&&(r.blob?p.responseType="blob":r.arrayBuffer&&(p.responseType="arraybuffer")),s&&"object"==typeof s.headers&&!(s.headers instanceof l||i.Headers&&s.headers instanceof i.Headers)){var u=[];Object.getOwnPropertyNames(s.headers).forEach(function(e){u.push(o(e)),p.setRequestHeader(e,h(s.headers[e]))}),c.headers.forEach(function(e,t){-1===u.indexOf(t)&&p.setRequestHeader(t,e)})}else c.headers.forEach(function(e,t){p.setRequestHeader(t,e)});c.signal&&(c.signal.addEventListener("abort",d),p.onreadystatechange=function(){4===p.readyState&&c.signal.removeEventListener("abort",d)}),p.send(void 0===c._bodyInit?null:c._bodyInit)})}w.polyfill=!0,i.fetch||(i.fetch=w,i.Headers=l,i.Request=g,i.Response=b),t.Headers=l,t.Request=g,t.Response=b,t.fetch=w,Object.defineProperty(t,"__esModule",{value:!0})}({})}(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var n=i.fetch?i:r;(t=n.fetch).default=n.fetch,t.fetch=n.fetch,t.Headers=n.Headers,t.Request=n.Request,t.Response=n.Response,e.exports=t}}]);