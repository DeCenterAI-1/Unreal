try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="c1a7e27b-acfe-4556-843f-766b78297cd0",e._sentryDebugIdIdentifier="sentry-dbid-c1a7e27b-acfe-4556-843f-766b78297cd0")}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2333,14588],{2333:(e,t,n)=>{n.r(t),n.d(t,{concatHex:()=>r});var a=n(39174);function r(e){return a.xW(...e)}},14588:(e,t,n)=>{n.d(t,{getZkGasFees:()=>T,f:()=>D,sendEip712Transaction:()=>I,a:()=>j});var a=n(51781),r=n(75458),i=n(24798),s=n(96840);function o(e){if(e<256)return 1;if(e<65536)return 2;if(e<0x1000000)return 3;if(e<0x100000000)return 4;throw new a.C("Length is too large.")}var u=n(53289),c=n(50590),y=n(64865),l=n(17316),g=n(2333),p=n(84828),d=n(59353),h=n(93254),f=n(85442),m=n(2714),b=n(63873),x=n(56766);let w=32n*(2n**16n-1n);class B extends a.C{constructor({givenLength:e,maxBytecodeSize:t}){super(`Bytecode cannot be longer than ${t} bytes. Given length: ${e}`,{name:"BytecodeLengthExceedsMaxSizeError"})}}class v extends a.C{constructor({givenLengthInWords:e}){super(`Bytecode length in 32-byte words must be odd. Given length in words: ${e}`,{name:"BytecodeLengthInWordsMustBeOddError"})}}class P extends a.C{constructor({givenLength:e}){super(`The bytecode length in bytes must be divisible by 32. Given length: ${e}`,{name:"BytecodeLengthMustBeDivisibleBy32Error"})}}let _=e=>{let t=function(e){let{gas:t,nonce:n,to:a,from:r,value:o,maxFeePerGas:u,maxPriorityFeePerGas:c,paymaster:y,paymasterInput:l,gasPerPubdata:g,data:d,factoryDeps:h}=e;return{txType:113n,from:BigInt(r),to:a?BigInt(a):0n,gasLimit:t??0n,gasPerPubdataByteLimit:g??50000n,maxFeePerGas:u??0n,maxPriorityFeePerGas:c??0n,paymaster:y?BigInt(y):0n,nonce:n?BigInt(n):0n,value:o??0n,data:d||"0x0",factoryDeps:h?.map(e=>p.nj(function(e){let t=(0,i.ZJ)(e);if(t.length%32!=0)throw new P({givenLength:t.length});if(t.length>w)throw new B({givenLength:t.length,maxBytecodeSize:w});let n=function(e,t){let n=(0,b.sc)((0,x.q)(e,{strict:!1})?(0,i.ZJ)(e):e);return"bytes"===((void 0)||"hex")?n:(0,s.nj)(n)}(t),a=(0,i.ZJ)(n),r=t.length/32;if(r%2==0)throw new v({givenLengthInWords:r});let o=(0,i.ZJ)(r),u=(0,m.eV)(o,{size:2}),c=new Uint8Array([1,0]);return a.set(c,0),a.set(u,2),a}(e)))??[],paymasterInput:l||"0x"}}(e);return{domain:{name:"zkSync",version:"2",chainId:e.chainId},types:{Transaction:[{name:"txType",type:"uint256"},{name:"from",type:"uint256"},{name:"to",type:"uint256"},{name:"gasLimit",type:"uint256"},{name:"gasPerPubdataByteLimit",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymaster",type:"uint256"},{name:"nonce",type:"uint256"},{name:"value",type:"uint256"},{name:"data",type:"bytes"},{name:"factoryDeps",type:"bytes32[]"},{name:"paymasterInput",type:"bytes"}]},primaryType:"Transaction",message:t}};async function I(e){let{account:t,transaction:n}=e,a=await D(e),r=await j({account:t,eip712Transaction:a,chainId:n.chain.id}),i=(0,c.getRpcClient)(n);return{transactionHash:await (0,u.B)(i,r),chain:n.chain,client:n.client}}async function j(e){let{account:t,eip712Transaction:n,chainId:a}=e,u=_(n),c=await t.signTypedData({...u});return function(e){let{chainId:t,gas:n,nonce:a,to:u,from:c,value:y,maxFeePerGas:l,maxPriorityFeePerGas:d,customSignature:h,factoryDeps:f,paymaster:m,paymasterInput:b,gasPerPubdata:x,data:w}=e,B=[a?(0,p.nj)(a):"0x",d?(0,p.nj)(d):"0x",l?(0,p.nj)(l):"0x",n?(0,p.nj)(n):"0x",u??"0x",y?(0,p.nj)(y):"0x",w??"0x0",(0,p.nj)(t),(0,p.nj)(""),(0,p.nj)(""),(0,p.nj)(t),c??"0x",x?(0,p.nj)(x):(0,p.nj)(50000n),f??[],h??"0x",m&&b?[m,b]:[]];return(0,g.concatHex)(["0x71",function(e,t="hex"){let n=function e(t){return Array.isArray(t)?function(e){let t=e.reduce((e,t)=>e+t.length,0),n=o(t);return{length:t<=55?1+t:1+n+t,encode(a){for(let{encode:r}of(t<=55?a.pushByte(192+t):(a.pushByte(247+n),1===n?a.pushUint8(t):2===n?a.pushUint16(t):3===n?a.pushUint24(t):a.pushUint32(t)),e))r(a)}}}(t.map(t=>e(t))):function(e){let t="string"==typeof e?(0,i.aT)(e):e,n=o(t.length);return{length:1===t.length&&t[0]<128?1:t.length<=55?1+t.length:1+n+t.length,encode(e){1===t.length&&t[0]<128||(t.length<=55?e.pushByte(128+t.length):(e.pushByte(183+n),1===n?e.pushUint8(t.length):2===n?e.pushUint16(t.length):3===n?e.pushUint24(t.length):e.pushUint32(t.length))),e.pushBytes(t)}}}(t)}(e),a=(0,r.l)(new Uint8Array(n.length));return(n.encode(a),"hex"===t)?(0,s.My)(a.bytes):a.bytes}(B)])}({...n,chainId:a,customSignature:c})}async function D(e){let{account:t,transaction:n}=e,{gas:a,maxFeePerGas:r,maxPriorityFeePerGas:i,gasPerPubdata:s}=await T({transaction:n,from:(0,y.bv)(t.address)});return{...await (0,f.$)({transaction:{...n,gas:a,maxFeePerGas:r,maxPriorityFeePerGas:i},from:t.address}),...n.eip712,gasPerPubdata:s,from:t.address}}async function T(e){let{transaction:t,from:n}=e,[a,r,i,s]=await Promise.all([(0,d.r)(t.gas),(0,d.r)(t.maxFeePerGas),(0,d.r)(t.maxPriorityFeePerGas),(0,d.r)(t.eip712)]),o=s?.gasPerPubdata;if(void 0===a||void 0===r||void 0===i){let e=(0,c.getRpcClient)(t),s=await E({transaction:t,from:n}),u=await e({method:"zks_estimateFee",params:[(0,l.Xf)(s,p.nj)]});a=2n*(0,l.Dg)(u.gas_limit),r=2n*(0,l.Dg)(u.max_fee_per_gas),i=(0,l.Dg)(u.max_priority_fee_per_gas)||1n,(o=2n*(0,l.Dg)(u.gas_per_pubdata_limit))<50000n&&(o=50000n)}return{gas:a,maxFeePerGas:r,maxPriorityFeePerGas:i,gasPerPubdata:o}}async function E(e){let{transaction:t,from:n}=e,[a,r,s,o]=await Promise.all([(0,h.encode)(t),(0,d.r)(t.to),(0,d.r)(t.value),(0,d.r)(t.eip712)]),u=o?.gasPerPubdata;return{from:n,to:r,data:a,value:s,gasPerPubdata:u,eip712Meta:{...o,gasPerPubdata:u||50000n,factoryDeps:o?.factoryDeps?.map(e=>Array.from(i.aT(e)))},type:"0x71"}}},17316:(e,t,n)=>{n.d(t,{Dg:()=>r,Xf:()=>i});var a=n(84828);function r(e){if(["string","number"].includes(typeof e)&&!Number.isInteger(Number(e)))throw Error(`Expected value to be an integer to convert to a bigint, got ${e} of type ${typeof e}`);return e instanceof Uint8Array?BigInt((0,a.EY)(e)):BigInt(e)}let i=(e,t)=>"bigint"==typeof e?t(e):Array.isArray(e)?e.map(e=>i(e,t)):e&&"object"==typeof e?Object.fromEntries(Object.entries(e).map(([e,n])=>[e,i(n,t)])):e},53289:(e,t,n)=>{n.d(t,{B:()=>a});async function a(e,t){return await e({method:"eth_sendRawTransaction",params:[t]})}}}]);